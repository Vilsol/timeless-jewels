var ql=Object.defineProperty;var Ul=(t,e,l)=>e in t?ql(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var ye=(t,e,l)=>(Ul(t,typeof e!="symbol"?e+"":e,l),l);import{s as nt,r as vt,f as R,a as J,g as P,h as O,d as w,c as q,j as E,k as Ke,i as D,D as A,H as Et,I as Ee,u as bt,v as wt,w as St,F as xe,J as Bl,o as Ot,K as Dt,L as Fl,M as K,p as Ze,y as Qe,N as Al,e as we,A as Rl,z as b,l as X,x as ve,m as G,n as Re,G as st,E as $e,O as pe,B as kt,C as et,P as Vt,Q as jt}from"../chunks/scheduler.a4661fe7.js";import{S as it,i as rt,a as U,t as H,g as Oe,c as De,b as Ve,d as je,m as Je,e as qe,f as It}from"../chunks/index.0ccbc0e6.js";import{e as Me,u as Hl,o as Kl,g as Yl,S as ft}from"../chunks/navigation.52610b85.js";import{r as Xl,h as Gl}from"../chunks/singletons.983e1da1.js";import{b as Wl,a as Ye,d as Lt,t as Jt,c as lt,o as qt,e as Tt,f as Ut,i as Bt,g as Ft,h as Ql,j as Ht,k as Pl,m as ct,n as Zl,s as xl,p as $l}from"../chunks/worker.48d5ce91.js";import{c as zl,d as se}from"../chunks/index.098253ec.js";import{p as es}from"../chunks/stores.4ff88578.js";const Ml=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;class ts{constructor(){ye(this,"currentLayerId");ye(this,"setups");ye(this,"renderers");ye(this,"dispatchers");ye(this,"needsSetup");ye(this,"needsRedraw");ye(this,"context");ye(this,"width");ye(this,"height");ye(this,"autoclear");ye(this,"pixelRatio");ye(this,"renderLoop");ye(this,"layerObserver");ye(this,"layerRef");ye(this,"layerSequence");ye(this,"renderingLayerId");ye(this,"activeLayerId");ye(this,"activeLayerDispatcher");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.getRenderingLayerId=this.getRenderingLayerId.bind(this),this.currentLayerId=1,this.setups=new Map,this.renderers=new Map,this.dispatchers=new Map,this.needsSetup=!1,this.needsRedraw=!0,this.renderingLayerId=0,this.activeLayerId=0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}register({setup:e,render:l,dispatcher:s}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,l),this.dispatchers.set(this.currentLayerId,s),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.dispatchers.delete(e),this.needsRedraw=!0}setup(e,l){this.context=e,this.layerRef=l,this.observeLayerSequence(),this.startRenderLoop()}observeLayerSequence(){this.layerObserver=new MutationObserver(this.getLayerSequence.bind(this)),this.layerObserver.observe(this.layerRef,{childList:!0}),this.getLayerSequence()}getLayerSequence(){const e=[...this.layerRef.children];this.layerSequence=e.map(l=>+(l.dataset.layerId??-1)),this.redraw()}startRenderLoop(){this.render(),this.renderLoop=requestAnimationFrame(()=>this.startRenderLoop())}render(){var n;const e=this.context,l=this.width,s=this.height,i=this.pixelRatio;if(this.needsSetup){for(const[r,u]of this.setups)u({context:e,width:l,height:s}),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e.setTransform(i,0,0,i,0,0),this.autoclear&&e.clearRect(0,0,l,s);for(const r of this.layerSequence)this.renderingLayerId=r,(n=this.renderers.get(r))==null||n({context:e,width:l,height:s});this.needsRedraw=!1}}setActiveLayer(e,l){this.activeLayerId!==e&&(l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerleave",l)),this.dispatchLayerEvent(new MouseEvent("mouseleave",l))),this.activeLayerId=e,this.activeLayerDispatcher=this.dispatchers.get(e),l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerenter",l)),this.dispatchLayerEvent(new MouseEvent("mouseenter",l))))}dispatchLayerEvent(e){if(this.activeLayerDispatcher){if(window.TouchEvent&&e instanceof TouchEvent){const{left:l,top:s}=e.target.getBoundingClientRect(),{clientX:i,clientY:n}=e.changedTouches[0],r={x:i-l,y:n-s,originalEvent:e};this.activeLayerDispatcher(e.type,r)}else if(e instanceof MouseEvent){const l={x:e.offsetX,y:e.offsetY,originalEvent:e};this.activeLayerDispatcher(e.type,l)}}}getRenderingLayerId(){return this.renderingLayerId}destroy(){typeof window>"u"||(this.layerObserver.disconnect(),cancelAnimationFrame(this.renderLoop))}}const ls=t=>{const e=t*2,l=e>>16&255,s=e>>8&255,i=e&255;return`rgb(${l}, ${s}, ${i})`},ss=(t,e,l)=>{const s=(t<<16|e<<8|l)/2;return s%1?0:s},ns=["drawImage"],is=["filter","shadowBlur","globalCompositeOperation","globalAlpha"],rs=["drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],as=t=>{let e;const l=document.createElement("canvas"),s=l.getContext("2d",{willReadFrequently:!0}),i=()=>{l.width=t.canvas.width,l.height=t.canvas.height};return new MutationObserver(i).observe(t.canvas,{attributeFilter:["width","height"]}),i(),new Proxy(t,{get(r,u){if(u==="_getLayerIdAtPixel")return(o,h)=>{const[_,m,g]=s.getImageData(o,h,1,1).data;return ss(_,m,g)};const a=r[u];return typeof a!="function"?a:function(...o){if(rs.includes(u)){const h=ls(e());s.fillStyle=h,s.strokeStyle=h}if(u==="drawImage"){const h=o.slice(1);s.fillRect(...h)}return ns.includes(u)||Reflect.apply(a,s,o),Reflect.apply(a,r,o)}},set(r,u,a){return u==="_renderingLayerId"?(e=a,!0):(r[u]=a,is.includes(u)||(s[u]=a),!0)}})};function os(t){let e,l,s,i=`${t[0]}px`,n=`${t[1]}px`,r,u,a,o,h;const _=t[18].default,m=vt(_,t,t[17],null);return{c(){e=R("canvas"),r=J(),u=R("div"),m&&m.c(),this.h()},l(g){e=P(g,"CANVAS",{width:!0,height:!0,class:!0,style:!0}),O(e).forEach(w),r=q(g),u=P(g,"DIV",{});var c=O(u);m&&m.l(c),c.forEach(w),this.h()},h(){E(e,"width",l=t[0]*t[5]),E(e,"height",s=t[1]*t[5]),E(e,"class",t[4]),E(e,"style",t[2]),Ke(e,"display","block"),Ke(e,"width",i),Ke(e,"height",n),Ke(u,"display","none")},m(g,c){D(g,e,c),t[64](e),D(g,r,c),D(g,u,c),m&&m.m(u,null),t[65](u),a=!0,o||(h=[A(e,"touchstart",Et(function(){Ee(t[3]?t[9]:null)&&(t[3]?t[9]:null).apply(this,arguments)})),A(e,"mousemove",function(){Ee(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),A(e,"pointermove",function(){Ee(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),A(e,"click",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"contextmenu",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"dblclick",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"mousedown",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"mouseenter",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"mouseleave",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"mouseup",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"wheel",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"touchcancel",Et(function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),A(e,"touchend",Et(function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),A(e,"touchmove",Et(function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),A(e,"pointerenter",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"pointerleave",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"pointerdown",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"pointerup",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"pointercancel",function(){Ee(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),A(e,"focus",t[19]),A(e,"blur",t[20]),A(e,"fullscreenchange",t[21]),A(e,"fullscreenerror",t[22]),A(e,"scroll",t[23]),A(e,"cut",t[24]),A(e,"copy",t[25]),A(e,"paste",t[26]),A(e,"keydown",t[27]),A(e,"keypress",t[28]),A(e,"keyup",t[29]),A(e,"auxclick",t[30]),A(e,"click",t[31]),A(e,"contextmenu",t[32]),A(e,"dblclick",t[33]),A(e,"mousedown",t[34]),A(e,"mouseenter",t[35]),A(e,"mouseleave",t[36]),A(e,"mousemove",t[37]),A(e,"mouseover",t[38]),A(e,"mouseout",t[39]),A(e,"mouseup",t[40]),A(e,"select",t[41]),A(e,"wheel",t[42]),A(e,"drag",t[43]),A(e,"dragend",t[44]),A(e,"dragenter",t[45]),A(e,"dragstart",t[46]),A(e,"dragleave",t[47]),A(e,"dragover",t[48]),A(e,"drop",t[49]),A(e,"touchcancel",t[50]),A(e,"touchend",t[51]),A(e,"touchmove",t[52]),A(e,"touchstart",t[53]),A(e,"pointerover",t[54]),A(e,"pointerenter",t[55]),A(e,"pointerdown",t[56]),A(e,"pointermove",t[57]),A(e,"pointerup",t[58]),A(e,"pointercancel",t[59]),A(e,"pointerout",t[60]),A(e,"pointerleave",t[61]),A(e,"gotpointercapture",t[62]),A(e,"lostpointercapture",t[63])],o=!0)},p(g,c){t=g,(!a||c[0]&33&&l!==(l=t[0]*t[5]))&&E(e,"width",l),(!a||c[0]&34&&s!==(s=t[1]*t[5]))&&E(e,"height",s),(!a||c[0]&16)&&E(e,"class",t[4]),(!a||c[0]&4)&&E(e,"style",t[2]);const f=c[0]&4;f&&Ke(e,"display","block"),(f||c[0]&5&&i!==(i=`${t[0]}px`))&&Ke(e,"width",i),(f||c[0]&6&&n!==(n=`${t[1]}px`))&&Ke(e,"height",n),m&&m.p&&(!a||c[0]&131072)&&bt(m,_,t,t[17],a?St(_,t[17],c,null):wt(t[17]),null)},i(g){a||(U(m,g),a=!0)},o(g){H(m,g),a=!1},d(g){g&&(w(e),w(r),w(u)),t[64](null),m&&m.d(g),t[65](null),o=!1,xe(h)}}}const Ll=Symbol(),us=()=>Fl(Ll);function fs(t,e,l){let s,{$$slots:i={},$$scope:n}=e,{width:r=640,height:u=640,pixelRatio:a=null,style:o="",autoclear:h=!0,layerEvents:_=!1}=e,{class:m=""}=e,g,c=null,f;const d=new ts;function p(){d.redraw()}function S(){return g}function T(){return c}a==null&&(typeof window<"u"?a=window.devicePixelRatio:a=2),Bl(Ll,{register:d.register,unregister:d.unregister,redraw:d.redraw}),Ot(()=>{const k=g.getContext("2d");_?(c=as(k),c._renderingLayerId=d.getRenderingLayerId):c=k,d.setup(c,f)}),Dt(()=>d.destroy());const z=k=>{const mt=k.offsetX*s,_t=k.offsetY*s,gt=c._getLayerIdAtPixel(mt,_t);d.setActiveLayer(gt,k),d.dispatchLayerEvent(k)},I=k=>{const{clientX:mt,clientY:_t}=k.changedTouches[0],{left:gt,top:Rt}=g.getBoundingClientRect(),Pt=(mt-gt)*s,zt=(_t-Rt)*s,Mt=c._getLayerIdAtPixel(Pt,zt);d.setActiveLayer(Mt,k),d.dispatchLayerEvent(k)},C=k=>{window.TouchEvent&&k instanceof TouchEvent&&k.preventDefault(),d.dispatchLayerEvent(k)};function M(k){K.call(this,t,k)}function L(k){K.call(this,t,k)}function V(k){K.call(this,t,k)}function j(k){K.call(this,t,k)}function F(k){K.call(this,t,k)}function Z(k){K.call(this,t,k)}function x(k){K.call(this,t,k)}function de(k){K.call(this,t,k)}function Te(k){K.call(this,t,k)}function oe(k){K.call(this,t,k)}function ee(k){K.call(this,t,k)}function Ce(k){K.call(this,t,k)}function ze(k){K.call(this,t,k)}function Se(k){K.call(this,t,k)}function B(k){K.call(this,t,k)}function ie(k){K.call(this,t,k)}function re(k){K.call(this,t,k)}function N(k){K.call(this,t,k)}function v(k){K.call(this,t,k)}function $(k){K.call(this,t,k)}function ue(k){K.call(this,t,k)}function ne(k){K.call(this,t,k)}function me(k){K.call(this,t,k)}function te(k){K.call(this,t,k)}function ge(k){K.call(this,t,k)}function _e(k){K.call(this,t,k)}function Le(k){K.call(this,t,k)}function he(k){K.call(this,t,k)}function Y(k){K.call(this,t,k)}function W(k){K.call(this,t,k)}function ae(k){K.call(this,t,k)}function le(k){K.call(this,t,k)}function Fe(k){K.call(this,t,k)}function Ue(k){K.call(this,t,k)}function Xe(k){K.call(this,t,k)}function fe(k){K.call(this,t,k)}function ke(k){K.call(this,t,k)}function He(k){K.call(this,t,k)}function Be(k){K.call(this,t,k)}function Pe(k){K.call(this,t,k)}function Ne(k){K.call(this,t,k)}function at(k){K.call(this,t,k)}function ht(k){K.call(this,t,k)}function dt(k){K.call(this,t,k)}function ot(k){K.call(this,t,k)}function ut(k){Ze[k?"unshift":"push"](()=>{g=k,l(6,g)})}function At(k){Ze[k?"unshift":"push"](()=>{f=k,l(7,f)})}return t.$$set=k=>{"width"in k&&l(0,r=k.width),"height"in k&&l(1,u=k.height),"pixelRatio"in k&&l(11,a=k.pixelRatio),"style"in k&&l(2,o=k.style),"autoclear"in k&&l(12,h=k.autoclear),"layerEvents"in k&&l(3,_=k.layerEvents),"class"in k&&l(4,m=k.class),"$$scope"in k&&l(17,n=k.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2048&&l(5,s=a??1),t.$$.dirty[0]&1&&l(16,d.width=r,d),t.$$.dirty[0]&2&&l(16,d.height=u,d),t.$$.dirty[0]&32&&l(16,d.pixelRatio=s,d),t.$$.dirty[0]&4096&&l(16,d.autoclear=h,d),t.$$.dirty[0]&71683&&d.redraw()},[r,u,o,_,m,s,g,f,z,I,C,a,h,p,S,T,d,n,i,M,L,V,j,F,Z,x,de,Te,oe,ee,Ce,ze,Se,B,ie,re,N,v,$,ue,ne,me,te,ge,_e,Le,he,Y,W,ae,le,Fe,Ue,Xe,fe,ke,He,Be,Pe,Ne,at,ht,dt,ot,ut,At]}class cs extends it{constructor(e){super(),rt(this,e,fs,os,nt,{width:0,height:1,pixelRatio:11,style:2,autoclear:12,layerEvents:3,class:4,redraw:13,getCanvas:14,getContext:15},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[13]}get getCanvas(){return this.$$.ctx[14]}get getContext(){return this.$$.ctx[15]}}function hs(t){let e;return{c(){e=R("div"),this.h()},l(l){e=P(l,"DIV",{"data-layer-id":!0}),O(e).forEach(w),this.h()},h(){E(e,"data-layer-id",t[0])},m(l,s){D(l,e,s)},p:Qe,i:Qe,o:Qe,d(l){l&&w(e)}}}function ds(t,e,l){const{register:s,unregister:i,redraw:n}=us(),r=Al();let{setup:u=void 0}=e,{render:a=()=>{}}=e;const o=s({setup:u,render:a,dispatcher:r});return Dt(()=>i(o)),t.$$set=h=>{"setup"in h&&l(1,u=h.setup),"render"in h&&l(2,a=h.render)},t.$$.update=()=>{t.$$.dirty&4&&n()},[o,u,a]}class ms extends it{constructor(e){super(),rt(this,e,ds,hs,nt,{setup:1,render:2})}}let Kt;const Nl=Date.now(),Ol=t=>(t(Date.now()-Nl),Kt=window.requestAnimationFrame(()=>Ol(t)),()=>window.cancelAnimationFrame(Kt));function _s(){}const gs=Xl(Date.now()-Nl,typeof window>"u"?_s:Ol),{window:Nt}=Ml;function Yt(t){let e,l,s,i,n,r;l=new cs({props:{width:t[0],height:t[1],$$slots:{default:[ps]},$$scope:{ctx:t}}}),l.$on("pointerdown",t[5]),l.$on("wheel",t[8]);const u=t[26].default,a=vt(u,t,t[27],null);return{c(){e=R("div"),Ve(l.$$.fragment),s=J(),a&&a.c(),this.h()},l(o){e=P(o,"DIV",{style:!0});var h=O(e);je(l.$$.fragment,h),s=q(h),a&&a.l(h),h.forEach(w),this.h()},h(){Ke(e,"touch-action","none"),Ke(e,"cursor",t[2])},m(o,h){D(o,e,h),Je(l,e,null),b(e,s),a&&a.m(e,null),i=!0,n||(r=A(e,"resize",t[9]),n=!0)},p(o,h){const _={};h[0]&1&&(_.width=o[0]),h[0]&2&&(_.height=o[1]),h[0]&134217736&&(_.$$scope={dirty:h,ctx:o}),l.$set(_),a&&a.p&&(!i||h[0]&134217728)&&bt(a,u,o,o[27],i?St(u,o[27],h,null):wt(o[27]),null),(!i||h[0]&4)&&Ke(e,"cursor",o[2])},i(o){i||(U(l.$$.fragment,o),U(a,o),i=!0)},o(o){H(l.$$.fragment,o),H(a,o),i=!1},d(o){o&&w(e),qe(l),a&&a.d(o),n=!1,r()}}}function ps(t){let e,l;return e=new ms({props:{render:t[3]}}),{c(){Ve(e.$$.fragment)},l(s){je(e.$$.fragment,s)},m(s,i){Je(e,s,i),l=!0},p(s,i){const n={};i[0]&8&&(n.render=s[3]),e.$set(n)},i(s){l||(U(e.$$.fragment,s),l=!0)},o(s){H(e.$$.fragment,s),l=!1},d(s){qe(e,s)}}}function vs(t){let e,l,s,i,n=t[0]&&t[1]&&Yt(t);return{c(){n&&n.c(),e=we()},l(r){n&&n.l(r),e=we()},m(r,u){n&&n.m(r,u),D(r,e,u),l=!0,s||(i=[A(Nt,"pointerup",t[6]),A(Nt,"pointermove",t[7]),A(Nt,"resize",t[9])],s=!0)},p(r,u){r[0]&&r[1]?n?(n.p(r,u),u[0]&3&&U(n,1)):(n=Yt(r),n.c(),U(n,1),n.m(e.parentNode,e)):n&&(Oe(),H(n,1,1,()=>{n=null}),De())},i(r){l||(U(n),l=!0)},o(r){H(n),l=!1},d(r){r&&w(e),n&&n.d(r),s=!1,xe(i)}}}const Xt="25px Roboto Mono",Gt="17px Roboto Mono",Wt=2.6;function bs(t,e,l){let s,i,n,{$$slots:r={},$$scope:u}=e,{clickNode:a}=e,{circledNode:o}=e,{selectedJewel:h}=e,{selectedConqueror:_}=e,{seed:m}=e,{highlighted:g=[]}=e,{disabled:c=[]}=e,{highlightJewels:f=!1}=e;const d=Gl(gs,v=>(!g||!g.length)&&!f?0:Math.round(v/40));Rl(t,d,v=>l(25,n=v));const p=[427,320,226,227,323,422,329];let S=10,T=0,z=0;const I={},C={},M=(v,$,ue,ne=!1,me=!1)=>{let te=ne?Ql[$]:Ht[$];!te&&ne&&(te=Ht[$]);const ge=te.filename;ge in(ne?C:I)||((ne?C:I)[ge]=new Image,(ne?C:I)[ge].src=ge);const _e=te.coords[$],Le=_e.w/S*Wt,he=_e.h/S*Wt,Y=ue.x-Le/2,W=ue.y-he/2;let ae=W;me&&(ae=W-he/2),v.drawImage((ne?C:I)[ge],_e.x,_e.y,_e.w,_e.h,Y,ae,Le,he),me&&(v.save(),v.translate(Y,W),v.rotate(Math.PI),v.drawImage((ne?C:I)[ge],_e.x,_e.y,_e.w,_e.h,-Le,-(he/2),Le,-he),v.restore())},L=(v,$,ue)=>{const ne=[];let me="";return v.split(" ").forEach(te=>{$.measureText(me+te).width<ue?me+=" "+te:(ne.push(me.trim()),me=te)}),me.length>0&&ne.push(me.trim()),ne};let V={x:Number.MIN_VALUE,y:Number.MIN_VALUE},j="unset",F,Z=0,x=0,de=0,Te=0,oe=!1;const ee=v=>{oe=!0,Z=v.offsetX,x=v.offsetY,de=T,Te=z,l(21,V={x:v.offsetX,y:v.offsetY}),F&&a(F)},Ce=v=>{v.type==="pointerup"&&(oe=!1),l(21,V={x:v.offsetX,y:v.offsetY})},ze=v=>{oe&&(l(19,T=de-(Z-v.offsetX)*S),l(20,z=Te-(x-v.offsetY)*S)),l(21,V={x:v.offsetX,y:v.offsetY})},Se=v=>{v.deltaY>0?S<30&&(l(19,T+=v.offsetX),l(20,z+=v.offsetY)):S>3&&(l(19,T-=v.offsetX),l(20,z-=v.offsetY)),l(18,S=Math.min(30,Math.max(3,S+v.deltaY/100))),v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation()};let B=0,ie=0;const re=()=>{l(0,B=window.innerWidth),l(1,ie=window.innerHeight)};let N=!1;return t.$$set=v=>{"clickNode"in v&&l(10,a=v.clickNode),"circledNode"in v&&l(11,o=v.circledNode),"selectedJewel"in v&&l(12,h=v.selectedJewel),"selectedConqueror"in v&&l(13,_=v.selectedConqueror),"seed"in v&&l(14,m=v.seed),"highlighted"in v&&l(15,g=v.highlighted),"disabled"in v&&l(16,c=v.disabled),"highlightJewels"in v&&l(17,f=v.highlightJewels),"$$scope"in v&&l(27,u=v.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&262144&&l(24,s=Wl/S),t.$$.dirty[0]&8650752&&(!N&&Ye&&(l(23,N=!0),l(19,T=Ye.min_x+window.innerWidth/2*S),l(20,z=Ye.min_y+window.innerHeight/2*S)),re()),t.$$.dirty[0]&58718208&&l(3,i=({context:v,width:$,height:ue})=>{const ne=window.performance.now();v.clearRect(0,0,$,ue),v.fillStyle="#080c11",v.fillRect(0,0,$,ue);const me={};Object.keys(Lt).forEach(he=>{const Y=Lt[he],W=Jt(Y.x,Y.y,T,z,S),ae=Math.max(...Y.orbits);p.indexOf(parseInt(he))>=0||(ae==1?M(v,"PSGroupBackground1",W,!1):ae==2?M(v,"PSGroupBackground2",W,!1):(ae==3||Y.orbits.length>1)&&M(v,"PSGroupBackground3",W,!1,!0))}),Object.keys(lt).forEach(he=>{var le;const Y=lt[he],W=qt(Y.orbit,Y.orbitIndex),ae=Tt(Y,T,z,S);(le=Y.out)==null||le.forEach(Fe=>{if(!lt[parseInt(Fe)])return;const Ue=Math.min(parseInt(Fe),parseInt(he)),Xe=Math.max(parseInt(Fe),parseInt(he)),fe=Ue+":"+Xe;if(fe in me)return;me[fe]=!0;const ke=lt[parseInt(Fe)];if(!ke||ke.isMastery)return;const He=qt(ke.orbit,ke.orbitIndex),Be=Tt(ke,T,z,S);if(v.beginPath(),Y.group!=ke.group||Y.orbit!=ke.orbit)v.moveTo(ae.x,ae.y),v.lineTo(Be.x,Be.y);else{let Pe=Math.PI/180-Math.PI/180*W,Ne=Math.PI/180-Math.PI/180*He;Pe-=Math.PI/2,Ne-=Math.PI/2;const at=Math.abs(Math.max(Pe,Ne)-Math.min(Pe,Ne)),ht=at>Math.PI?Math.max(Pe,Ne):Math.min(Pe,Ne),dt=at>Math.PI?Math.min(Pe,Ne):Math.max(Pe,Ne),ot=Lt[Y.group],ut=Jt(ot.x,ot.y,T,z,S);v.arc(ut.x,ut.y,Ye.constants.orbitRadii[Y.orbit]/S+1,ht,dt)}v.lineWidth=6/S,v.strokeStyle="#524518",v.stroke()})});let te;o&&(te=Tt(lt[o],T,z,S),v.strokeStyle="#ad2b2b");let ge=!1,_e;if(Object.keys(lt).forEach(he=>{const Y=lt[he],W=Tt(Y,T,z,S);let ae=0,le=!1;o&&Ut(W,te)<s&&(le=!0),c.indexOf(Y.skill)>=0&&(le=!1),Y.isKeystone?(ae=110,M(v,Y.icon,W,le),le?M(v,"KeystoneFrameAllocated",W,!1):M(v,"KeystoneFrameUnallocated",W,!1)):Y.isNotable?(ae=70,M(v,Y.icon,W,le),le?M(v,"NotableFrameAllocated",W,!1):M(v,"NotableFrameUnallocated",W,!1)):Y.isJewelSocket?(ae=70,Y.expansionJewel?M(v,"JewelSocketAltNormal",W,!1):le?M(v,"JewelFrameAllocated",W,!1):M(v,"JewelFrameUnallocated",W,!1)):Y.isMastery?M(v,Y.inactiveIcon,W,le):(ae=50,M(v,Y.icon,W,le),le?M(v,"PSSkillFrameActive",W,!1):M(v,"PSSkillFrame",W,!1)),(g.indexOf(Y.skill)>=0||f&&Y.isJewelSocket)&&(v.strokeStyle=`hsl(${n}, 100%, 50%)`,v.lineWidth=3,v.beginPath(),v.arc(W.x,W.y,(ae+30)/S,0,Math.PI*2),v.stroke()),Ut(W,V)<ae/S&&(_e=Y,ge=le)}),l(22,F=_e),o&&(v.strokeStyle="#ad2b2b",v.lineWidth=1,v.beginPath(),v.arc(te.x,te.y,s,0,Math.PI*2),v.stroke()),F){let he=F.name,Y=(F.stats||[]).map(fe=>({text:fe,special:!1}));if(!F.isJewelSocket&&ge&&F.skill&&m&&h&&_){const fe=zl.Calculate(se.TreeToPassive[F.skill].Index,m,h,_);fe&&("AlternatePassiveSkill"in fe&&fe.AlternatePassiveSkill&&(Y=[],he=fe.AlternatePassiveSkill.Name,"StatsKeys"in fe.AlternatePassiveSkill&&fe.AlternatePassiveSkill.StatsKeys.forEach((ke,He)=>{const Be=se.GetStatByIndex(ke),Pe=Bt[Be.ID]||"";Pe&&Y.push({text:Ft(Pe,fe.StatRolls[He])||Be.ID,special:!0})})),fe.AlternatePassiveAdditionInformations&&fe.AlternatePassiveAdditionInformations.forEach(ke=>{"StatsKeys"in ke.AlternatePassiveAddition&&ke.AlternatePassiveAddition.StatsKeys.forEach((He,Be)=>{const Pe=se.GetStatByIndex(He),Ne=Bt[Pe.ID]||"";Ne&&Y.push({text:Ft(Ne,ke.StatRolls[Be])||Pe.ID,special:!0})})}))}v.font=Xt;const W=v.measureText(he),ae=Math.max(W.width+50,600);v.font=Gt;const le=[],Fe=30;let Ue=85;Y&&Y.length>0?Y.forEach(fe=>{le.length>0&&(Ue+=5),fe.text.split(`
`).forEach(ke=>{le.length>0&&(Ue+=10),L(ke,v,ae-Fe).forEach(Be=>{le.push({text:Be,offset:Ue,special:fe.special}),Ue+=20})})}):F.isJewelSocket&&(le.push({text:"Click to select this socket",offset:Ue,special:!0}),Ue+=20);const Xe=55;v.fillStyle="rgba(75,63,24,0.9)",v.fillRect(V.x,V.y,ae,Xe),v.fillStyle="#ffffff",v.font=Xt,v.textAlign="center",v.fillText(he,V.x+ae/2,V.y+35),v.fillStyle="rgba(0,0,0,0.8)",v.fillRect(V.x,V.y+Xe,ae,Ue-Xe),v.font=Gt,v.textAlign="left",le.forEach(fe=>{fe.special?v.fillStyle="#8cf34c":v.fillStyle="#ffffff",v.fillText(fe.text,V.x+Fe/2,V.y+fe.offset)})}F&&F.isJewelSocket?l(2,j="pointer"):l(2,j="unset"),v.fillStyle="#ffffff",v.textAlign="right",v.font="12px Roboto Mono";const Le=window.performance.now();v.fillText(`${(Le-ne).toFixed(1)}ms`,$-5,17)})},[B,ie,j,i,d,ee,Ce,ze,Se,re,a,o,h,_,m,g,c,f,S,T,z,V,F,N,s,n,r,u]}class ws extends it{constructor(e){super(),rt(this,e,bs,vs,nt,{clickNode:10,circledNode:11,selectedJewel:12,selectedConqueror:13,seed:14,highlighted:15,disabled:16,highlightJewels:17},null,[-1,-1])}}function Qt(t,e,l){const s=t.slice();return s[6]=e[l],s}function Zt(t,e,l){const s=t.slice();return s[9]=e[l],s}function xt(t){let e,l=ct(t[9],t[6].stats[t[9]])+"",s;return{c(){e=R("li"),s=X(l)},l(i){e=P(i,"LI",{});var n=O(e);s=G(n,l),n.forEach(w)},m(i,n){D(i,e,n),b(e,s)},p(i,n){n&2&&l!==(l=ct(i[9],i[6].stats[i[9]])+"")&&Re(s,l)},d(i){i&&w(e)}}}function $t(t){let e,l,s=Ye.nodes[t[6].passive].name+"",i,n,r=t[6].passive+"",u,a,o,h,_,m=Me(Object.keys(t[6].stats)),g=[];for(let c=0;c<m.length;c+=1)g[c]=xt(Zt(t,m,c));return{c(){e=R("div"),l=R("span"),i=X(s),n=X(" ("),u=X(r),a=X(")"),o=J(),h=R("ul");for(let c=0;c<g.length;c+=1)g[c].c();_=J(),this.h()},l(c){e=P(c,"DIV",{class:!0});var f=O(e);l=P(f,"SPAN",{});var d=O(l);i=G(d,s),n=G(d," ("),u=G(d,r),a=G(d,")"),d.forEach(w),o=q(f),h=P(f,"UL",{class:!0});var p=O(h);for(let S=0;S<g.length;S+=1)g[S].l(p);p.forEach(w),_=q(f),f.forEach(w),this.h()},h(){E(h,"class","list-disc pl-6 font-bold"),E(e,"class","mt-2")},m(c,f){D(c,e,f),b(e,l),b(l,i),b(l,n),b(l,u),b(l,a),b(e,o),b(e,h);for(let d=0;d<g.length;d+=1)g[d]&&g[d].m(h,null);b(e,_)},p(c,f){if(f&2&&s!==(s=Ye.nodes[c[6].passive].name+"")&&Re(i,s),f&2&&r!==(r=c[6].passive+"")&&Re(u,r),f&2){m=Me(Object.keys(c[6].stats));let d;for(d=0;d<m.length;d+=1){const p=Zt(c,m,d);g[d]?g[d].p(p,f):(g[d]=xt(p),g[d].c(),g[d].m(h,null))}for(;d<g.length;d+=1)g[d].d(1);g.length=m.length}},d(c){c&&w(e),st(g,c)}}}function Ss(t){let e,l,s,i="Trade",n,r,u,a=t[1].seed+"",o,h,_=t[1].weight+"",m,g,c,f,d="Trade",p,S,T,z=Me(t[1].skills),I=[];for(let C=0;C<z.length;C+=1)I[C]=$t(Qt(t,z,C));return{c(){e=R("div"),l=R("div"),s=R("button"),s.textContent=i,n=J(),r=R("div"),u=X("Seed "),o=X(a),h=X(" (weight "),m=X(_),g=X(")"),c=J(),f=R("button"),f.textContent=d,p=J();for(let C=0;C<I.length;C+=1)I[C].c();this.h()},l(C){e=P(C,"DIV",{class:!0});var M=O(e);l=P(M,"DIV",{class:!0});var L=O(l);s=P(L,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(s)!=="svelte-1wpptz2"&&(s.textContent=i),n=q(L),r=P(L,"DIV",{class:!0});var V=O(r);u=G(V,"Seed "),o=G(V,a),h=G(V," (weight "),m=G(V,_),g=G(V,")"),V.forEach(w),c=q(L),f=P(L,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(f)!=="svelte-1ji53d9"&&(f.textContent=d),L.forEach(w),p=q(M);for(let j=0;j<I.length;j+=1)I[j].l(M);M.forEach(w),this.h()},h(){E(s,"class","px-3 invisible"),E(r,"class","font-bold text-orange-500 text-center"),E(f,"class","px-3 bg-blue-500/40 rounded"),E(l,"class","flex flex-row justify-between"),E(e,"class","my-2 border-white/50 border p-2 flex flex-col cursor-pointer")},m(C,M){D(C,e,M),b(e,l),b(l,s),b(l,n),b(l,r),b(r,u),b(r,o),b(r,h),b(r,m),b(r,g),b(l,c),b(l,f),b(e,p);for(let L=0;L<I.length;L+=1)I[L]&&I[L].m(e,null);S||(T=[A(f,"click",t[4]),A(e,"click",t[5])],S=!0)},p(C,[M]){if(M&2&&a!==(a=C[1].seed+"")&&Re(o,a),M&2&&_!==(_=C[1].weight+"")&&Re(m,_),M&2){z=Me(C[1].skills);let L;for(L=0;L<z.length;L+=1){const V=Qt(C,z,L);I[L]?I[L].p(V,M):(I[L]=$t(V),I[L].c(),I[L].m(e,null))}for(;L<I.length;L+=1)I[L].d(1);I.length=z.length}},i:Qe,o:Qe,d(C){C&&w(e),st(I,C),S=!1,xe(T)}}}function ks(t,e,l){let{highlight:s}=e,{set:i}=e,{jewel:n}=e,{conqueror:r}=e;const u=()=>Pl(n,r,[i]),a=()=>s(i.seed,i.skills.map(o=>o.passive));return t.$$set=o=>{"highlight"in o&&l(0,s=o.highlight),"set"in o&&l(1,i=o.set),"jewel"in o&&l(2,n=o.jewel),"conqueror"in o&&l(3,r=o.conqueror)},[s,i,n,r,u,a]}class Dl extends it{constructor(e){super(),rt(this,e,ks,Ss,nt,{highlight:0,set:1,jewel:2,conqueror:3})}}const Ct={AUTO:"auto",START:"start",CENTER:"center",END:"end"},We={HORIZONTAL:"horizontal",VERTICAL:"vertical"},pt={OBSERVED:0,REQUESTED:1},Is={[We.VERTICAL]:"top",[We.HORIZONTAL]:"left"},el={[We.VERTICAL]:"scrollTop",[We.HORIZONTAL]:"scrollLeft"};class ys{constructor({itemSize:e,itemCount:l,estimatedItemSize:s}){this.itemSize=e,this.itemCount=l,this.estimatedItemSize=s,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:l,estimatedItemSize:s}){l!=null&&(this.itemCount=l),s!=null&&(this.estimatedItemSize=s),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:l}=this;return typeof l=="function"?l(e):Array.isArray(l)?l[e]:l}computeTotalSizeAndPositionData(){let e=0;for(let l=0;l<this.itemCount;l++){const s=this.getSize(l),i=e;e+=s,this.itemSizeAndPositionData[l]={offset:i,size:s}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const l=this.getSizeAndPositionOfLastMeasuredItem();let s=l.offset+l.size;for(let i=this.lastMeasuredIndex+1;i<=e;i++){const n=this.getSize(i);if(n==null||isNaN(n))throw Error(`Invalid size returned for index ${i} of value ${n}`);this.itemSizeAndPositionData[i]={offset:s,size:n},s+=n}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=Ct.START,containerSize:l,currentOffset:s,targetIndex:i}){if(l<=0)return 0;const n=this.getSizeAndPositionForIndex(i),r=n.offset,u=r-l+n.size;let a;switch(e){case Ct.END:a=u;break;case Ct.CENTER:a=r-(l-n.size)/2;break;case Ct.START:a=r;break;default:a=Math.max(u,Math.min(r,s))}const o=this.getTotalSize();return Math.max(0,Math.min(o-l,a))}getVisibleRange({containerSize:e=0,offset:l,overscanCount:s}){if(this.getTotalSize()===0)return{};const n=l+e;let r=this.findNearestItem(l);if(r===void 0)throw Error(`Invalid offset ${l} specified`);const u=this.getSizeAndPositionForIndex(r);l=u.offset+u.size;let a=r;for(;l<n&&a<this.itemCount-1;)a++,l+=this.getSizeAndPositionForIndex(a).size;return s&&(r=Math.max(0,r-s),a=Math.min(a+s,this.itemCount-1)),{start:r,stop:a}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const l=this.getSizeAndPositionOfLastMeasuredItem(),s=Math.max(0,this.lastMeasuredIndex);return l.offset>=e?this.binarySearch({high:s,low:0,offset:e}):this.exponentialSearch({index:s,offset:e})}binarySearch({low:e,high:l,offset:s}){let i=0,n=0;for(;e<=l;){if(i=e+Math.floor((l-e)/2),n=this.getSizeAndPositionForIndex(i).offset,n===s)return i;n<s?e=i+1:n>s&&(l=i-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:l}){let s=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<l;)e+=s,s*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:l})}}const Es=t=>({}),tl=t=>({});function ll(t,e,l){const s=t.slice();return s[37]=e[l],s}const Ts=t=>({style:t[0]&4,index:t[0]&4}),sl=t=>({style:t[37].style,index:t[37].index}),Cs=t=>({}),nl=t=>({});function il(t,e){let l,s;const i=e[21].item,n=vt(i,e,e[20],sl);return{key:t,first:null,c(){l=we(),n&&n.c(),this.h()},l(r){l=we(),n&&n.l(r),this.h()},h(){this.first=l},m(r,u){D(r,l,u),n&&n.m(r,u),s=!0},p(r,u){e=r,n&&n.p&&(!s||u[0]&1048580)&&bt(n,i,e,e[20],s?St(i,e[20],u,Ts):wt(e[20]),sl)},i(r){s||(U(n,r),s=!0)},o(r){H(n,r),s=!1},d(r){r&&w(l),n&&n.d(r)}}}function As(t){let e,l,s,i=[],n=new Map,r,u;const a=t[21].header,o=vt(a,t,t[20],nl);let h=Me(t[2]);const _=c=>c[0]?c[0](c[37].index):c[37].index;for(let c=0;c<h.length;c+=1){let f=ll(t,h,c),d=_(f);n.set(d,i[c]=il(d,f))}const m=t[21].footer,g=vt(m,t,t[20],tl);return{c(){e=R("div"),o&&o.c(),l=J(),s=R("div");for(let c=0;c<i.length;c+=1)i[c].c();r=J(),g&&g.c(),this.h()},l(c){e=P(c,"DIV",{class:!0,style:!0});var f=O(e);o&&o.l(f),l=q(f),s=P(f,"DIV",{class:!0,style:!0});var d=O(s);for(let p=0;p<i.length;p+=1)i[p].l(d);d.forEach(w),r=q(f),g&&g.l(f),f.forEach(w),this.h()},h(){E(s,"class","virtual-list-inner svelte-1d4hv8l"),E(s,"style",t[4]),E(e,"class","virtual-list-wrapper svelte-1d4hv8l"),E(e,"style",t[3])},m(c,f){D(c,e,f),o&&o.m(e,null),b(e,l),b(e,s);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(s,null);b(e,r),g&&g.m(e,null),t[22](e),u=!0},p(c,f){o&&o.p&&(!u||f[0]&1048576)&&bt(o,a,c,c[20],u?St(a,c[20],f,Cs):wt(c[20]),nl),f[0]&1048581&&(h=Me(c[2]),Oe(),i=Hl(i,f,_,1,c,h,n,s,Kl,il,null,ll),De()),(!u||f[0]&16)&&E(s,"style",c[4]),g&&g.p&&(!u||f[0]&1048576)&&bt(g,m,c,c[20],u?St(m,c[20],f,Es):wt(c[20]),tl),(!u||f[0]&8)&&E(e,"style",c[3])},i(c){if(!u){U(o,c);for(let f=0;f<h.length;f+=1)U(i[f]);U(g,c),u=!0}},o(c){H(o,c);for(let f=0;f<i.length;f+=1)H(i[f]);H(g,c),u=!1},d(c){c&&w(e),o&&o.d(c);for(let f=0;f<i.length;f+=1)i[f].d();g&&g.d(c),t[22](null)}}}const Rs=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function Ps(t,e,l){let{$$slots:s={},$$scope:i}=e,{height:n}=e,{width:r="100%"}=e,{itemCount:u}=e,{itemSize:a}=e,{estimatedItemSize:o=null}=e,{stickyIndices:h=null}=e,{getKey:_=null}=e,{scrollDirection:m=We.VERTICAL}=e,{scrollOffset:g=null}=e,{scrollToIndex:c=null}=e,{scrollToAlignment:f=null}=e,{scrollToBehaviour:d="instant"}=e,{overscanCount:p=3}=e;const S=Al(),T=new ys({itemCount:u,itemSize:a,estimatedItemSize:B()});let z=!1,I,C=[],M={offset:g||c!=null&&C.length&&Ce(c)||0,scrollChangeReason:pt.REQUESTED},L=M,V={scrollToIndex:c,scrollToAlignment:f,scrollOffset:g,itemCount:u,itemSize:a,estimatedItemSize:o},j={},F="",Z="";Te(),Ot(()=>{l(18,z=!0),I.addEventListener("scroll",ze,Rs),g!=null?oe(g):c!=null&&oe(Ce(c))}),Dt(()=>{z&&I.removeEventListener("scroll",ze)});function x(){if(!z)return;const N=V.scrollToIndex!==c||V.scrollToAlignment!==f,v=V.itemCount!==u||V.itemSize!==a||V.estimatedItemSize!==o;v&&(T.updateConfig({itemSize:a,itemCount:u,estimatedItemSize:B()}),ee()),V.scrollOffset!==g?l(19,M={offset:g||0,scrollChangeReason:pt.REQUESTED}):typeof c=="number"&&(N||v)&&l(19,M={offset:Ce(c,f,u),scrollChangeReason:pt.REQUESTED}),V={scrollToIndex:c,scrollToAlignment:f,scrollOffset:g,itemCount:u,itemSize:a,estimatedItemSize:o}}function de(){if(!z)return;const{offset:N,scrollChangeReason:v}=M;(L.offset!==N||L.scrollChangeReason!==v)&&Te(),L.offset!==N&&v===pt.REQUESTED&&oe(N),L=M}function Te(){const{offset:N}=M,{start:v,stop:$}=T.getVisibleRange({containerSize:m===We.VERTICAL?n:r,offset:N,overscanCount:p});let ue=[];const ne=T.getTotalSize();m===We.VERTICAL?(l(3,F=`height:${n}px;width:${r};`),l(4,Z=`flex-direction:column;height:${ne}px;`)):(l(3,F=`height:${n};width:${r}px`),l(4,Z=`min-height:100%;width:${ne}px;`));const me=h!=null&&h.length!==0;if(me)for(let te=0;te<h.length;te++){const ge=h[te];ue.push({index:ge,style:ie(ge,!0)})}if(v!==void 0&&$!==void 0){for(let te=v;te<=$;te++)me&&h.includes(te)||ue.push({index:te,style:ie(te,!1)});S("itemsUpdated",{start:v,end:$})}l(2,C=ue)}function oe(N){"scroll"in I?I.scroll({[Is[m]]:N,behavior:d}):l(1,I[el[m]]=N,I)}function ee(N=0){j={},T.resetItem(N),Te()}function Ce(N,v=f,$=u){return(N<0||N>=$)&&(N=0),T.getUpdatedOffsetForIndex({align:v,containerSize:m===We.VERTICAL?n:r,currentOffset:M.offset||0,targetIndex:N})}function ze(N){const v=Se();v<0||M.offset===v||N.target!==I||(l(19,M={offset:v,scrollChangeReason:pt.OBSERVED}),S("afterScroll",{offset:v,event:N}))}function Se(){return I[el[m]]}function B(){return o||typeof a=="number"&&a||50}function ie(N,v){if(j[N])return j[N];const{size:$,offset:ue}=T.getSizeAndPositionForIndex(N);let ne;return m===We.VERTICAL?(ne=`left:0;width:100%;height:${$}px;`,v?ne+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${ue}px;margin-bottom:${-(ue+$)}px;`:ne+=`position:absolute;top:${ue}px;`):(ne=`top:0;width:${$}px;`,v?ne+=`position:sticky;z-index:1;left:0;margin-left:${ue}px;margin-right:${-(ue+$)}px;`:ne+=`position:absolute;height:100%;left:${ue}px;`),j[N]=ne}function re(N){Ze[N?"unshift":"push"](()=>{I=N,l(1,I)})}return t.$$set=N=>{"height"in N&&l(5,n=N.height),"width"in N&&l(6,r=N.width),"itemCount"in N&&l(7,u=N.itemCount),"itemSize"in N&&l(8,a=N.itemSize),"estimatedItemSize"in N&&l(9,o=N.estimatedItemSize),"stickyIndices"in N&&l(10,h=N.stickyIndices),"getKey"in N&&l(0,_=N.getKey),"scrollDirection"in N&&l(11,m=N.scrollDirection),"scrollOffset"in N&&l(12,g=N.scrollOffset),"scrollToIndex"in N&&l(13,c=N.scrollToIndex),"scrollToAlignment"in N&&l(14,f=N.scrollToAlignment),"scrollToBehaviour"in N&&l(15,d=N.scrollToBehaviour),"overscanCount"in N&&l(16,p=N.overscanCount),"$$scope"in N&&l(20,i=N.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&x(),t.$$.dirty[0]&524288&&de(),t.$$.dirty[0]&263264&&z&&ee(0)},[_,I,C,F,Z,n,r,u,a,o,h,m,g,c,f,d,p,ee,z,M,i,s,re]}class Vl extends it{constructor(e){super(),rt(this,e,Ps,As,nt,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get recomputeSizes(){return this.$$.ctx[17]}}function rl(t,e,l){const s=t.slice();return s[9]=e[l],s}function zs(t){let e,l,s;return l=new Vl({props:{height:"auto",overscanCount:15,itemCount:t[0].raw.length,itemSize:t[0].raw.map(t[6]),$$slots:{item:[Ls,({style:i,index:n})=>({12:i,13:n}),({style:i,index:n})=>(i?4096:0)|(n?8192:0)]},$$scope:{ctx:t}}}),{c(){e=R("div"),Ve(l.$$.fragment),this.h()},l(i){e=P(i,"DIV",{class:!0});var n=O(e);je(l.$$.fragment,n),n.forEach(w),this.h()},h(){E(e,"class","mt-4 flex flex-col overflow-auto")},m(i,n){D(i,e,n),Je(l,e,null),s=!0},p(i,n){const r={};n&1&&(r.itemCount=i[0].raw.length),n&1&&(r.itemSize=i[0].raw.map(i[6])),n&28699&&(r.$$scope={dirty:n,ctx:i}),l.$set(r)},i(i){s||(U(l.$$.fragment,i),s=!0)},o(i){H(l.$$.fragment,i),s=!1},d(i){i&&w(e),qe(l)}}}function Ms(t){let e,l,s=Me(Object.keys(t[0].grouped).map(t[7]).sort(ul).reverse()),i=[];for(let r=0;r<s.length;r+=1)i[r]=ol(rl(t,s,r));const n=r=>H(i[r],1,1,()=>{i[r]=null});return{c(){e=R("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=P(r,"DIV",{class:!0});var u=O(e);for(let a=0;a<i.length;a+=1)i[a].l(u);u.forEach(w),this.h()},h(){E(e,"class","flex flex-col overflow-auto")},m(r,u){D(r,e,u);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);l=!0},p(r,u){if(u&12411){s=Me(Object.keys(r[0].grouped).map(r[7]).sort(ul).reverse());let a;for(a=0;a<s.length;a+=1){const o=rl(r,s,a);i[a]?(i[a].p(o,u),U(i[a],1)):(i[a]=ol(o),i[a].c(),U(i[a],1),i[a].m(e,null))}for(Oe(),a=s.length;a<i.length;a+=1)n(a);De()}},i(r){if(!l){for(let u=0;u<s.length;u+=1)U(i[u]);l=!0}},o(r){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)H(i[u]);l=!1},d(r){r&&w(e),st(i,r)}}}function Ls(t){let e,l,s,i;return l=new Dl({props:{set:t[0].raw[t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=R("div"),Ve(l.$$.fragment),this.h()},l(n){e=P(n,"DIV",{slot:!0,style:!0});var r=O(e);je(l.$$.fragment,r),r.forEach(w),this.h()},h(){E(e,"slot","item"),E(e,"style",s=t[12])},m(n,r){D(n,e,r),Je(l,e,null),i=!0},p(n,r){const u={};r&8193&&(u.set=n[0].raw[n[13]]),r&2&&(u.highlight=n[1]),r&8&&(u.jewel=n[3]),r&16&&(u.conqueror=n[4]),l.$set(u),(!i||r&4096&&s!==(s=n[12]))&&E(e,"style",s)},i(n){i||(U(l.$$.fragment,n),i=!0)},o(n){H(l.$$.fragment,n),i=!1},d(n){n&&w(e),qe(l)}}}function al(t){let e,l,s,i;return l=new Vl({props:{height:"auto",overscanCount:10,itemCount:t[0].grouped[t[9]].length,itemSize:t[0].grouped[t[9]].map(t[6]),$$slots:{item:[Ns,({style:n,index:r})=>({12:n,13:r}),({style:n,index:r})=>(n?4096:0)|(r?8192:0)]},$$scope:{ctx:t}}}),{c(){e=R("div"),Ve(l.$$.fragment),s=J(),this.h()},l(n){e=P(n,"DIV",{class:!0});var r=O(e);je(l.$$.fragment,r),s=q(r),r.forEach(w),this.h()},h(){E(e,"class","flex flex-col overflow-auto min-h-[200px] mb-2")},m(n,r){D(n,e,r),Je(l,e,null),b(e,s),i=!0},p(n,r){const u={};r&1&&(u.itemCount=n[0].grouped[n[9]].length),r&1&&(u.itemSize=n[0].grouped[n[9]].map(n[6])),r&28699&&(u.$$scope={dirty:r,ctx:n}),l.$set(u)},i(n){i||(U(l.$$.fragment,n),i=!0)},o(n){H(l.$$.fragment,n),i=!1},d(n){n&&w(e),qe(l)}}}function Ns(t){let e,l,s,i;return l=new Dl({props:{set:t[0].grouped[t[9]][t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=R("div"),Ve(l.$$.fragment),this.h()},l(n){e=P(n,"DIV",{slot:!0,style:!0});var r=O(e);je(l.$$.fragment,r),r.forEach(w),this.h()},h(){E(e,"slot","item"),E(e,"style",s=t[12])},m(n,r){D(n,e,r),Je(l,e,null),i=!0},p(n,r){const u={};r&8193&&(u.set=n[0].grouped[n[9]][n[13]]),r&2&&(u.highlight=n[1]),r&8&&(u.jewel=n[3]),r&16&&(u.conqueror=n[4]),l.$set(u),(!i||r&4096&&s!==(s=n[12]))&&E(e,"style",s)},i(n){i||(U(l.$$.fragment,n),i=!0)},o(n){H(l.$$.fragment,n),i=!1},d(n){n&&w(e),qe(l)}}}function ol(t){let e,l,s=t[9]+"",i,n,r=t[9]>1?"es":"",u,a,o=t[0].grouped[t[9]].length+"",h,_,m,g,c=t[5]===t[9]?"^":"V",f,d,p,S,T,z;function I(){return t[8](t[9])}let C=t[5]===t[9]&&al(t);return{c(){e=R("button"),l=R("span"),i=X(s),n=X(" Match"),u=X(r),a=X(" ["),h=X(o),_=X("]"),m=J(),g=R("span"),f=X(c),d=J(),C&&C.c(),p=we(),this.h()},l(M){e=P(M,"BUTTON",{class:!0});var L=O(e);l=P(L,"SPAN",{});var V=O(l);i=G(V,s),n=G(V," Match"),u=G(V,r),a=G(V," ["),h=G(V,o),_=G(V,"]"),V.forEach(w),m=q(L),g=P(L,"SPAN",{});var j=O(g);f=G(j,c),j.forEach(w),L.forEach(w),d=q(M),C&&C.l(M),p=we(),this.h()},h(){E(e,"class","text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between mb-2")},m(M,L){D(M,e,L),b(e,l),b(l,i),b(l,n),b(l,u),b(l,a),b(l,h),b(l,_),b(e,m),b(e,g),b(g,f),D(M,d,L),C&&C.m(M,L),D(M,p,L),S=!0,T||(z=A(e,"click",I),T=!0)},p(M,L){t=M,(!S||L&1)&&s!==(s=t[9]+"")&&Re(i,s),(!S||L&1)&&r!==(r=t[9]>1?"es":"")&&Re(u,r),(!S||L&1)&&o!==(o=t[0].grouped[t[9]].length+"")&&Re(h,o),(!S||L&33)&&c!==(c=t[5]===t[9]?"^":"V")&&Re(f,c),t[5]===t[9]?C?(C.p(t,L),L&33&&U(C,1)):(C=al(t),C.c(),U(C,1),C.m(p.parentNode,p)):C&&(Oe(),H(C,1,1,()=>{C=null}),De())},i(M){S||(U(C),S=!0)},o(M){H(C),S=!1},d(M){M&&(w(e),w(d),w(p)),C&&C.d(M),T=!1,z()}}}function Os(t){let e,l,s,i;const n=[Ms,zs],r=[];function u(a,o){return a[2]?0:1}return e=u(t),l=r[e]=n[e](t),{c(){l.c(),s=we()},l(a){l.l(a),s=we()},m(a,o){r[e].m(a,o),D(a,s,o),i=!0},p(a,[o]){let h=e;e=u(a),e===h?r[e].p(a,o):(Oe(),H(r[h],1,1,()=>{r[h]=null}),De(),l=r[e],l?l.p(a,o):(l=r[e]=n[e](a),l.c()),U(l,1),l.m(s.parentNode,s))},i(a){i||(U(l),i=!0)},o(a){H(l),i=!1},d(a){a&&w(s),r[e].d(a)}}}const ul=(t,e)=>t-e;function Ds(t,e,l){let{searchResults:s}=e,{highlight:i}=e,{groupResults:n=!0}=e,{jewel:r}=e,{conqueror:u}=e;const a=m=>8+48+m.skills.reduce((g,c)=>g+32+Object.keys(c.stats).length*24,0);let o="";const h=m=>parseInt(m),_=m=>l(5,o=o===m?"":m);return t.$$set=m=>{"searchResults"in m&&l(0,s=m.searchResults),"highlight"in m&&l(1,i=m.highlight),"groupResults"in m&&l(2,n=m.groupResults),"jewel"in m&&l(3,r=m.jewel),"conqueror"in m&&l(4,u=m.conqueror)},[s,i,n,r,u,o,a,h,_]}class Vs extends it{constructor(e){super(),rt(this,e,Ds,Os,nt,{searchResults:0,highlight:1,groupResults:2,jewel:3,conqueror:4})}}const tt={25:1,26:1,42:1,49:1,56:1,63:1,70:2,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1294:1,1361:1,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2};const{window:js}=Ml;function fl(t,e,l){const s=t.slice();return s[84]=e[l],s[85]=e,s[86]=l,s}function cl(t,e,l){const s=t.slice();return s[77]=e[l],s}function hl(t,e,l){const s=t.slice();return s[77]=e[l],s}function dl(t,e,l){const s=t.slice();return s[77]=e[l],s}function Js(t){let e,l="<div></div> <div></div> <div></div>",s,i;return{c(){e=R("button"),e.innerHTML=l,this.h()},l(n){e=P(n,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(e)!=="svelte-rq6e1l"&&(e.innerHTML=l),this.h()},h(){E(e,"class","burger-menu absolute top-0 left-0 bg-black/80 backdrop-blur-sm rounded-br-lg p-4 pt-5")},m(n,r){D(n,e,r),s||(i=A(e,"click",t[71]),s=!0)},p:Qe,i:Qe,o:Qe,d(n){n&&w(e),s=!1,i()}}}function qs(t){let e,l,s,i,n,r="<div></div> <div></div> <div></div>",u,a,o,h,_,m,g,c;function f(I,C){return I[15]?Bs:Us}let d=f(t),p=d(t),S=t[19]&&ml(t),T=!t[15]&&gl(t),z=t[19]&&t[15]&&Cl(t);return{c(){e=R("div"),l=R("div"),s=R("div"),i=R("div"),n=R("button"),n.innerHTML=r,u=J(),a=R("h3"),p.c(),o=J(),S&&S.c(),h=J(),T&&T.c(),_=J(),z&&z.c(),this.h()},l(I){e=P(I,"DIV",{class:!0});var C=O(e);l=P(C,"DIV",{class:!0});var M=O(l);s=P(M,"DIV",{class:!0});var L=O(s);i=P(L,"DIV",{class:!0});var V=O(i);n=P(V,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(n)!=="svelte-mvbl10"&&(n.innerHTML=r),u=q(V),a=P(V,"H3",{class:!0});var j=O(a);p.l(j),j.forEach(w),V.forEach(w),o=q(L),S&&S.l(L),L.forEach(w),h=q(M),T&&T.l(M),_=q(M),z&&z.l(M),M.forEach(w),C.forEach(w),this.h()},h(){E(n,"class","burger-menu mr-3"),E(a,"class","flex-grow"),E(i,"class","flex flex-row items-center"),E(s,"class","flex flex-row justify-between mb-2"),E(l,"class","p-4 max-h-screen flex flex-col"),E(e,"class","w-screen md:w-10/12 lg:w-2/3 xl:w-1/2 2xl:w-5/12 3xl:w-1/3 4xl:w-1/4 min-w-[820px] absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen")},m(I,C){D(I,e,C),b(e,l),b(l,s),b(s,i),b(i,n),b(i,u),b(i,a),p.m(a,null),b(s,o),S&&S.m(s,null),b(l,h),T&&T.m(l,null),b(l,_),z&&z.m(l,null),m=!0,g||(c=A(n,"click",t[48]),g=!0)},p(I,C){d!==(d=f(I))&&(p.d(1),p=d(I),p&&(p.c(),p.m(a,null))),I[19]?S?(S.p(I,C),C[0]&524288&&U(S,1)):(S=ml(I),S.c(),U(S,1),S.m(s,null)):S&&(Oe(),H(S,1,1,()=>{S=null}),De()),I[15]?T&&(Oe(),H(T,1,1,()=>{T=null}),De()):T?(T.p(I,C),C[0]&32768&&U(T,1)):(T=gl(I),T.c(),U(T,1),T.m(l,_)),I[19]&&I[15]?z?(z.p(I,C),C[0]&557056&&U(z,1)):(z=Cl(I),z.c(),U(z,1),z.m(l,null)):z&&(Oe(),H(z,1,1,()=>{z=null}),De())},i(I){m||(U(S),U(T),U(z),m=!0)},o(I){H(S),H(T),H(z),m=!1},d(I){I&&w(e),p.d(),S&&S.d(),T&&T.d(),z&&z.d(),g=!1,c()}}}function Us(t){let e,l="Timeless Jewel";return{c(){e=R("span"),e.textContent=l},l(s){e=P(s,"SPAN",{"data-svelte-h":!0}),ve(e)!=="svelte-ddxked"&&(e.textContent=l)},m(s,i){D(s,e,i)},d(s){s&&w(e)}}}function Bs(t){let e,l="Results";return{c(){e=R("span"),e.textContent=l},l(s){e=P(s,"SPAN",{"data-svelte-h":!0}),ve(e)!=="svelte-rq68qg"&&(e.textContent=l)},m(s,i){D(s,e,i)},d(s){s&&w(e)}}}function ml(t){let e,l,s,i=t[15]?"Config":"Results",n,r,u,a,o=t[15]&&_l(t);return{c(){e=R("div"),o&&o.c(),l=J(),s=R("button"),n=X(i),this.h()},l(h){e=P(h,"DIV",{class:!0});var _=O(e);o&&o.l(_),l=q(_),s=P(_,"BUTTON",{class:!0});var m=O(s);n=G(m,i),m.forEach(w),_.forEach(w),this.h()},h(){E(s,"class","bg-neutral-100/20 px-4 p-1 rounded"),E(e,"class","flex flex-row gap-2")},m(h,_){D(h,e,_),o&&o.m(e,null),b(e,l),b(e,s),b(s,n),r=!0,u||(a=A(s,"click",t[53]),u=!0)},p(h,_){h[15]?o?(o.p(h,_),_[0]&32768&&U(o,1)):(o=_l(h),o.c(),U(o,1),o.m(e,l)):o&&(Oe(),H(o,1,1,()=>{o=null}),De()),(!r||_[0]&32768)&&i!==(i=h[15]?"Config":"Results")&&Re(n,i)},i(h){r||(U(o),r=!0)},o(h){H(o),r=!1},d(h){h&&w(e),o&&o.d(),u=!1,a()}}}function _l(t){let e,l,s,i,n,r,u,a,o,h,_,m,g,c,f,d;function p(I){t[49](I)}let S={items:t[24],clearable:!1};t[10]!==void 0&&(S.value=t[10]),e=new ft({props:S}),Ze.push(()=>It(e,"value",p)),e.$on("change",t[29]);function T(I){t[50](I)}let z={items:t[45],clearable:!1};return t[9]!==void 0&&(z.value=t[9]),i=new ft({props:z}),Ze.push(()=>It(i,"value",T)),i.$on("change",t[29]),{c(){Ve(e.$$.fragment),s=J(),Ve(i.$$.fragment),r=J(),u=R("button"),a=X("Trade"),h=J(),_=R("button"),m=X("Grouped"),this.h()},l(I){je(e.$$.fragment,I),s=q(I),je(i.$$.fragment,I),r=q(I),u=P(I,"BUTTON",{class:!0});var C=O(u);a=G(C,"Trade"),C.forEach(w),h=q(I),_=P(I,"BUTTON",{class:!0});var M=O(_);m=G(M,"Grouped"),M.forEach(w),this.h()},h(){E(u,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40"),u.disabled=o=!t[19],E(_,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 svelte-9h6fz6"),_.disabled=g=!t[19],pe(_,"grouped",t[5])},m(I,C){Je(e,I,C),D(I,s,C),Je(i,I,C),D(I,r,C),D(I,u,C),b(u,a),D(I,h,C),D(I,_,C),b(_,m),c=!0,f||(d=[A(u,"click",t[51]),A(_,"click",t[52])],f=!0)},p(I,C){const M={};C[0]&16777216&&(M.items=I[24]),!l&&C[0]&1024&&(l=!0,M.value=I[10],kt(()=>l=!1)),e.$set(M);const L={};!n&&C[0]&512&&(n=!0,L.value=I[9],kt(()=>n=!1)),i.$set(L),(!c||C[0]&524288&&o!==(o=!I[19]))&&(u.disabled=o),(!c||C[0]&524288&&g!==(g=!I[19]))&&(_.disabled=g),(!c||C[0]&32)&&pe(_,"grouped",I[5])},i(I){c||(U(e.$$.fragment,I),U(i.$$.fragment,I),c=!0)},o(I){H(e.$$.fragment,I),H(i.$$.fragment,I),c=!1},d(I){I&&(w(s),w(r),w(u),w(h),w(_)),qe(e,I),qe(i,I),f=!1,xe(d)}}}function gl(t){let e,l,s,i,n;function r(o){t[54](o)}let u={items:t[28]};t[0]!==void 0&&(u.value=t[0]),e=new ft({props:u}),Ze.push(()=>It(e,"value",r)),e.$on("change",t[34]);let a=t[0]&&pl(t);return{c(){Ve(e.$$.fragment),s=J(),a&&a.c(),i=we()},l(o){je(e.$$.fragment,o),s=q(o),a&&a.l(o),i=we()},m(o,h){Je(e,o,h),D(o,s,h),a&&a.m(o,h),D(o,i,h),n=!0},p(o,h){const _={};!l&&h[0]&1&&(l=!0,_.value=o[0],kt(()=>l=!1)),e.$set(_),o[0]?a?(a.p(o,h),h[0]&1&&U(a,1)):(a=pl(o),a.c(),U(a,1),a.m(i.parentNode,i)):a&&(Oe(),H(a,1,1,()=>{a=null}),De())},i(o){n||(U(e.$$.fragment,o),U(a),n=!0)},o(o){H(e.$$.fragment,o),H(a),n=!1},d(o){o&&(w(s),w(i)),qe(e,o),a&&a.d(o)}}}function pl(t){let e,l,s="Conqueror",i,n,r,u,a=t[1]&&Object.keys(se.TimelessJewelConquerors[t[0].value]).indexOf(t[1].value)>=0,o,h;function _(c){t[55](c)}let m={items:t[27]};t[1]!==void 0&&(m.value=t[1]),n=new ft({props:m}),Ze.push(()=>It(n,"value",_)),n.$on("change",t[29]);let g=a&&vl(t);return{c(){e=R("div"),l=R("h3"),l.textContent=s,i=J(),Ve(n.$$.fragment),u=J(),g&&g.c(),o=we(),this.h()},l(c){e=P(c,"DIV",{class:!0});var f=O(e);l=P(f,"H3",{class:!0,"data-svelte-h":!0}),ve(l)!=="svelte-1jyt00f"&&(l.textContent=s),i=q(f),je(n.$$.fragment,f),f.forEach(w),u=q(c),g&&g.l(c),o=we(),this.h()},h(){E(l,"class","mb-2"),E(e,"class","mt-4")},m(c,f){D(c,e,f),b(e,l),b(e,i),Je(n,e,null),D(c,u,f),g&&g.m(c,f),D(c,o,f),h=!0},p(c,f){const d={};f[0]&134217728&&(d.items=c[27]),!r&&f[0]&2&&(r=!0,d.value=c[1],kt(()=>r=!1)),n.$set(d),f[0]&3&&(a=c[1]&&Object.keys(se.TimelessJewelConquerors[c[0].value]).indexOf(c[1].value)>=0),a?g?(g.p(c,f),f[0]&3&&U(g,1)):(g=vl(c),g.c(),U(g,1),g.m(o.parentNode,o)):g&&(Oe(),H(g,1,1,()=>{g=null}),De())},i(c){h||(U(n.$$.fragment,c),U(g),h=!0)},o(c){H(n.$$.fragment,c),H(g),h=!1},d(c){c&&(w(e),w(u),w(o)),qe(n),g&&g.d(c)}}}function vl(t){let e,l,s="Enter Seed",i,n,r="Select Stats",u,a,o,h,_,m,g,c;const f=[Hs,Fs],d=[];function p(T,z){return T[12]==="seed"?0:T[12]==="stats"?1:-1}~(a=p(t))&&(o=d[a]=f[a](t));let S=!t[3]&&Tl();return{c(){e=R("div"),l=R("button"),l.textContent=s,i=J(),n=R("button"),n.textContent=r,u=J(),o&&o.c(),h=J(),S&&S.c(),_=we(),this.h()},l(T){e=P(T,"DIV",{class:!0});var z=O(e);l=P(z,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(l)!=="svelte-l4qe05"&&(l.textContent=s),i=q(z),n=P(z,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(n)!=="svelte-1d9agkx"&&(n.textContent=r),z.forEach(w),u=q(T),o&&o.l(T),h=q(T),S&&S.l(T),_=we(),this.h()},h(){E(l,"class","selection-button svelte-9h6fz6"),pe(l,"selected",t[12]==="seed"),E(n,"class","selection-button svelte-9h6fz6"),pe(n,"selected",t[12]==="stats"),E(e,"class","mt-4 w-full flex flex-row")},m(T,z){D(T,e,z),b(e,l),b(e,i),b(e,n),D(T,u,z),~a&&d[a].m(T,z),D(T,h,z),S&&S.m(T,z),D(T,_,z),m=!0,g||(c=[A(l,"click",t[56]),A(n,"click",t[57])],g=!0)},p(T,z){(!m||z[0]&4096)&&pe(l,"selected",T[12]==="seed"),(!m||z[0]&4096)&&pe(n,"selected",T[12]==="stats");let I=a;a=p(T),a===I?~a&&d[a].p(T,z):(o&&(Oe(),H(d[I],1,1,()=>{d[I]=null}),De()),~a?(o=d[a],o?o.p(T,z):(o=d[a]=f[a](T),o.c()),U(o,1),o.m(h.parentNode,h)):o=null),T[3]?S&&(S.d(1),S=null):S||(S=Tl(),S.c(),S.m(_.parentNode,_))},i(T){m||(U(o),m=!0)},o(T){H(o),m=!1},d(T){T&&(w(e),w(u),w(h),w(_)),~a&&d[a].d(T),S&&S.d(T),g=!1,xe(c)}}}function Fs(t){let e,l,s="Add Stat",i,n,r,u=Object.keys(t[4]).length>0,a,o,h={items:t[25]};n=new ft({props:h}),t[65](n),n.$on("change",t[32]);let _=u&&bl(t);return{c(){e=R("div"),l=R("h3"),l.textContent=s,i=J(),Ve(n.$$.fragment),r=J(),_&&_.c(),a=we(),this.h()},l(m){e=P(m,"DIV",{class:!0});var g=O(e);l=P(g,"H3",{class:!0,"data-svelte-h":!0}),ve(l)!=="svelte-8jbl9c"&&(l.textContent=s),i=q(g),je(n.$$.fragment,g),g.forEach(w),r=q(m),_&&_.l(m),a=we(),this.h()},h(){E(l,"class","mb-2"),E(e,"class","mt-4")},m(m,g){D(m,e,g),b(e,l),b(e,i),Je(n,e,null),D(m,r,g),_&&_.m(m,g),D(m,a,g),o=!0},p(m,g){const c={};g[0]&33554432&&(c.items=m[25]),n.$set(c),g[0]&16&&(u=Object.keys(m[4]).length>0),u?_?_.p(m,g):(_=bl(m),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null)},i(m){o||(U(n.$$.fragment,m),o=!0)},o(m){H(n.$$.fragment,m),o=!1},d(m){m&&(w(e),w(r),w(a)),t[65](null),qe(n),_&&_.d(m)}}}function Hs(t){let e,l,s="Seed",i,n,r,u,a,o,h,_,m,g,c=(t[2]<se.TimelessJewelSeedRanges[t[0].value].Min||t[2]>se.TimelessJewelSeedRanges[t[0].value].Max)&&Sl(t),f=t[2]>=se.TimelessJewelSeedRanges[t[0].value].Min&&t[2]<=se.TimelessJewelSeedRanges[t[0].value].Max&&kl(t);return{c(){e=R("div"),l=R("h3"),l.textContent=s,i=J(),n=R("input"),a=J(),c&&c.c(),o=J(),f&&f.c(),h=we(),this.h()},l(d){e=P(d,"DIV",{class:!0});var p=O(e);l=P(p,"H3",{class:!0,"data-svelte-h":!0}),ve(l)!=="svelte-12wsj4m"&&(l.textContent=s),i=q(p),n=P(p,"INPUT",{type:!0,min:!0,max:!0}),a=q(p),c&&c.l(p),p.forEach(w),o=q(d),f&&f.l(d),h=we(),this.h()},h(){E(l,"class","mb-2"),E(n,"type","number"),E(n,"min",r=se.TimelessJewelSeedRanges[t[0].value].Min),E(n,"max",u=se.TimelessJewelSeedRanges[t[0].value].Max),E(e,"class","mt-4")},m(d,p){D(d,e,p),b(e,l),b(e,i),b(e,n),et(n,t[2]),b(e,a),c&&c.m(e,null),D(d,o,p),f&&f.m(d,p),D(d,h,p),_=!0,m||(g=[A(n,"input",t[58]),A(n,"blur",t[29])],m=!0)},p(d,p){(!_||p[0]&1&&r!==(r=se.TimelessJewelSeedRanges[d[0].value].Min))&&E(n,"min",r),(!_||p[0]&1&&u!==(u=se.TimelessJewelSeedRanges[d[0].value].Max))&&E(n,"max",u),p[0]&4&&$e(n.value)!==d[2]&&et(n,d[2]),d[2]<se.TimelessJewelSeedRanges[d[0].value].Min||d[2]>se.TimelessJewelSeedRanges[d[0].value].Max?c?c.p(d,p):(c=Sl(d),c.c(),c.m(e,null)):c&&(c.d(1),c=null),d[2]>=se.TimelessJewelSeedRanges[d[0].value].Min&&d[2]<=se.TimelessJewelSeedRanges[d[0].value].Max?f?(f.p(d,p),p[0]&5&&U(f,1)):(f=kl(d),f.c(),U(f,1),f.m(h.parentNode,h)):f&&(Oe(),H(f,1,1,()=>{f=null}),De())},i(d){_||(U(f),_=!0)},o(d){H(f),_=!1},d(d){d&&(w(e),w(o),w(h)),c&&c.d(),f&&f.d(d),m=!1,xe(g)}}}function bl(t){let e,l,s,i,n,r="Min Total Weight:",u,a,o,h,_,m,g,c,f,d,p,S,T,z,I,C,M,L,V,j,F,Z,x,de,Te,oe=Me(Object.keys(t[4])),ee=[];for(let B=0;B<oe.length;B+=1)ee[B]=wl(fl(t,oe,B));function Ce(B,ie){return B[17]?Ys:Ks}let ze=Ce(t),Se=ze(t);return{c(){e=R("div");for(let B=0;B<ee.length;B+=1)ee[B].c();l=J(),s=R("div"),i=R("div"),n=R("div"),n.textContent=r,u=J(),a=R("input"),o=J(),h=R("div"),_=R("div"),m=R("button"),g=X("Select All"),f=J(),d=R("button"),p=X("Notables"),T=J(),z=R("button"),I=X("Passives"),M=J(),L=R("button"),V=X("Deselect"),F=J(),Z=R("div"),x=R("button"),Se.c(),this.h()},l(B){e=P(B,"DIV",{class:!0});var ie=O(e);for(let Le=0;Le<ee.length;Le+=1)ee[Le].l(ie);ie.forEach(w),l=q(B),s=P(B,"DIV",{class:!0});var re=O(s);i=P(re,"DIV",{class:!0});var N=O(i);n=P(N,"DIV",{class:!0,"data-svelte-h":!0}),ve(n)!=="svelte-ydmsqj"&&(n.textContent=r),u=q(N),a=P(N,"INPUT",{type:!0,min:!0}),N.forEach(w),re.forEach(w),o=q(B),h=P(B,"DIV",{class:!0});var v=O(h);_=P(v,"DIV",{class:!0});var $=O(_);m=P($,"BUTTON",{class:!0});var ue=O(m);g=G(ue,"Select All"),ue.forEach(w),f=q($),d=P($,"BUTTON",{class:!0});var ne=O(d);p=G(ne,"Notables"),ne.forEach(w),T=q($),z=P($,"BUTTON",{class:!0});var me=O(z);I=G(me,"Passives"),me.forEach(w),M=q($),L=P($,"BUTTON",{class:!0});var te=O(L);V=G(te,"Deselect"),te.forEach(w),$.forEach(w),F=q(v),Z=P(v,"DIV",{class:!0});var ge=O(Z);x=P(ge,"BUTTON",{class:!0});var _e=O(x);Se.l(_e),_e.forEach(w),ge.forEach(w),v.forEach(w),this.h()},h(){E(e,"class","mt-4 flex flex-col overflow-auto min-h-[100px]"),E(n,"class","mr-2 min-w-fit"),E(a,"type","number"),E(a,"min","0"),E(i,"class","flex flex-row items-center"),E(s,"class","flex flex-col mt-2"),E(m,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),m.disabled=c=t[17]||t[13].size==0,E(d,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),d.disabled=S=t[17]||t[13].size==0,E(z,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),z.disabled=C=t[17]||t[13].size==0,E(L,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow"),L.disabled=j=t[17]||t[13].size>=t[11].length,E(_,"class","flex flex-row"),E(x,"class","p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"),x.disabled=t[17],E(Z,"class","flex flex-row mt-2"),E(h,"class","flex flex-col mt-4")},m(B,ie){D(B,e,ie);for(let re=0;re<ee.length;re+=1)ee[re]&&ee[re].m(e,null);D(B,l,ie),D(B,s,ie),b(s,i),b(i,n),b(i,u),b(i,a),et(a,t[16]),D(B,o,ie),D(B,h,ie),b(h,_),b(_,m),b(m,g),b(_,f),b(_,d),b(d,p),b(_,T),b(_,z),b(z,I),b(_,M),b(_,L),b(L,V),b(h,F),b(h,Z),b(Z,x),Se.m(x,null),de||(Te=[A(a,"input",t[69]),A(m,"click",t[37]),A(d,"click",t[38]),A(z,"click",t[39]),A(L,"click",t[40]),A(x,"click",t[70])],de=!0)},p(B,ie){if(ie[0]&16|ie[1]&4){oe=Me(Object.keys(B[4]));let re;for(re=0;re<oe.length;re+=1){const N=fl(B,oe,re);ee[re]?ee[re].p(N,ie):(ee[re]=wl(N),ee[re].c(),ee[re].m(e,null))}for(;re<ee.length;re+=1)ee[re].d(1);ee.length=oe.length}ie[0]&65536&&$e(a.value)!==B[16]&&et(a,B[16]),ie[0]&139264&&c!==(c=B[17]||B[13].size==0)&&(m.disabled=c),ie[0]&139264&&S!==(S=B[17]||B[13].size==0)&&(d.disabled=S),ie[0]&139264&&C!==(C=B[17]||B[13].size==0)&&(z.disabled=C),ie[0]&141312&&j!==(j=B[17]||B[13].size>=B[11].length)&&(L.disabled=j),ze===(ze=Ce(B))&&Se?Se.p(B,ie):(Se.d(1),Se=ze(B),Se&&(Se.c(),Se.m(x,null))),ie[0]&131072&&(x.disabled=B[17])},d(B){B&&(w(e),w(l),w(s),w(o),w(h)),st(ee,B),Se.d(),de=!1,xe(Te)}}}function wl(t){let e,l,s,i="-",n,r,u=ct(t[4][t[84]].id)+"",a,o,h,_,m,g="Min:",c,f,d,p,S,T="Weight:",z,I,C,M,L;function V(){return t[66](t[84])}function j(){t[67].call(f,t[84])}function F(){t[68].call(I,t[84])}return{c(){e=R("div"),l=R("div"),s=R("button"),s.textContent=i,n=J(),r=R("span"),a=X(u),o=J(),h=R("div"),_=R("div"),m=R("div"),m.textContent=g,c=J(),f=R("input"),d=J(),p=R("div"),S=R("div"),S.textContent=T,z=J(),I=R("input"),C=J(),this.h()},l(Z){e=P(Z,"DIV",{class:!0});var x=O(e);l=P(x,"DIV",{});var de=O(l);s=P(de,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(s)!=="svelte-bzfob2"&&(s.textContent=i),n=q(de),r=P(de,"SPAN",{});var Te=O(r);a=G(Te,u),Te.forEach(w),de.forEach(w),o=q(x),h=P(x,"DIV",{class:!0});var oe=O(h);_=P(oe,"DIV",{class:!0});var ee=O(_);m=P(ee,"DIV",{class:!0,"data-svelte-h":!0}),ve(m)!=="svelte-1m3cjix"&&(m.textContent=g),c=q(ee),f=P(ee,"INPUT",{type:!0,min:!0}),ee.forEach(w),d=q(oe),p=P(oe,"DIV",{class:!0});var Ce=O(p);S=P(Ce,"DIV",{class:!0,"data-svelte-h":!0}),ve(S)!=="svelte-nrzr8j"&&(S.textContent=T),z=q(Ce),I=P(Ce,"INPUT",{type:!0,min:!0}),Ce.forEach(w),oe.forEach(w),C=q(x),x.forEach(w),this.h()},h(){E(s,"class","p-2 px-4 bg-red-500/40 rounded mr-2"),E(m,"class","mr-2"),E(f,"type","number"),E(f,"min","0"),E(_,"class","mr-4 flex flex-row items-center"),E(S,"class","mr-2"),E(I,"type","number"),E(I,"min","0"),E(p,"class","flex flex-row items-center"),E(h,"class","mt-2 flex flex-row"),E(e,"class","mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4")},m(Z,x){D(Z,e,x),b(e,l),b(l,s),b(l,n),b(l,r),b(r,a),b(e,o),b(e,h),b(h,_),b(_,m),b(_,c),b(_,f),et(f,t[4][t[84]].min),b(h,d),b(h,p),b(p,S),b(p,z),b(p,I),et(I,t[4][t[84]].weight),b(e,C),M||(L=[A(s,"click",V),A(f,"input",j),A(I,"input",F)],M=!0)},p(Z,x){t=Z,x[0]&16&&u!==(u=ct(t[4][t[84]].id)+"")&&Re(a,u),x[0]&16&&$e(f.value)!==t[4][t[84]].min&&et(f,t[4][t[84]].min),x[0]&16&&$e(I.value)!==t[4][t[84]].weight&&et(I,t[4][t[84]].weight)},d(Z){Z&&w(e),M=!1,xe(L)}}}function Ks(t){let e;return{c(){e=X("Search")},l(l){e=G(l,"Search")},m(l,s){D(l,e,s)},p:Qe,d(l){l&&w(e)}}}function Ys(t){let e,l,s=se.TimelessJewelSeedRanges[t[0].value].Max+"",i;return{c(){e=X(t[18]),l=X(" / "),i=X(s)},l(n){e=G(n,t[18]),l=G(n," / "),i=G(n,s)},m(n,r){D(n,e,r),D(n,l,r),D(n,i,r)},p(n,r){r[0]&262144&&Re(e,n[18]),r[0]&1&&s!==(s=se.TimelessJewelSeedRanges[n[0].value].Max+"")&&Re(i,s)},d(n){n&&(w(e),w(l),w(i))}}}function Sl(t){let e,l,s=se.TimelessJewelSeedRanges[t[0].value].Min+"",i,n,r=se.TimelessJewelSeedRanges[t[0].value].Max+"",u;return{c(){e=R("div"),l=X("Seed must be between "),i=X(s),n=X(`
                      and `),u=X(r),this.h()},l(a){e=P(a,"DIV",{class:!0});var o=O(e);l=G(o,"Seed must be between "),i=G(o,s),n=G(o,`
                      and `),u=G(o,r),o.forEach(w),this.h()},h(){E(e,"class","mt-2")},m(a,o){D(a,e,o),b(e,l),b(e,i),b(e,n),b(e,u)},p(a,o){o[0]&1&&s!==(s=se.TimelessJewelSeedRanges[a[0].value].Min+"")&&Re(i,s),o[0]&1&&r!==(r=se.TimelessJewelSeedRanges[a[0].value].Max+"")&&Re(u,r)},d(a){a&&w(e)}}}function kl(t){let e,l,s,i="Sort Order",n,r,u,a,o,h,_="Colors",m,g,c,f="Split",d,p,S,T,z;function I(j){t[59](j)}let C={items:t[43]};t[6]!==void 0&&(C.value=t[6]),r=new ft({props:C}),Ze.push(()=>It(r,"value",I));function M(j,F){return j[8]?Xs:Gs}let L=M(t),V=L(t);return{c(){e=R("div"),l=R("div"),s=R("h3"),s.textContent=i,n=J(),Ve(r.$$.fragment),a=J(),o=R("div"),h=R("button"),h.textContent=_,m=J(),g=R("div"),c=R("button"),c.textContent=f,d=J(),V.c(),p=we(),this.h()},l(j){e=P(j,"DIV",{class:!0});var F=O(e);l=P(F,"DIV",{class:!0});var Z=O(l);s=P(Z,"H3",{class:!0,"data-svelte-h":!0}),ve(s)!=="svelte-6mxxgp"&&(s.textContent=i),n=q(Z),je(r.$$.fragment,Z),Z.forEach(w),a=q(F),o=P(F,"DIV",{class:!0});var x=O(o);h=P(x,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(h)!=="svelte-79cf57"&&(h.textContent=_),x.forEach(w),m=q(F),g=P(F,"DIV",{class:!0});var de=O(g);c=P(de,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(c)!=="svelte-1jp80zt"&&(c.textContent=f),de.forEach(w),F.forEach(w),d=q(j),V.l(j),p=we(),this.h()},h(){E(s,"class","mb-2"),E(l,"class","flex-grow"),E(h,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-9h6fz6"),pe(h,"selected",t[7]),E(o,"class","ml-2"),E(c,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-9h6fz6"),pe(c,"selected",t[8]),E(g,"class","ml-2"),E(e,"class","flex flex-row mt-4 items-end")},m(j,F){D(j,e,F),b(e,l),b(l,s),b(l,n),Je(r,l,null),b(e,a),b(e,o),b(o,h),b(e,m),b(e,g),b(g,c),D(j,d,F),V.m(j,F),D(j,p,F),S=!0,T||(z=[A(h,"click",t[60]),A(c,"click",t[61])],T=!0)},p(j,F){const Z={};!u&&F[0]&64&&(u=!0,Z.value=j[6],kt(()=>u=!1)),r.$set(Z),(!S||F[0]&128)&&pe(h,"selected",j[7]),(!S||F[0]&256)&&pe(c,"selected",j[8]),L===(L=M(j))&&V?V.p(j,F):(V.d(1),V=L(j),V&&(V.c(),V.m(p.parentNode,p)))},i(j){S||(U(r.$$.fragment,j),S=!0)},o(j){H(r.$$.fragment,j),S=!1},d(j){j&&(w(e),w(d),w(p)),qe(r),V.d(j),T=!1,xe(z)}}}function Xs(t){let e,l,s="Notables",i,n,r,u,a="Smalls",o,h,_=Me(t[42](t[41](t[26],t[7],"notables"),t[6].value)),m=[];for(let f=0;f<_.length;f+=1)m[f]=Il(hl(t,_,f));let g=Me(t[42](t[41](t[26],t[7],"passives"),t[6].value)),c=[];for(let f=0;f<g.length;f+=1)c[f]=yl(cl(t,g,f));return{c(){e=R("div"),l=R("h3"),l.textContent=s,i=J(),n=R("ul");for(let f=0;f<m.length;f+=1)m[f].c();r=J(),u=R("h3"),u.textContent=a,o=J(),h=R("ul");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=P(f,"DIV",{class:!0});var d=O(e);l=P(d,"H3",{"data-svelte-h":!0}),ve(l)!=="svelte-uhg2bi"&&(l.textContent=s),i=q(d),n=P(d,"UL",{class:!0});var p=O(n);for(let T=0;T<m.length;T+=1)m[T].l(p);p.forEach(w),r=q(d),u=P(d,"H3",{class:!0,"data-svelte-h":!0}),ve(u)!=="svelte-mdvksr"&&(u.textContent=a),o=q(d),h=P(d,"UL",{class:!0});var S=O(h);for(let T=0;T<c.length;T+=1)c[T].l(S);S.forEach(w),d.forEach(w),this.h()},h(){E(n,"class","mt-1 svelte-9h6fz6"),pe(n,"rainbow",t[7]),E(u,"class","mt-2"),E(h,"class","mt-1 svelte-9h6fz6"),pe(h,"rainbow",t[7]),E(e,"class","overflow-auto mt-4")},m(f,d){D(f,e,d),b(e,l),b(e,i),b(e,n);for(let p=0;p<m.length;p+=1)m[p]&&m[p].m(n,null);b(e,r),b(e,u),b(e,o),b(e,h);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(h,null)},p(f,d){if(d[0]&67109060|d[1]&3104){_=Me(f[42](f[41](f[26],f[7],"notables"),f[6].value));let p;for(p=0;p<_.length;p+=1){const S=hl(f,_,p);m[p]?m[p].p(S,d):(m[p]=Il(S),m[p].c(),m[p].m(n,null))}for(;p<m.length;p+=1)m[p].d(1);m.length=_.length}if(d[0]&128&&pe(n,"rainbow",f[7]),d[0]&67109060|d[1]&3104){g=Me(f[42](f[41](f[26],f[7],"passives"),f[6].value));let p;for(p=0;p<g.length;p+=1){const S=cl(f,g,p);c[p]?c[p].p(S,d):(c[p]=yl(S),c[p].c(),c[p].m(h,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=g.length}d[0]&128&&pe(h,"rainbow",f[7])},d(f){f&&w(e),st(m,f),st(c,f)}}}function Gs(t){let e,l=Me(t[42](t[41](t[26],t[7],"all"),t[6].value)),s=[];for(let i=0;i<l.length;i+=1)s[i]=El(dl(t,l,i));return{c(){e=R("ul");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=P(i,"UL",{class:!0});var n=O(e);for(let r=0;r<s.length;r+=1)s[r].l(n);n.forEach(w),this.h()},h(){E(e,"class","mt-4 overflow-auto svelte-9h6fz6"),pe(e,"rainbow",t[7])},m(i,n){D(i,e,n);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(i,n){if(n[0]&67109060|n[1]&3104){l=Me(i[42](i[41](i[26],i[7],"all"),i[6].value));let r;for(r=0;r<l.length;r+=1){const u=dl(i,l,r);s[r]?s[r].p(u,n):(s[r]=El(u),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=l.length}n[0]&128&&pe(e,"rainbow",i[7])},d(i){i&&w(e),st(s,i)}}}function Il(t){let e,l,s,i=t[77].passives.length+"",n,r,u,a,o,h=t[77].stat+"",_,m,g;function c(){return t[63](t[77])}return{c(){e=R("li"),l=R("span"),s=X("("),n=X(i),r=X(")"),u=J(),a=R("span"),o=new Vt(!1),_=J(),this.h()},l(f){e=P(f,"LI",{class:!0});var d=O(e);l=P(d,"SPAN",{class:!0});var p=O(l);s=G(p,"("),n=G(p,i),r=G(p,")"),p.forEach(w),u=q(d),a=P(d,"SPAN",{class:!0});var S=O(a);o=jt(S,!1),S.forEach(w),_=q(d),d.forEach(w),this.h()},h(){E(l,"class","font-bold"),pe(l,"text-white",(tt[t[77].id]||0)<3),o.a=null,E(a,"class","text-white"),E(e,"class","cursor-pointer")},m(f,d){D(f,e,d),b(e,l),b(l,s),b(l,n),b(l,r),b(e,u),b(e,a),o.m(h,a),b(e,_),m||(g=A(e,"click",c),m=!0)},p(f,d){t=f,d[0]&67109056&&i!==(i=t[77].passives.length+"")&&Re(n,i),d[0]&67109056|d[1]&3072&&pe(l,"text-white",(tt[t[77].id]||0)<3),d[0]&67109056&&h!==(h=t[77].stat+"")&&o.p(h)},d(f){f&&w(e),m=!1,g()}}}function yl(t){let e,l,s,i=t[77].passives.length+"",n,r,u,a,o,h=t[77].stat+"",_,m,g;function c(){return t[64](t[77])}return{c(){e=R("li"),l=R("span"),s=X("("),n=X(i),r=X(")"),u=J(),a=R("span"),o=new Vt(!1),_=J(),this.h()},l(f){e=P(f,"LI",{class:!0});var d=O(e);l=P(d,"SPAN",{class:!0});var p=O(l);s=G(p,"("),n=G(p,i),r=G(p,")"),p.forEach(w),u=q(d),a=P(d,"SPAN",{class:!0});var S=O(a);o=jt(S,!1),S.forEach(w),_=q(d),d.forEach(w),this.h()},h(){E(l,"class","font-bold"),pe(l,"text-white",(tt[t[77].id]||0)<3),o.a=null,E(a,"class","text-white"),E(e,"class","cursor-pointer")},m(f,d){D(f,e,d),b(e,l),b(l,s),b(l,n),b(l,r),b(e,u),b(e,a),o.m(h,a),b(e,_),m||(g=A(e,"click",c),m=!0)},p(f,d){t=f,d[0]&67109056&&i!==(i=t[77].passives.length+"")&&Re(n,i),d[0]&67109056|d[1]&3072&&pe(l,"text-white",(tt[t[77].id]||0)<3),d[0]&67109056&&h!==(h=t[77].stat+"")&&o.p(h)},d(f){f&&w(e),m=!1,g()}}}function El(t){let e,l,s,i=t[77].passives.length+"",n,r,u,a,o,h=t[77].stat+"",_,m,g;function c(){return t[62](t[77])}return{c(){e=R("li"),l=R("span"),s=X("("),n=X(i),r=X(")"),u=J(),a=R("span"),o=new Vt(!1),_=J(),this.h()},l(f){e=P(f,"LI",{class:!0});var d=O(e);l=P(d,"SPAN",{class:!0});var p=O(l);s=G(p,"("),n=G(p,i),r=G(p,")"),p.forEach(w),u=q(d),a=P(d,"SPAN",{class:!0});var S=O(a);o=jt(S,!1),S.forEach(w),_=q(d),d.forEach(w),this.h()},h(){E(l,"class","font-bold"),pe(l,"text-white",(tt[t[77].id]||0)<3),o.a=null,E(a,"class","text-white"),E(e,"class","cursor-pointer")},m(f,d){D(f,e,d),b(e,l),b(l,s),b(l,n),b(l,r),b(e,u),b(e,a),o.m(h,a),b(e,_),m||(g=A(e,"click",c),m=!0)},p(f,d){t=f,d[0]&67109056&&i!==(i=t[77].passives.length+"")&&Re(n,i),d[0]&67109056|d[1]&3072&&pe(l,"text-white",(tt[t[77].id]||0)<3),d[0]&67109056&&h!==(h=t[77].stat+"")&&o.p(h)},d(f){f&&w(e),m=!1,g()}}}function Tl(t){let e,l="Click on a jewel socket";return{c(){e=R("h2"),e.textContent=l,this.h()},l(s){e=P(s,"H2",{class:!0,"data-svelte-h":!0}),ve(e)!=="svelte-4ztcob"&&(e.textContent=l),this.h()},h(){E(e,"class","mt-4")},m(s,i){D(s,e,i)},d(s){s&&w(e)}}}function Cl(t){let e,l;return e=new Vs({props:{searchResults:t[19],groupResults:t[5],highlight:t[36],jewel:t[20],conqueror:t[21]}}),{c(){Ve(e.$$.fragment)},l(s){je(e.$$.fragment,s)},m(s,i){Je(e,s,i),l=!0},p(s,i){const n={};i[0]&524288&&(n.searchResults=s[19]),i[0]&32&&(n.groupResults=s[5]),i[0]&1048576&&(n.jewel=s[20]),i[0]&2097152&&(n.conqueror=s[21]),e.$set(n)},i(s){l||(U(e.$$.fragment,s),l=!0)},o(s){H(e.$$.fragment,s),l=!1},d(s){qe(e,s)}}}function Ws(t){let e,l,s,i,n='<a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener">Source (Github)</a>',r;const u=[qs,Js],a=[];function o(h,_){return h[23]?1:0}return e=o(t),l=a[e]=u[e](t),{c(){l.c(),s=J(),i=R("div"),i.innerHTML=n,this.h()},l(h){l.l(h),s=q(h),i=P(h,"DIV",{class:!0,"data-svelte-h":!0}),ve(i)!=="svelte-1xcazan"&&(i.innerHTML=n),this.h()},h(){E(i,"class","text-orange-500 absolute bottom-0 right-0 m-2")},m(h,_){a[e].m(h,_),D(h,s,_),D(h,i,_),r=!0},p(h,_){let m=e;e=o(h),e===m?a[e].p(h,_):(Oe(),H(a[m],1,1,()=>{a[m]=null}),De(),l=a[e],l?l.p(h,_):(l=a[e]=u[e](h),l.c()),U(l,1),l.m(s.parentNode,s))},i(h){r||(U(l),r=!0)},o(h){H(l),r=!1},d(h){h&&(w(s),w(i)),a[e].d(h)}}}function Qs(t){var n,r;let e,l,s,i;return e=new ws({props:{clickNode:t[31],circledNode:t[3],selectedJewel:(n=t[0])==null?void 0:n.value,selectedConqueror:(r=t[1])==null?void 0:r.value,highlighted:t[22],seed:t[2],highlightJewels:!t[3],disabled:[...t[13]],$$slots:{default:[Ws]},$$scope:{ctx:t}}}),{c(){Ve(e.$$.fragment)},l(u){je(e.$$.fragment,u)},m(u,a){Je(e,u,a),l=!0,s||(i=A(js,"paste",t[44]),s=!0)},p(u,a){var h,_;const o={};a[0]&8&&(o.circledNode=u[3]),a[0]&1&&(o.selectedJewel=(h=u[0])==null?void 0:h.value),a[0]&2&&(o.selectedConqueror=(_=u[1])==null?void 0:_.value),a[0]&4194304&&(o.highlighted=u[22]),a[0]&4&&(o.seed=u[2]),a[0]&8&&(o.highlightJewels=!u[3]),a[0]&8192&&(o.disabled=[...u[13]]),a[0]&264241151|a[2]&33554432&&(o.$$scope={dirty:a,ctx:u}),e.$set(o)},i(u){l||(U(e.$$.fragment,u),l=!0)},o(u){H(e.$$.fragment,u),l=!1},d(u){qe(e,u),s=!1,i()}}}function Zs(t,e,l){let s,i,n,r,u,a;Rl(t,es,y=>l(72,a=y));const o=a.url.searchParams,h=Object.keys(se.TimelessJewels).map(y=>({value:parseInt(y),label:se.TimelessJewels[y]}));let _=o.has("jewel")?h.find(y=>y.value==o.get("jewel")):void 0,m=o.has("conqueror")?{value:o.get("conqueror"),label:o.get("conqueror")}:void 0,g=o.has("seed")?parseInt(o.get("seed")):0,c=o.has("location")?parseInt(o.get("location")):void 0,f={};o.has("stat")&&o.getAll("stat").forEach(y=>{const Q=parseInt(y);l(4,f[Q]={weight:1,min:0,id:Q},f)});let d=o.has("mode")?o.get("mode"):"",p=new Set;const S=()=>{const y=new URL(window.location.origin+window.location.pathname);_&&y.searchParams.append("jewel",_.value.toString()),m&&y.searchParams.append("conqueror",m.value),g&&y.searchParams.append("seed",g.toString()),c&&y.searchParams.append("location",c.toString()),d&&y.searchParams.append("mode",d),p.forEach(Q=>y.searchParams.append("disabled",Q.toString())),Object.keys(f).forEach(Q=>{y.searchParams.append("stat",Q.toString())}),Yl(y.toString())},T=y=>{l(12,d=y),S()};o.has("disabled")&&o.getAll("disabled").forEach(y=>{p.add(parseInt(y))});const z=y=>{y.isJewelSocket?(l(3,c=y.skill),S()):y.isMastery||(p.has(y.skill)?p.delete(y.skill):p.add(y.skill),l(13,p),S())},I=JSON.parse(se.PossibleStats);let C;const M=y=>{l(4,f[y.detail.value]={weight:1,min:0,id:y.detail.value},f),l(4,f),C.handleClear(),S()},L=y=>{delete f[y],l(4,f),S()},V=()=>{l(4,f={}),S()};let j=!1,F=0,Z=!1,x=0,de,Te=1,oe="";const ee=()=>{if(!c)return;l(20,Te=_.value),l(21,oe=m.value),l(17,Z=!0),l(19,de=void 0);const y={jewel:_.value,conqueror:m.value,nodes:i.filter(Q=>!p.has(Q.skill)).map(Q=>se.TreeToPassive[Q.skill]).filter(Q=>!!Q).map(Q=>Q.Index),stats:Object.keys(f).map(Q=>f[Q]),minTotalWeight:F};xl.search(y,$l(Q=>l(18,x=Q))).then(Q=>{l(19,de=Q),l(17,Z=!1),l(15,j=!0)})};let Ce=[];const ze=(y,Q)=>{l(2,g=y),l(22,Ce=Q),S()},Se=()=>{p.clear(),l(13,p)},B=()=>{i.forEach(y=>{y.isNotable&&p.delete(y.skill)}),l(13,p)},ie=()=>{i.forEach(y=>{y.isNotable||p.delete(y.skill)}),l(13,p)},re=()=>{i.filter(y=>!y.isJewelSocket&&!y.isMastery).forEach(y=>p.add(y.skill)),l(13,p)};let N=localStorage.getItem("groupResults")===null?!0:localStorage.getItem("groupResults")==="true";const v={physical:"#c79d93",cast:"#b3f8fe",fire:"#ff9a77",cold:"#93d8ff",lightning:"#f8cb76",attack:"#da814d",life:"#c96e6e",chaos:"#d8a7d3",unique:"#af6025",critical:"#b2a7d6"},$=y=>(Object.keys(v).forEach(Q=>{const ce=v[Q];y=y.replace(new RegExp(`(${Q}(?:$|\\s))|((?:^|\\s)${Q})`,"gi"),`<span style='color: ${ce}; font-weight: bold'>$1$2</span>`)}),y),ue=(y,Q,ce)=>{const Ie={};return y.forEach(be=>{Ye.nodes[be.node].isKeystone||ce!=="all"&&(ce==="notables"&&!Ye.nodes[be.node].isNotable||ce==="passives"&&Ye.nodes[be.node].isNotable)||(be.result.AlternatePassiveSkill&&be.result.AlternatePassiveSkill.StatsKeys&&be.result.AlternatePassiveSkill.StatsKeys.forEach(Ae=>{Ie[Ae]=[...Ie[Ae]||[],be.node]}),be.result.AlternatePassiveAdditionInformations&&be.result.AlternatePassiveAdditionInformations.forEach(Ae=>{Ae.AlternatePassiveAddition.StatsKeys&&Ae.AlternatePassiveAddition.StatsKeys.forEach(Ge=>{Ie[Ge]=[...Ie[Ge]||[],be.node]})}))}),Object.keys(Ie).map(be=>{const Ae=ct(parseInt(be));return{stat:Q?$(Ae):Ae,rawStat:Ae,id:be,passives:Ie[be]}})},ne=(y,Q)=>{switch(Q){case"alphabet":return y.sort((ce,Ie)=>ce.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase().localeCompare(Ie.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase()));case"count":return y.sort((ce,Ie)=>Ie.passives.length-ce.passives.length);case"rarity":return y.sort((ce,Ie)=>I[_.value][ce.id]-I[_.value][Ie.id]);case"value":return y.sort((ce,Ie)=>{const be=tt[ce.id]||0,Ae=tt[Ie.id]||0;return be!=Ae?Ae-be:I[_.value][ce.id]-I[_.value][Ie.id]})}return y},me=[{label:"Count",value:"count"},{label:"Alphabetical",value:"alphabet"},{label:"Rarity",value:"rarity"},{label:"Value",value:"value"}];let te=me.find(y=>y.value===(localStorage.getItem("sortOrder")||"count")),ge=localStorage.getItem("colored")===null?!0:localStorage.getItem("colored")==="true",_e=localStorage.getItem("split")===null?!0:localStorage.getItem("split")==="true";const Le=y=>{if(y.type!=="paste")return;const ce=(y.clipboardData||window.clipboardData).getData("text").split(`
`);if(ce.length<14)return;const Ie=h.find(Ge=>Ge.label===ce[2]);if(!Ie)return;let be,Ae;for(let Ge=10;Ge<ce.length;Ge++)if(Ae=Object.keys(se.TimelessJewelConquerors[Ie.value]).find(yt=>ce[Ge].indexOf(yt)>=0),Ae){const yt=/(\d+)/.exec(ce[Ge]);if(yt.length===0)continue;be=parseInt(yt[1]);break}!Ae||!be||(l(15,j=!1),l(12,d="seed"),l(2,g=be),l(0,_=Ie),l(1,m={label:Ae,value:Ae}),S())};let he=!1;const Y=[{value:"PC",label:"PC"},{value:"Xbox",label:"Xbox"},{value:"Playstation",label:"Playstation"}];let W=Y.find(y=>y.value===localStorage.getItem("platform"))||Y[0],ae=[],le;const Fe=async()=>{const Q=await(await fetch("https://api.poe.watch/leagues")).json();l(24,ae=Q.map(ce=>({value:ce.name,label:ce.name}))),l(10,le=ae.find(ce=>ce.value===localStorage.getItem("league"))||ae[0])};Ot(()=>{Fe()});const Ue=()=>l(23,he=!0);function Xe(y){le=y,l(10,le)}function fe(y){W=y,l(9,W)}const ke=()=>Pl(Te,oe,de.raw,W.value,le.value),He=()=>l(5,N=!N),Be=()=>l(15,j=!j);function Pe(y){_=y,l(0,_)}function Ne(y){m=y,l(1,m)}const at=()=>T("seed"),ht=()=>T("stats");function dt(){g=$e(this.value),l(2,g)}function ot(y){te=y,l(6,te)}const ut=()=>l(7,ge=!ge),At=()=>l(8,_e=!_e),k=y=>ze(g,y.passives),mt=y=>ze(g,y.passives),_t=y=>ze(g,y.passives);function gt(y){Ze[y?"unshift":"push"](()=>{C=y,l(14,C)})}const Rt=y=>L(f[y].id);function Pt(y){f[y].min=$e(this.value),l(4,f)}function zt(y){f[y].weight=$e(this.value),l(4,f)}function Mt(){F=$e(this.value),l(16,F)}const jl=()=>ee(),Jl=()=>l(23,he=!1);return t.$$.update=()=>{t.$$.dirty[0]&1&&l(27,s=_?Object.keys(se.TimelessJewelConquerors[_.value]).map(y=>({value:y,label:y})):[]),t.$$.dirty[0]&8&&l(11,i=c?Zl(Ye.nodes[c]).filter(y=>!y.isJewelSocket&&!y.isMastery):[]),t.$$.dirty[0]&2055&&l(26,n=!g||!_||!m||Object.keys(se.TimelessJewelConquerors[_.value]).indexOf(m.value)<0?[]:i.filter(y=>!!se.TreeToPassive[y.skill]).map(y=>({node:y.skill,result:zl.Calculate(se.TreeToPassive[y.skill].Index,g,_.value,m.value)}))),t.$$.dirty[0]&1&&l(47,r=_?Object.keys(I[_.value]):[]),t.$$.dirty[0]&16|t.$$.dirty[1]&65536&&l(25,u=r.map(y=>{const Q=parseInt(y);return{label:ct(Q),value:Q}}).filter(y=>!(y.value in f))),t.$$.dirty[0]&32&&localStorage.setItem("groupResults",N?"true":"false"),t.$$.dirty[0]&64&&localStorage.setItem("sortOrder",te.value),t.$$.dirty[0]&128&&localStorage.setItem("colored",ge?"true":"false"),t.$$.dirty[0]&256&&localStorage.setItem("split",_e?"true":"false"),t.$$.dirty[0]&512&&localStorage.setItem("platform",W.value),t.$$.dirty[0]&1024&&le&&localStorage.setItem("league",le.value),t.$$.dirty[0]&1024&&console.log(le)},[_,m,g,c,f,N,te,ge,_e,W,le,i,d,p,C,j,F,Z,x,de,Te,oe,Ce,he,ae,u,n,s,h,S,T,z,M,L,V,ee,ze,Se,B,ie,re,ue,ne,me,Le,Y,v,r,Ue,Xe,fe,ke,He,Be,Pe,Ne,at,ht,dt,ot,ut,At,k,mt,_t,gt,Rt,Pt,zt,Mt,jl,Jl]}class an extends it{constructor(e){super(),rt(this,e,Zs,Qs,nt,{colorKeys:46},null,[-1,-1,-1])}get colorKeys(){return this.$$.ctx[46]}}export{an as component};
