var Ml=Object.defineProperty;var Pl=(t,e,l)=>e in t?Ml(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Ee=(t,e,l)=>(Pl(t,typeof e!="symbol"?e+"":e,l),l);import{S as lt,i as st,s as it,C as mt,k as E,a as B,l as T,m as R,h as v,c as F,n as k,p as Fe,b as J,N as M,R as bt,T as Te,D as _t,E as gt,F as pt,g as Y,d as Q,P as We,U as zl,o as vl,V as Tt,W as Cl,X as K,w as et,H as Ge,Y as bl,e as ke,v as Oe,f as De,I as wl,Z as Sl,y as Ve,z as Je,A as je,G as p,B as qe,q as j,r as q,u as Re,Q as tt,_ as Ll,$ as Nl,O as Qe,a0 as be,J as Rt,L as At,M as Ze}from"../chunks/index.a7675b96.js";import{r as Ol,h as Dl}from"../chunks/singletons.a7b6f5ac.js";import{b as Vl,a as He,d as yt,t as Mt,c as $e,o as Pt,e as wt,f as zt,i as Ct,g as Lt,h as Jl,j as Nt,k as kl,m as at,n as jl,s as ql,p as Ul}from"../chunks/worker.7d30a503.js";import{c as Il,d as te}from"../chunks/index.098253ec.js";import{g as Bl,S as kt}from"../chunks/navigation.4746bb0b.js";import{p as Fl}from"../chunks/stores.faf1b223.js";class Hl{constructor(){Ee(this,"currentLayerId");Ee(this,"setups");Ee(this,"renderers");Ee(this,"dispatchers");Ee(this,"needsSetup");Ee(this,"needsRedraw");Ee(this,"context");Ee(this,"width");Ee(this,"height");Ee(this,"autoclear");Ee(this,"pixelRatio");Ee(this,"renderLoop");Ee(this,"layerObserver");Ee(this,"layerRef");Ee(this,"layerSequence");Ee(this,"renderingLayerId");Ee(this,"activeLayerId");Ee(this,"activeLayerDispatcher");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.getRenderingLayerId=this.getRenderingLayerId.bind(this),this.currentLayerId=1,this.setups=new Map,this.renderers=new Map,this.dispatchers=new Map,this.needsSetup=!1,this.needsRedraw=!0,this.renderingLayerId=0,this.activeLayerId=0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}register({setup:e,render:l,dispatcher:i}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,l),this.dispatchers.set(this.currentLayerId,i),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.dispatchers.delete(e),this.needsRedraw=!0}setup(e,l){this.context=e,this.layerRef=l,this.observeLayerSequence(),this.startRenderLoop()}observeLayerSequence(){this.layerObserver=new MutationObserver(this.getLayerSequence.bind(this)),this.layerObserver.observe(this.layerRef,{childList:!0}),this.getLayerSequence()}getLayerSequence(){const e=[...this.layerRef.children];this.layerSequence=e.map(l=>+(l.dataset.layerId??-1)),this.redraw()}startRenderLoop(){this.render(),this.renderLoop=requestAnimationFrame(()=>this.startRenderLoop())}render(){var s;const e=this.context,l=this.width,i=this.height,n=this.pixelRatio;if(this.needsSetup){for(const[r,c]of this.setups)c({context:e,width:l,height:i}),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e.setTransform(n,0,0,n,0,0),this.autoclear&&e.clearRect(0,0,l,i);for(const r of this.layerSequence)this.renderingLayerId=r,(s=this.renderers.get(r))==null||s({context:e,width:l,height:i});this.needsRedraw=!1}}setActiveLayer(e,l){this.activeLayerId!==e&&(l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerleave",l)),this.dispatchLayerEvent(new MouseEvent("mouseleave",l))),this.activeLayerId=e,this.activeLayerDispatcher=this.dispatchers.get(e),l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerenter",l)),this.dispatchLayerEvent(new MouseEvent("mouseenter",l))))}dispatchLayerEvent(e){if(this.activeLayerDispatcher){if(window.TouchEvent&&e instanceof TouchEvent){const{left:l,top:i}=e.target.getBoundingClientRect(),{clientX:n,clientY:s}=e.changedTouches[0],r={x:n-l,y:s-i,originalEvent:e};this.activeLayerDispatcher(e.type,r)}else if(e instanceof MouseEvent){const l={x:e.offsetX,y:e.offsetY,originalEvent:e};this.activeLayerDispatcher(e.type,l)}}}getRenderingLayerId(){return this.renderingLayerId}destroy(){typeof window>"u"||(this.layerObserver.disconnect(),cancelAnimationFrame(this.renderLoop))}}const Yl=t=>{const e=t*2,l=e>>16&255,i=e>>8&255,n=e&255;return`rgb(${l}, ${i}, ${n})`},Kl=(t,e,l)=>{const i=(t<<16|e<<8|l)/2;return i%1?0:i},Xl=["drawImage"],Gl=["filter","shadowBlur","globalCompositeOperation","globalAlpha"],Wl=["drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],Ql=t=>{let e;const l=document.createElement("canvas"),i=l.getContext("2d",{willReadFrequently:!0}),n=()=>{l.width=t.canvas.width,l.height=t.canvas.height};return new MutationObserver(n).observe(t.canvas,{attributeFilter:["width","height"]}),n(),new Proxy(t,{get(r,c){if(c==="_getLayerIdAtPixel")return(a,h)=>{const[_,d,g]=i.getImageData(a,h,1,1).data;return Kl(_,d,g)};const o=r[c];return typeof o!="function"?o:function(...a){if(Wl.includes(c)){const h=Yl(e());i.fillStyle=h,i.strokeStyle=h}if(c==="drawImage"){const h=a.slice(1);i.fillRect(...h)}return Xl.includes(c)||Reflect.apply(o,i,a),Reflect.apply(o,r,a)}},set(r,c,o){return c==="_renderingLayerId"?(e=o,!0):(r[c]=o,Gl.includes(c)||(i[c]=o),!0)}})};function Zl(t){let e,l,i,n=`${t[0]}px`,s=`${t[1]}px`,r,c,o,a,h;const _=t[18].default,d=mt(_,t,t[17],null);return{c(){e=E("canvas"),r=B(),c=E("div"),d&&d.c(),this.h()},l(g){e=T(g,"CANVAS",{width:!0,height:!0,class:!0,style:!0}),R(e).forEach(v),r=F(g),c=T(g,"DIV",{});var u=R(c);d&&d.l(u),u.forEach(v),this.h()},h(){k(e,"width",l=t[0]*t[5]),k(e,"height",i=t[1]*t[5]),k(e,"class",t[4]),k(e,"style",t[2]),Fe(e,"display","block"),Fe(e,"width",n),Fe(e,"height",s),Fe(c,"display","none")},m(g,u){J(g,e,u),t[64](e),J(g,r,u),J(g,c,u),d&&d.m(c,null),t[65](c),o=!0,a||(h=[M(e,"touchstart",bt(function(){Te(t[3]?t[9]:null)&&(t[3]?t[9]:null).apply(this,arguments)})),M(e,"mousemove",function(){Te(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),M(e,"pointermove",function(){Te(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),M(e,"click",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"contextmenu",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"dblclick",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"mousedown",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"mouseenter",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"mouseleave",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"mouseup",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"wheel",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"touchcancel",bt(function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),M(e,"touchend",bt(function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),M(e,"touchmove",bt(function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),M(e,"pointerenter",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"pointerleave",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"pointerdown",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"pointerup",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"pointercancel",function(){Te(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),M(e,"focus",t[19]),M(e,"blur",t[20]),M(e,"fullscreenchange",t[21]),M(e,"fullscreenerror",t[22]),M(e,"scroll",t[23]),M(e,"cut",t[24]),M(e,"copy",t[25]),M(e,"paste",t[26]),M(e,"keydown",t[27]),M(e,"keypress",t[28]),M(e,"keyup",t[29]),M(e,"auxclick",t[30]),M(e,"click",t[31]),M(e,"contextmenu",t[32]),M(e,"dblclick",t[33]),M(e,"mousedown",t[34]),M(e,"mouseenter",t[35]),M(e,"mouseleave",t[36]),M(e,"mousemove",t[37]),M(e,"mouseover",t[38]),M(e,"mouseout",t[39]),M(e,"mouseup",t[40]),M(e,"select",t[41]),M(e,"wheel",t[42]),M(e,"drag",t[43]),M(e,"dragend",t[44]),M(e,"dragenter",t[45]),M(e,"dragstart",t[46]),M(e,"dragleave",t[47]),M(e,"dragover",t[48]),M(e,"drop",t[49]),M(e,"touchcancel",t[50]),M(e,"touchend",t[51]),M(e,"touchmove",t[52]),M(e,"touchstart",t[53]),M(e,"pointerover",t[54]),M(e,"pointerenter",t[55]),M(e,"pointerdown",t[56]),M(e,"pointermove",t[57]),M(e,"pointerup",t[58]),M(e,"pointercancel",t[59]),M(e,"pointerout",t[60]),M(e,"pointerleave",t[61]),M(e,"gotpointercapture",t[62]),M(e,"lostpointercapture",t[63])],a=!0)},p(g,u){t=g,(!o||u[0]&33&&l!==(l=t[0]*t[5]))&&k(e,"width",l),(!o||u[0]&34&&i!==(i=t[1]*t[5]))&&k(e,"height",i),(!o||u[0]&16)&&k(e,"class",t[4]),(!o||u[0]&4)&&k(e,"style",t[2]);const f=u[0]&4;f&&Fe(e,"display","block"),(f||u[0]&5&&n!==(n=`${t[0]}px`))&&Fe(e,"width",n),(f||u[0]&6&&s!==(s=`${t[1]}px`))&&Fe(e,"height",s),d&&d.p&&(!o||u[0]&131072)&&_t(d,_,t,t[17],o?pt(_,t[17],u,null):gt(t[17]),null)},i(g){o||(Y(d,g),o=!0)},o(g){Q(d,g),o=!1},d(g){g&&v(e),t[64](null),g&&v(r),g&&v(c),d&&d.d(g),t[65](null),a=!1,We(h)}}}const yl=Symbol(),xl=()=>Cl(yl);function $l(t,e,l){let i,{$$slots:n={},$$scope:s}=e,{width:r=640,height:c=640,pixelRatio:o=null,style:a="",autoclear:h=!0,layerEvents:_=!1}=e,{class:d=""}=e,g,u=null,f;const m=new Hl;function S(){m.redraw()}function y(){return g}function A(){return u}o==null&&(typeof window<"u"?o=window.devicePixelRatio:o=2),zl(yl,{register:m.register,unregister:m.unregister,redraw:m.redraw}),vl(()=>{const w=g.getContext("2d");_?(u=Ql(w),u._renderingLayerId=m.getRenderingLayerId):u=w,m.setup(u,f)}),Tt(()=>m.destroy());const O=w=>{const ct=w.offsetX*i,ht=w.offsetY*i,I=u._getLayerIdAtPixel(ct,ht);m.setActiveLayer(I,w),m.dispatchLayerEvent(w)},P=w=>{const{clientX:ct,clientY:ht}=w.changedTouches[0],{left:I,top:$}=g.getBoundingClientRect(),ve=(ct-I)*i,Se=(ht-$)*i,ge=u._getLayerIdAtPixel(ve,Se);m.setActiveLayer(ge,w),m.dispatchLayerEvent(w)},z=w=>{window.TouchEvent&&w instanceof TouchEvent&&w.preventDefault(),m.dispatchLayerEvent(w)};function C(w){K.call(this,t,w)}function L(w){K.call(this,t,w)}function D(w){K.call(this,t,w)}function V(w){K.call(this,t,w)}function H(w){K.call(this,t,w)}function X(w){K.call(this,t,w)}function G(w){K.call(this,t,w)}function ae(w){K.call(this,t,w)}function we(w){K.call(this,t,w)}function ue(w){K.call(this,t,w)}function Z(w){K.call(this,t,w)}function Ae(w){K.call(this,t,w)}function Ie(w){K.call(this,t,w)}function de(w){K.call(this,t,w)}function U(w){K.call(this,t,w)}function ne(w){K.call(this,t,w)}function re(w){K.call(this,t,w)}function N(w){K.call(this,t,w)}function b(w){K.call(this,t,w)}function ie(w){K.call(this,t,w)}function le(w){K.call(this,t,w)}function se(w){K.call(this,t,w)}function me(w){K.call(this,t,w)}function ee(w){K.call(this,t,w)}function pe(w){K.call(this,t,w)}function _e(w){K.call(this,t,w)}function Ce(w){K.call(this,t,w)}function oe(w){K.call(this,t,w)}function W(w){K.call(this,t,w)}function x(w){K.call(this,t,w)}function fe(w){K.call(this,t,w)}function ce(w){K.call(this,t,w)}function Ue(w){K.call(this,t,w)}function Le(w){K.call(this,t,w)}function Ye(w){K.call(this,t,w)}function he(w){K.call(this,t,w)}function ye(w){K.call(this,t,w)}function Be(w){K.call(this,t,w)}function Ne(w){K.call(this,t,w)}function Pe(w){K.call(this,t,w)}function ze(w){K.call(this,t,w)}function nt(w){K.call(this,t,w)}function ut(w){K.call(this,t,w)}function ft(w){K.call(this,t,w)}function rt(w){K.call(this,t,w)}function ot(w){et[w?"unshift":"push"](()=>{g=w,l(6,g)})}function It(w){et[w?"unshift":"push"](()=>{f=w,l(7,f)})}return t.$$set=w=>{"width"in w&&l(0,r=w.width),"height"in w&&l(1,c=w.height),"pixelRatio"in w&&l(11,o=w.pixelRatio),"style"in w&&l(2,a=w.style),"autoclear"in w&&l(12,h=w.autoclear),"layerEvents"in w&&l(3,_=w.layerEvents),"class"in w&&l(4,d=w.class),"$$scope"in w&&l(17,s=w.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2048&&l(5,i=o??1),t.$$.dirty[0]&1&&l(16,m.width=r,m),t.$$.dirty[0]&2&&l(16,m.height=c,m),t.$$.dirty[0]&32&&l(16,m.pixelRatio=i,m),t.$$.dirty[0]&4096&&l(16,m.autoclear=h,m),t.$$.dirty[0]&71683&&m.redraw()},[r,c,a,_,d,i,g,f,O,P,z,o,h,S,y,A,m,s,n,C,L,D,V,H,X,G,ae,we,ue,Z,Ae,Ie,de,U,ne,re,N,b,ie,le,se,me,ee,pe,_e,Ce,oe,W,x,fe,ce,Ue,Le,Ye,he,ye,Be,Ne,Pe,ze,nt,ut,ft,rt,ot,It]}class es extends lt{constructor(e){super(),st(this,e,$l,Zl,it,{width:0,height:1,pixelRatio:11,style:2,autoclear:12,layerEvents:3,class:4,redraw:13,getCanvas:14,getContext:15},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[13]}get getCanvas(){return this.$$.ctx[14]}get getContext(){return this.$$.ctx[15]}}function ts(t){let e;return{c(){e=E("div"),this.h()},l(l){e=T(l,"DIV",{"data-layer-id":!0}),R(e).forEach(v),this.h()},h(){k(e,"data-layer-id",t[0])},m(l,i){J(l,e,i)},p:Ge,i:Ge,o:Ge,d(l){l&&v(e)}}}function ls(t,e,l){const{register:i,unregister:n,redraw:s}=xl(),r=bl();let{setup:c=void 0}=e,{render:o=()=>{}}=e;const a=i({setup:c,render:o,dispatcher:r});return Tt(()=>n(a)),t.$$set=h=>{"setup"in h&&l(1,c=h.setup),"render"in h&&l(2,o=h.render)},t.$$.update=()=>{t.$$.dirty&4&&s()},[a,c,o]}class ss extends lt{constructor(e){super(),st(this,e,ls,ts,it,{setup:1,render:2})}}let Ot;const El=Date.now(),Tl=t=>(t(Date.now()-El),Ot=window.requestAnimationFrame(()=>Tl(t)),()=>window.cancelAnimationFrame(Ot));function is(){}const ns=Ol(Date.now()-El,typeof window>"u"?is:Tl),{window:Et}=Sl;function Dt(t){let e,l,i,n,s,r;l=new es({props:{width:t[0],height:t[1],$$slots:{default:[rs]},$$scope:{ctx:t}}}),l.$on("pointerdown",t[5]),l.$on("wheel",t[8]);const c=t[26].default,o=mt(c,t,t[27],null);return{c(){e=E("div"),Ve(l.$$.fragment),i=B(),o&&o.c(),this.h()},l(a){e=T(a,"DIV",{style:!0});var h=R(e);Je(l.$$.fragment,h),i=F(h),o&&o.l(h),h.forEach(v),this.h()},h(){Fe(e,"touch-action","none"),Fe(e,"cursor",t[2])},m(a,h){J(a,e,h),je(l,e,null),p(e,i),o&&o.m(e,null),n=!0,s||(r=M(e,"resize",t[9]),s=!0)},p(a,h){const _={};h[0]&1&&(_.width=a[0]),h[0]&2&&(_.height=a[1]),h[0]&134217736&&(_.$$scope={dirty:h,ctx:a}),l.$set(_),o&&o.p&&(!n||h[0]&134217728)&&_t(o,c,a,a[27],n?pt(c,a[27],h,null):gt(a[27]),null),(!n||h[0]&4)&&Fe(e,"cursor",a[2])},i(a){n||(Y(l.$$.fragment,a),Y(o,a),n=!0)},o(a){Q(l.$$.fragment,a),Q(o,a),n=!1},d(a){a&&v(e),qe(l),o&&o.d(a),s=!1,r()}}}function rs(t){let e,l;return e=new ss({props:{render:t[3]}}),{c(){Ve(e.$$.fragment)},l(i){Je(e.$$.fragment,i)},m(i,n){je(e,i,n),l=!0},p(i,n){const s={};n[0]&8&&(s.render=i[3]),e.$set(s)},i(i){l||(Y(e.$$.fragment,i),l=!0)},o(i){Q(e.$$.fragment,i),l=!1},d(i){qe(e,i)}}}function os(t){let e,l,i,n,s=t[0]&&t[1]&&Dt(t);return{c(){s&&s.c(),e=ke()},l(r){s&&s.l(r),e=ke()},m(r,c){s&&s.m(r,c),J(r,e,c),l=!0,i||(n=[M(Et,"pointerup",t[6]),M(Et,"pointermove",t[7]),M(Et,"resize",t[9])],i=!0)},p(r,c){r[0]&&r[1]?s?(s.p(r,c),c[0]&3&&Y(s,1)):(s=Dt(r),s.c(),Y(s,1),s.m(e.parentNode,e)):s&&(Oe(),Q(s,1,1,()=>{s=null}),De())},i(r){l||(Y(s),l=!0)},o(r){Q(s),l=!1},d(r){s&&s.d(r),r&&v(e),i=!1,We(n)}}}const Vt="25px Roboto Mono",Jt="17px Roboto Mono",jt=2.6;function as(t,e,l){let i,n,s,{$$slots:r={},$$scope:c}=e,{clickNode:o}=e,{circledNode:a}=e,{selectedJewel:h}=e,{selectedConqueror:_}=e,{seed:d}=e,{highlighted:g=[]}=e,{disabled:u=[]}=e,{highlightJewels:f=!1}=e;const m=Dl(ns,b=>(!g||!g.length)&&!f?0:Math.round(b/40));wl(t,m,b=>l(25,s=b));const S=[427,320,226,227,323,422,329];let y=10,A=0,O=0;const P={},z={},C=(b,ie,le,se=!1,me=!1)=>{let ee=se?Jl[ie]:Nt[ie];!ee&&se&&(ee=Nt[ie]);const pe=ee.filename;pe in(se?z:P)||((se?z:P)[pe]=new Image,(se?z:P)[pe].src=pe);const _e=ee.coords[ie],Ce=_e.w/y*jt,oe=_e.h/y*jt,W=le.x-Ce/2,x=le.y-oe/2;let fe=x;me&&(fe=x-oe/2),b.drawImage((se?z:P)[pe],_e.x,_e.y,_e.w,_e.h,W,fe,Ce,oe),me&&(b.save(),b.translate(W,x),b.rotate(Math.PI),b.drawImage((se?z:P)[pe],_e.x,_e.y,_e.w,_e.h,-Ce,-(oe/2),Ce,-oe),b.restore())},L=(b,ie,le)=>{const se=[];let me="";return b.split(" ").forEach(ee=>{ie.measureText(me+ee).width<le?me+=" "+ee:(se.push(me.trim()),me=ee)}),me.length>0&&se.push(me.trim()),se};let D={x:Number.MIN_VALUE,y:Number.MIN_VALUE},V="unset",H,X=0,G=0,ae=0,we=0,ue=!1;const Z=b=>{ue=!0,X=b.offsetX,G=b.offsetY,ae=A,we=O,l(21,D={x:b.offsetX,y:b.offsetY}),H&&o(H)},Ae=b=>{b.type==="pointerup"&&(ue=!1),l(21,D={x:b.offsetX,y:b.offsetY})},Ie=b=>{ue&&(l(19,A=ae-(X-b.offsetX)*y),l(20,O=we-(G-b.offsetY)*y)),l(21,D={x:b.offsetX,y:b.offsetY})},de=b=>{b.deltaY>0?y<30&&(l(19,A+=b.offsetX),l(20,O+=b.offsetY)):y>3&&(l(19,A-=b.offsetX),l(20,O-=b.offsetY)),l(18,y=Math.min(30,Math.max(3,y+b.deltaY/100))),b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation()};let U=0,ne=0;const re=()=>{l(0,U=window.innerWidth),l(1,ne=window.innerHeight)};let N=!1;return t.$$set=b=>{"clickNode"in b&&l(10,o=b.clickNode),"circledNode"in b&&l(11,a=b.circledNode),"selectedJewel"in b&&l(12,h=b.selectedJewel),"selectedConqueror"in b&&l(13,_=b.selectedConqueror),"seed"in b&&l(14,d=b.seed),"highlighted"in b&&l(15,g=b.highlighted),"disabled"in b&&l(16,u=b.disabled),"highlightJewels"in b&&l(17,f=b.highlightJewels),"$$scope"in b&&l(27,c=b.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&262144&&l(24,i=Vl/y),t.$$.dirty[0]&8650752&&(!N&&He&&(l(23,N=!0),l(19,A=He.min_x+window.innerWidth/2*y),l(20,O=He.min_y+window.innerHeight/2*y)),re()),t.$$.dirty[0]&58718208&&l(3,n=({context:b,width:ie,height:le})=>{const se=window.performance.now();b.clearRect(0,0,ie,le),b.fillStyle="#080c11",b.fillRect(0,0,ie,le);const me={};Object.keys(yt).forEach(oe=>{const W=yt[oe],x=Mt(W.x,W.y,A,O,y),fe=Math.max(...W.orbits);S.indexOf(parseInt(oe))>=0||(fe==1?C(b,"PSGroupBackground1",x,!1):fe==2?C(b,"PSGroupBackground2",x,!1):(fe==3||W.orbits.length>1)&&C(b,"PSGroupBackground3",x,!1,!0))}),Object.keys($e).forEach(oe=>{var ce;const W=$e[oe],x=Pt(W.orbit,W.orbitIndex),fe=wt(W,A,O,y);(ce=W.out)==null||ce.forEach(Ue=>{if(!$e[parseInt(Ue)])return;const Le=Math.min(parseInt(Ue),parseInt(oe)),Ye=Math.max(parseInt(Ue),parseInt(oe)),he=Le+":"+Ye;if(he in me)return;me[he]=!0;const ye=$e[parseInt(Ue)];if(!ye||ye.isMastery)return;const Be=Pt(ye.orbit,ye.orbitIndex),Ne=wt(ye,A,O,y);if(b.beginPath(),W.group!=ye.group||W.orbit!=ye.orbit)b.moveTo(fe.x,fe.y),b.lineTo(Ne.x,Ne.y);else{let Pe=Math.PI/180-Math.PI/180*x,ze=Math.PI/180-Math.PI/180*Be;Pe-=Math.PI/2,ze-=Math.PI/2;const nt=Math.abs(Math.max(Pe,ze)-Math.min(Pe,ze)),ut=nt>Math.PI?Math.max(Pe,ze):Math.min(Pe,ze),ft=nt>Math.PI?Math.min(Pe,ze):Math.max(Pe,ze),rt=yt[W.group],ot=Mt(rt.x,rt.y,A,O,y);b.arc(ot.x,ot.y,He.constants.orbitRadii[W.orbit]/y+1,ut,ft)}b.lineWidth=6/y,b.strokeStyle="#524518",b.stroke()})});let ee;a&&(ee=wt($e[a],A,O,y),b.strokeStyle="#ad2b2b");let pe=!1,_e;if(Object.keys($e).forEach(oe=>{const W=$e[oe],x=wt(W,A,O,y);let fe=0,ce=!1;a&&zt(x,ee)<i&&(ce=!0),u.indexOf(W.skill)>=0&&(ce=!1),W.isKeystone?(fe=110,C(b,W.icon,x,ce),ce?C(b,"KeystoneFrameAllocated",x,!1):C(b,"KeystoneFrameUnallocated",x,!1)):W.isNotable?(fe=70,C(b,W.icon,x,ce),ce?C(b,"NotableFrameAllocated",x,!1):C(b,"NotableFrameUnallocated",x,!1)):W.isJewelSocket?(fe=70,W.expansionJewel?C(b,"JewelSocketAltNormal",x,!1):ce?C(b,"JewelFrameAllocated",x,!1):C(b,"JewelFrameUnallocated",x,!1)):W.isMastery?C(b,W.inactiveIcon,x,ce):(fe=50,C(b,W.icon,x,ce),ce?C(b,"PSSkillFrameActive",x,!1):C(b,"PSSkillFrame",x,!1)),(g.indexOf(W.skill)>=0||f&&W.isJewelSocket)&&(b.strokeStyle=`hsl(${s}, 100%, 50%)`,b.lineWidth=3,b.beginPath(),b.arc(x.x,x.y,(fe+30)/y,0,Math.PI*2),b.stroke()),zt(x,D)<fe/y&&(_e=W,pe=ce)}),l(22,H=_e),a&&(b.strokeStyle="#ad2b2b",b.lineWidth=1,b.beginPath(),b.arc(ee.x,ee.y,i,0,Math.PI*2),b.stroke()),H){let oe=H.name,W=(H.stats||[]).map(he=>({text:he,special:!1}));if(!H.isJewelSocket&&pe&&H.skill&&d&&h&&_){const he=Il.Calculate(te.TreeToPassive[H.skill].Index,d,h,_);he&&("AlternatePassiveSkill"in he&&he.AlternatePassiveSkill&&(W=[],oe=he.AlternatePassiveSkill.Name,"StatsKeys"in he.AlternatePassiveSkill&&he.AlternatePassiveSkill.StatsKeys.forEach((ye,Be)=>{const Ne=te.GetStatByIndex(ye),Pe=Ct[Ne.ID]||"";Pe&&W.push({text:Lt(Pe,he.StatRolls[Be])||Ne.ID,special:!0})})),he.AlternatePassiveAdditionInformations&&he.AlternatePassiveAdditionInformations.forEach(ye=>{"StatsKeys"in ye.AlternatePassiveAddition&&ye.AlternatePassiveAddition.StatsKeys.forEach((Be,Ne)=>{const Pe=te.GetStatByIndex(Be),ze=Ct[Pe.ID]||"";ze&&W.push({text:Lt(ze,ye.StatRolls[Ne])||Pe.ID,special:!0})})}))}b.font=Vt;const x=b.measureText(oe),fe=Math.max(x.width+50,600);b.font=Jt;const ce=[],Ue=30;let Le=85;W&&W.length>0?W.forEach(he=>{ce.length>0&&(Le+=5),he.text.split(`
`).forEach(ye=>{ce.length>0&&(Le+=10),L(ye,b,fe-Ue).forEach(Ne=>{ce.push({text:Ne,offset:Le,special:he.special}),Le+=20})})}):H.isJewelSocket&&(ce.push({text:"Click to select this socket",offset:Le,special:!0}),Le+=20);const Ye=55;b.fillStyle="rgba(75,63,24,0.9)",b.fillRect(D.x,D.y,fe,Ye),b.fillStyle="#ffffff",b.font=Vt,b.textAlign="center",b.fillText(oe,D.x+fe/2,D.y+35),b.fillStyle="rgba(0,0,0,0.8)",b.fillRect(D.x,D.y+Ye,fe,Le-Ye),b.font=Jt,b.textAlign="left",ce.forEach(he=>{he.special?b.fillStyle="#8cf34c":b.fillStyle="#ffffff",b.fillText(he.text,D.x+Ue/2,D.y+he.offset)})}H&&H.isJewelSocket?l(2,V="pointer"):l(2,V="unset"),b.fillStyle="#ffffff",b.textAlign="right",b.font="12px Roboto Mono";const Ce=window.performance.now();b.fillText(`${(Ce-se).toFixed(1)}ms`,ie-5,17)})},[U,ne,V,n,m,Z,Ae,Ie,de,re,o,a,h,_,d,g,u,f,y,A,O,D,H,N,i,s,r,c]}class us extends lt{constructor(e){super(),st(this,e,as,os,it,{clickNode:10,circledNode:11,selectedJewel:12,selectedConqueror:13,seed:14,highlighted:15,disabled:16,highlightJewels:17},null,[-1,-1])}}function qt(t,e,l){const i=t.slice();return i[6]=e[l],i}function Ut(t,e,l){const i=t.slice();return i[9]=e[l],i}function Bt(t){let e,l=at(t[9],t[6].stats[t[9]])+"",i;return{c(){e=E("li"),i=j(l)},l(n){e=T(n,"LI",{});var s=R(e);i=q(s,l),s.forEach(v)},m(n,s){J(n,e,s),p(e,i)},p(n,s){s&2&&l!==(l=at(n[9],n[6].stats[n[9]])+"")&&Re(i,l)},d(n){n&&v(e)}}}function Ft(t){let e,l,i=He.nodes[t[6].passive].name+"",n,s,r=t[6].passive+"",c,o,a,h,_,d=Object.keys(t[6].stats),g=[];for(let u=0;u<d.length;u+=1)g[u]=Bt(Ut(t,d,u));return{c(){e=E("div"),l=E("span"),n=j(i),s=j(" ("),c=j(r),o=j(")"),a=B(),h=E("ul");for(let u=0;u<g.length;u+=1)g[u].c();_=B(),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=R(e);l=T(f,"SPAN",{});var m=R(l);n=q(m,i),s=q(m," ("),c=q(m,r),o=q(m,")"),m.forEach(v),a=F(f),h=T(f,"UL",{class:!0});var S=R(h);for(let y=0;y<g.length;y+=1)g[y].l(S);S.forEach(v),_=F(f),f.forEach(v),this.h()},h(){k(h,"class","list-disc pl-6 font-bold"),k(e,"class","mt-2")},m(u,f){J(u,e,f),p(e,l),p(l,n),p(l,s),p(l,c),p(l,o),p(e,a),p(e,h);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(h,null);p(e,_)},p(u,f){if(f&2&&i!==(i=He.nodes[u[6].passive].name+"")&&Re(n,i),f&2&&r!==(r=u[6].passive+"")&&Re(c,r),f&2){d=Object.keys(u[6].stats);let m;for(m=0;m<d.length;m+=1){const S=Ut(u,d,m);g[m]?g[m].p(S,f):(g[m]=Bt(S),g[m].c(),g[m].m(h,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=d.length}},d(u){u&&v(e),tt(g,u)}}}function fs(t){let e,l,i,n,s,r,c,o=t[1].seed+"",a,h,_=t[1].weight+"",d,g,u,f,m,S,y,A,O=t[1].skills,P=[];for(let z=0;z<O.length;z+=1)P[z]=Ft(qt(t,O,z));return{c(){e=E("div"),l=E("div"),i=E("button"),n=j("Trade"),s=B(),r=E("div"),c=j("Seed "),a=j(o),h=j(" (weight "),d=j(_),g=j(")"),u=B(),f=E("button"),m=j("Trade"),S=B();for(let z=0;z<P.length;z+=1)P[z].c();this.h()},l(z){e=T(z,"DIV",{class:!0});var C=R(e);l=T(C,"DIV",{class:!0});var L=R(l);i=T(L,"BUTTON",{class:!0});var D=R(i);n=q(D,"Trade"),D.forEach(v),s=F(L),r=T(L,"DIV",{class:!0});var V=R(r);c=q(V,"Seed "),a=q(V,o),h=q(V," (weight "),d=q(V,_),g=q(V,")"),V.forEach(v),u=F(L),f=T(L,"BUTTON",{class:!0});var H=R(f);m=q(H,"Trade"),H.forEach(v),L.forEach(v),S=F(C);for(let X=0;X<P.length;X+=1)P[X].l(C);C.forEach(v),this.h()},h(){k(i,"class","px-3 invisible"),k(r,"class","font-bold text-orange-500 text-center"),k(f,"class","px-3 bg-blue-500/40 rounded"),k(l,"class","flex flex-row justify-between"),k(e,"class","my-2 border-white/50 border p-2 flex flex-col cursor-pointer")},m(z,C){J(z,e,C),p(e,l),p(l,i),p(i,n),p(l,s),p(l,r),p(r,c),p(r,a),p(r,h),p(r,d),p(r,g),p(l,u),p(l,f),p(f,m),p(e,S);for(let L=0;L<P.length;L+=1)P[L]&&P[L].m(e,null);y||(A=[M(f,"click",t[4]),M(e,"click",t[5])],y=!0)},p(z,[C]){if(C&2&&o!==(o=z[1].seed+"")&&Re(a,o),C&2&&_!==(_=z[1].weight+"")&&Re(d,_),C&2){O=z[1].skills;let L;for(L=0;L<O.length;L+=1){const D=qt(z,O,L);P[L]?P[L].p(D,C):(P[L]=Ft(D),P[L].c(),P[L].m(e,null))}for(;L<P.length;L+=1)P[L].d(1);P.length=O.length}},i:Ge,o:Ge,d(z){z&&v(e),tt(P,z),y=!1,We(A)}}}function cs(t,e,l){let{highlight:i}=e,{set:n}=e,{jewel:s}=e,{conqueror:r}=e;const c=()=>kl(s,r,[n]),o=()=>i(n.seed,n.skills.map(a=>a.passive));return t.$$set=a=>{"highlight"in a&&l(0,i=a.highlight),"set"in a&&l(1,n=a.set),"jewel"in a&&l(2,s=a.jewel),"conqueror"in a&&l(3,r=a.conqueror)},[i,n,s,r,c,o]}class Rl extends lt{constructor(e){super(),st(this,e,cs,fs,it,{highlight:0,set:1,jewel:2,conqueror:3})}}const St={AUTO:"auto",START:"start",CENTER:"center",END:"end"},Xe={HORIZONTAL:"horizontal",VERTICAL:"vertical"},dt={OBSERVED:0,REQUESTED:1},hs={[Xe.VERTICAL]:"top",[Xe.HORIZONTAL]:"left"},Ht={[Xe.VERTICAL]:"scrollTop",[Xe.HORIZONTAL]:"scrollLeft"};class ds{constructor({itemSize:e,itemCount:l,estimatedItemSize:i}){this.itemSize=e,this.itemCount=l,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:l,estimatedItemSize:i}){l!=null&&(this.itemCount=l),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:l}=this;return typeof l=="function"?l(e):Array.isArray(l)?l[e]:l}computeTotalSizeAndPositionData(){let e=0;for(let l=0;l<this.itemCount;l++){const i=this.getSize(l),n=e;e+=i,this.itemSizeAndPositionData[l]={offset:n,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const l=this.getSizeAndPositionOfLastMeasuredItem();let i=l.offset+l.size;for(let n=this.lastMeasuredIndex+1;n<=e;n++){const s=this.getSize(n);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${n} of value ${s}`);this.itemSizeAndPositionData[n]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=St.START,containerSize:l,currentOffset:i,targetIndex:n}){if(l<=0)return 0;const s=this.getSizeAndPositionForIndex(n),r=s.offset,c=r-l+s.size;let o;switch(e){case St.END:o=c;break;case St.CENTER:o=r-(l-s.size)/2;break;case St.START:o=r;break;default:o=Math.max(c,Math.min(r,i))}const a=this.getTotalSize();return Math.max(0,Math.min(a-l,o))}getVisibleRange({containerSize:e=0,offset:l,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=l+e;let r=this.findNearestItem(l);if(r===void 0)throw Error(`Invalid offset ${l} specified`);const c=this.getSizeAndPositionForIndex(r);l=c.offset+c.size;let o=r;for(;l<s&&o<this.itemCount-1;)o++,l+=this.getSizeAndPositionForIndex(o).size;return i&&(r=Math.max(0,r-i),o=Math.min(o+i,this.itemCount-1)),{start:r,stop:o}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const l=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return l.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:l,offset:i}){let n=0,s=0;for(;e<=l;){if(n=e+Math.floor((l-e)/2),s=this.getSizeAndPositionForIndex(n).offset,s===i)return n;s<i?e=n+1:s>i&&(l=n-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:l}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<l;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:l})}}const ms=t=>({}),Yt=t=>({});function Kt(t,e,l){const i=t.slice();return i[37]=e[l],i}const _s=t=>({style:t[0]&4,index:t[0]&4}),Xt=t=>({style:t[37].style,index:t[37].index}),gs=t=>({}),Gt=t=>({});function Wt(t,e){let l,i;const n=e[21].item,s=mt(n,e,e[20],Xt);return{key:t,first:null,c(){l=ke(),s&&s.c(),this.h()},l(r){l=ke(),s&&s.l(r),this.h()},h(){this.first=l},m(r,c){J(r,l,c),s&&s.m(r,c),i=!0},p(r,c){e=r,s&&s.p&&(!i||c[0]&1048580)&&_t(s,n,e,e[20],i?pt(n,e[20],c,_s):gt(e[20]),Xt)},i(r){i||(Y(s,r),i=!0)},o(r){Q(s,r),i=!1},d(r){r&&v(l),s&&s.d(r)}}}function ps(t){let e,l,i,n=[],s=new Map,r,c;const o=t[21].header,a=mt(o,t,t[20],Gt);let h=t[2];const _=u=>u[0]?u[0](u[37].index):u[37].index;for(let u=0;u<h.length;u+=1){let f=Kt(t,h,u),m=_(f);s.set(m,n[u]=Wt(m,f))}const d=t[21].footer,g=mt(d,t,t[20],Yt);return{c(){e=E("div"),a&&a.c(),l=B(),i=E("div");for(let u=0;u<n.length;u+=1)n[u].c();r=B(),g&&g.c(),this.h()},l(u){e=T(u,"DIV",{class:!0,style:!0});var f=R(e);a&&a.l(f),l=F(f),i=T(f,"DIV",{class:!0,style:!0});var m=R(i);for(let S=0;S<n.length;S+=1)n[S].l(m);m.forEach(v),r=F(f),g&&g.l(f),f.forEach(v),this.h()},h(){k(i,"class","virtual-list-inner svelte-1d4hv8l"),k(i,"style",t[4]),k(e,"class","virtual-list-wrapper svelte-1d4hv8l"),k(e,"style",t[3])},m(u,f){J(u,e,f),a&&a.m(e,null),p(e,l),p(e,i);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(i,null);p(e,r),g&&g.m(e,null),t[22](e),c=!0},p(u,f){a&&a.p&&(!c||f[0]&1048576)&&_t(a,o,u,u[20],c?pt(o,u[20],f,gs):gt(u[20]),Gt),f[0]&1048581&&(h=u[2],Oe(),n=Ll(n,f,_,1,u,h,s,i,Nl,Wt,null,Kt),De()),(!c||f[0]&16)&&k(i,"style",u[4]),g&&g.p&&(!c||f[0]&1048576)&&_t(g,d,u,u[20],c?pt(d,u[20],f,ms):gt(u[20]),Yt),(!c||f[0]&8)&&k(e,"style",u[3])},i(u){if(!c){Y(a,u);for(let f=0;f<h.length;f+=1)Y(n[f]);Y(g,u),c=!0}},o(u){Q(a,u);for(let f=0;f<n.length;f+=1)Q(n[f]);Q(g,u),c=!1},d(u){u&&v(e),a&&a.d(u);for(let f=0;f<n.length;f+=1)n[f].d();g&&g.d(u),t[22](null)}}}const vs=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function bs(t,e,l){let{$$slots:i={},$$scope:n}=e,{height:s}=e,{width:r="100%"}=e,{itemCount:c}=e,{itemSize:o}=e,{estimatedItemSize:a=null}=e,{stickyIndices:h=null}=e,{getKey:_=null}=e,{scrollDirection:d=Xe.VERTICAL}=e,{scrollOffset:g=null}=e,{scrollToIndex:u=null}=e,{scrollToAlignment:f=null}=e,{scrollToBehaviour:m="instant"}=e,{overscanCount:S=3}=e;const y=bl(),A=new ds({itemCount:c,itemSize:o,estimatedItemSize:U()});let O=!1,P,z=[],C={offset:g||u!=null&&z.length&&Ae(u)||0,scrollChangeReason:dt.REQUESTED},L=C,D={scrollToIndex:u,scrollToAlignment:f,scrollOffset:g,itemCount:c,itemSize:o,estimatedItemSize:a},V={},H="",X="";we(),vl(()=>{l(18,O=!0),P.addEventListener("scroll",Ie,vs),g!=null?ue(g):u!=null&&ue(Ae(u))}),Tt(()=>{O&&P.removeEventListener("scroll",Ie)});function G(){if(!O)return;const N=D.scrollToIndex!==u||D.scrollToAlignment!==f,b=D.itemCount!==c||D.itemSize!==o||D.estimatedItemSize!==a;b&&(A.updateConfig({itemSize:o,itemCount:c,estimatedItemSize:U()}),Z()),D.scrollOffset!==g?l(19,C={offset:g||0,scrollChangeReason:dt.REQUESTED}):typeof u=="number"&&(N||b)&&l(19,C={offset:Ae(u,f,c),scrollChangeReason:dt.REQUESTED}),D={scrollToIndex:u,scrollToAlignment:f,scrollOffset:g,itemCount:c,itemSize:o,estimatedItemSize:a}}function ae(){if(!O)return;const{offset:N,scrollChangeReason:b}=C;(L.offset!==N||L.scrollChangeReason!==b)&&we(),L.offset!==N&&b===dt.REQUESTED&&ue(N),L=C}function we(){const{offset:N}=C,{start:b,stop:ie}=A.getVisibleRange({containerSize:d===Xe.VERTICAL?s:r,offset:N,overscanCount:S});let le=[];const se=A.getTotalSize();d===Xe.VERTICAL?(l(3,H=`height:${s}px;width:${r};`),l(4,X=`flex-direction:column;height:${se}px;`)):(l(3,H=`height:${s};width:${r}px`),l(4,X=`min-height:100%;width:${se}px;`));const me=h!=null&&h.length!==0;if(me)for(let ee=0;ee<h.length;ee++){const pe=h[ee];le.push({index:pe,style:ne(pe,!0)})}if(b!==void 0&&ie!==void 0){for(let ee=b;ee<=ie;ee++)me&&h.includes(ee)||le.push({index:ee,style:ne(ee,!1)});y("itemsUpdated",{start:b,end:ie})}l(2,z=le)}function ue(N){"scroll"in P?P.scroll({[hs[d]]:N,behavior:m}):l(1,P[Ht[d]]=N,P)}function Z(N=0){V={},A.resetItem(N),we()}function Ae(N,b=f,ie=c){return(N<0||N>=ie)&&(N=0),A.getUpdatedOffsetForIndex({align:b,containerSize:d===Xe.VERTICAL?s:r,currentOffset:C.offset||0,targetIndex:N})}function Ie(N){const b=de();b<0||C.offset===b||N.target!==P||(l(19,C={offset:b,scrollChangeReason:dt.OBSERVED}),y("afterScroll",{offset:b,event:N}))}function de(){return P[Ht[d]]}function U(){return a||typeof o=="number"&&o||50}function ne(N,b){if(V[N])return V[N];const{size:ie,offset:le}=A.getSizeAndPositionForIndex(N);let se;return d===Xe.VERTICAL?(se=`left:0;width:100%;height:${ie}px;`,b?se+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${le}px;margin-bottom:${-(le+ie)}px;`:se+=`position:absolute;top:${le}px;`):(se=`top:0;width:${ie}px;`,b?se+=`position:sticky;z-index:1;left:0;margin-left:${le}px;margin-right:${-(le+ie)}px;`:se+=`position:absolute;height:100%;left:${le}px;`),V[N]=se}function re(N){et[N?"unshift":"push"](()=>{P=N,l(1,P)})}return t.$$set=N=>{"height"in N&&l(5,s=N.height),"width"in N&&l(6,r=N.width),"itemCount"in N&&l(7,c=N.itemCount),"itemSize"in N&&l(8,o=N.itemSize),"estimatedItemSize"in N&&l(9,a=N.estimatedItemSize),"stickyIndices"in N&&l(10,h=N.stickyIndices),"getKey"in N&&l(0,_=N.getKey),"scrollDirection"in N&&l(11,d=N.scrollDirection),"scrollOffset"in N&&l(12,g=N.scrollOffset),"scrollToIndex"in N&&l(13,u=N.scrollToIndex),"scrollToAlignment"in N&&l(14,f=N.scrollToAlignment),"scrollToBehaviour"in N&&l(15,m=N.scrollToBehaviour),"overscanCount"in N&&l(16,S=N.overscanCount),"$$scope"in N&&l(20,n=N.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&G(),t.$$.dirty[0]&524288&&ae(),t.$$.dirty[0]&263264&&O&&Z(0)},[_,P,z,H,X,s,r,c,o,a,h,d,g,u,f,m,S,Z,O,C,n,i,re]}class Al extends lt{constructor(e){super(),st(this,e,bs,ps,it,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get recomputeSizes(){return this.$$.ctx[17]}}function Qt(t,e,l){const i=t.slice();return i[9]=e[l],i}function ws(t){let e,l,i;return l=new Al({props:{height:"auto",overscanCount:15,itemCount:t[0].raw.length,itemSize:t[0].raw.map(t[6]),$$slots:{item:[ks,({style:n,index:s})=>({12:n,13:s}),({style:n,index:s})=>(n?4096:0)|(s?8192:0)]},$$scope:{ctx:t}}}),{c(){e=E("div"),Ve(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{class:!0});var s=R(e);Je(l.$$.fragment,s),s.forEach(v),this.h()},h(){k(e,"class","mt-4 flex flex-col overflow-auto")},m(n,s){J(n,e,s),je(l,e,null),i=!0},p(n,s){const r={};s&1&&(r.itemCount=n[0].raw.length),s&1&&(r.itemSize=n[0].raw.map(n[6])),s&28699&&(r.$$scope={dirty:s,ctx:n}),l.$set(r)},i(n){i||(Y(l.$$.fragment,n),i=!0)},o(n){Q(l.$$.fragment,n),i=!1},d(n){n&&v(e),qe(l)}}}function Ss(t){let e,l,i=Object.keys(t[0].grouped).map(t[7]).sort($t).reverse(),n=[];for(let r=0;r<i.length;r+=1)n[r]=xt(Qt(t,i,r));const s=r=>Q(n[r],1,1,()=>{n[r]=null});return{c(){e=E("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=T(r,"DIV",{class:!0});var c=R(e);for(let o=0;o<n.length;o+=1)n[o].l(c);c.forEach(v),this.h()},h(){k(e,"class","flex flex-col overflow-auto")},m(r,c){J(r,e,c);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);l=!0},p(r,c){if(c&12411){i=Object.keys(r[0].grouped).map(r[7]).sort($t).reverse();let o;for(o=0;o<i.length;o+=1){const a=Qt(r,i,o);n[o]?(n[o].p(a,c),Y(n[o],1)):(n[o]=xt(a),n[o].c(),Y(n[o],1),n[o].m(e,null))}for(Oe(),o=i.length;o<n.length;o+=1)s(o);De()}},i(r){if(!l){for(let c=0;c<i.length;c+=1)Y(n[c]);l=!0}},o(r){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)Q(n[c]);l=!1},d(r){r&&v(e),tt(n,r)}}}function ks(t){let e,l,i,n;return l=new Rl({props:{set:t[0].raw[t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=E("div"),Ve(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{slot:!0,style:!0});var r=R(e);Je(l.$$.fragment,r),r.forEach(v),this.h()},h(){k(e,"slot","item"),k(e,"style",i=t[12])},m(s,r){J(s,e,r),je(l,e,null),n=!0},p(s,r){const c={};r&8193&&(c.set=s[0].raw[s[13]]),r&2&&(c.highlight=s[1]),r&8&&(c.jewel=s[3]),r&16&&(c.conqueror=s[4]),l.$set(c),(!n||r&4096&&i!==(i=s[12]))&&k(e,"style",i)},i(s){n||(Y(l.$$.fragment,s),n=!0)},o(s){Q(l.$$.fragment,s),n=!1},d(s){s&&v(e),qe(l)}}}function Zt(t){let e,l,i,n;return l=new Al({props:{height:"auto",overscanCount:10,itemCount:t[0].grouped[t[9]].length,itemSize:t[0].grouped[t[9]].map(t[6]),$$slots:{item:[Is,({style:s,index:r})=>({12:s,13:r}),({style:s,index:r})=>(s?4096:0)|(r?8192:0)]},$$scope:{ctx:t}}}),{c(){e=E("div"),Ve(l.$$.fragment),i=B(),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=R(e);Je(l.$$.fragment,r),i=F(r),r.forEach(v),this.h()},h(){k(e,"class","flex flex-col overflow-auto min-h-[200px] mb-2")},m(s,r){J(s,e,r),je(l,e,null),p(e,i),n=!0},p(s,r){const c={};r&1&&(c.itemCount=s[0].grouped[s[9]].length),r&1&&(c.itemSize=s[0].grouped[s[9]].map(s[6])),r&28699&&(c.$$scope={dirty:r,ctx:s}),l.$set(c)},i(s){n||(Y(l.$$.fragment,s),n=!0)},o(s){Q(l.$$.fragment,s),n=!1},d(s){s&&v(e),qe(l)}}}function Is(t){let e,l,i,n;return l=new Rl({props:{set:t[0].grouped[t[9]][t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=E("div"),Ve(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{slot:!0,style:!0});var r=R(e);Je(l.$$.fragment,r),r.forEach(v),this.h()},h(){k(e,"slot","item"),k(e,"style",i=t[12])},m(s,r){J(s,e,r),je(l,e,null),n=!0},p(s,r){const c={};r&8193&&(c.set=s[0].grouped[s[9]][s[13]]),r&2&&(c.highlight=s[1]),r&8&&(c.jewel=s[3]),r&16&&(c.conqueror=s[4]),l.$set(c),(!n||r&4096&&i!==(i=s[12]))&&k(e,"style",i)},i(s){n||(Y(l.$$.fragment,s),n=!0)},o(s){Q(l.$$.fragment,s),n=!1},d(s){s&&v(e),qe(l)}}}function xt(t){let e,l,i=t[9]+"",n,s,r=t[9]>1?"es":"",c,o,a=t[0].grouped[t[9]].length+"",h,_,d,g,u=t[5]===t[9]?"^":"V",f,m,S,y,A,O;function P(){return t[8](t[9])}let z=t[5]===t[9]&&Zt(t);return{c(){e=E("button"),l=E("span"),n=j(i),s=j(" Match"),c=j(r),o=j(" ["),h=j(a),_=j("]"),d=B(),g=E("span"),f=j(u),m=B(),z&&z.c(),S=ke(),this.h()},l(C){e=T(C,"BUTTON",{class:!0});var L=R(e);l=T(L,"SPAN",{});var D=R(l);n=q(D,i),s=q(D," Match"),c=q(D,r),o=q(D," ["),h=q(D,a),_=q(D,"]"),D.forEach(v),d=F(L),g=T(L,"SPAN",{});var V=R(g);f=q(V,u),V.forEach(v),L.forEach(v),m=F(C),z&&z.l(C),S=ke(),this.h()},h(){k(e,"class","text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between mb-2")},m(C,L){J(C,e,L),p(e,l),p(l,n),p(l,s),p(l,c),p(l,o),p(l,h),p(l,_),p(e,d),p(e,g),p(g,f),J(C,m,L),z&&z.m(C,L),J(C,S,L),y=!0,A||(O=M(e,"click",P),A=!0)},p(C,L){t=C,(!y||L&1)&&i!==(i=t[9]+"")&&Re(n,i),(!y||L&1)&&r!==(r=t[9]>1?"es":"")&&Re(c,r),(!y||L&1)&&a!==(a=t[0].grouped[t[9]].length+"")&&Re(h,a),(!y||L&33)&&u!==(u=t[5]===t[9]?"^":"V")&&Re(f,u),t[5]===t[9]?z?(z.p(t,L),L&33&&Y(z,1)):(z=Zt(t),z.c(),Y(z,1),z.m(S.parentNode,S)):z&&(Oe(),Q(z,1,1,()=>{z=null}),De())},i(C){y||(Y(z),y=!0)},o(C){Q(z),y=!1},d(C){C&&v(e),C&&v(m),z&&z.d(C),C&&v(S),A=!1,O()}}}function ys(t){let e,l,i,n;const s=[Ss,ws],r=[];function c(o,a){return o[2]?0:1}return e=c(t),l=r[e]=s[e](t),{c(){l.c(),i=ke()},l(o){l.l(o),i=ke()},m(o,a){r[e].m(o,a),J(o,i,a),n=!0},p(o,[a]){let h=e;e=c(o),e===h?r[e].p(o,a):(Oe(),Q(r[h],1,1,()=>{r[h]=null}),De(),l=r[e],l?l.p(o,a):(l=r[e]=s[e](o),l.c()),Y(l,1),l.m(i.parentNode,i))},i(o){n||(Y(l),n=!0)},o(o){Q(l),n=!1},d(o){r[e].d(o),o&&v(i)}}}const $t=(t,e)=>t-e;function Es(t,e,l){let{searchResults:i}=e,{highlight:n}=e,{groupResults:s=!0}=e,{jewel:r}=e,{conqueror:c}=e;const o=d=>8+48+d.skills.reduce((g,u)=>g+32+Object.keys(u.stats).length*24,0);let a="";const h=d=>parseInt(d),_=d=>l(5,a=a===d?"":d);return t.$$set=d=>{"searchResults"in d&&l(0,i=d.searchResults),"highlight"in d&&l(1,n=d.highlight),"groupResults"in d&&l(2,s=d.groupResults),"jewel"in d&&l(3,r=d.jewel),"conqueror"in d&&l(4,c=d.conqueror)},[i,n,s,r,c,a,o,h,_]}class Ts extends lt{constructor(e){super(),st(this,e,Es,ys,it,{searchResults:0,highlight:1,groupResults:2,jewel:3,conqueror:4})}}const xe={25:1,26:1,42:1,49:1,56:1,63:1,70:2,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1294:1,1361:1,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2};const{window:Rs}=Sl;function el(t,e,l){const i=t.slice();return i[77]=e[l],i[78]=e,i[79]=l,i}function tl(t,e,l){const i=t.slice();return i[70]=e[l],i}function ll(t,e,l){const i=t.slice();return i[70]=e[l],i}function sl(t,e,l){const i=t.slice();return i[70]=e[l],i}function As(t){let e,l,i,n,s,r,c,o;return{c(){e=E("button"),l=E("div"),i=B(),n=E("div"),s=B(),r=E("div"),this.h()},l(a){e=T(a,"BUTTON",{class:!0});var h=R(e);l=T(h,"DIV",{}),R(l).forEach(v),i=F(h),n=T(h,"DIV",{}),R(n).forEach(v),s=F(h),r=T(h,"DIV",{}),R(r).forEach(v),h.forEach(v),this.h()},h(){k(e,"class","burger-menu absolute top-0 left-0 bg-black/80 backdrop-blur-sm rounded-br-lg p-4 pt-5")},m(a,h){J(a,e,h),p(e,l),p(e,i),p(e,n),p(e,s),p(e,r),c||(o=M(e,"click",t[65]),c=!0)},p:Ge,i:Ge,o:Ge,d(a){a&&v(e),c=!1,o()}}}function Ms(t){let e,l,i,n,s,r,c,o,a,h,_,d,g=t[13]?"Results":"Timeless Jewel",u,f,m,S,y,A,O,P=t[17]&&il(t),z=!t[13]&&rl(t),C=t[17]&&t[13]&&pl(t);return{c(){e=E("div"),l=E("div"),i=E("div"),n=E("div"),s=E("button"),r=E("div"),c=B(),o=E("div"),a=B(),h=E("div"),_=B(),d=E("h3"),u=j(g),f=B(),P&&P.c(),m=B(),z&&z.c(),S=B(),C&&C.c(),this.h()},l(L){e=T(L,"DIV",{class:!0});var D=R(e);l=T(D,"DIV",{class:!0});var V=R(l);i=T(V,"DIV",{class:!0});var H=R(i);n=T(H,"DIV",{class:!0});var X=R(n);s=T(X,"BUTTON",{class:!0});var G=R(s);r=T(G,"DIV",{}),R(r).forEach(v),c=F(G),o=T(G,"DIV",{}),R(o).forEach(v),a=F(G),h=T(G,"DIV",{}),R(h).forEach(v),G.forEach(v),_=F(X),d=T(X,"H3",{class:!0});var ae=R(d);u=q(ae,g),ae.forEach(v),X.forEach(v),f=F(H),P&&P.l(H),H.forEach(v),m=F(V),z&&z.l(V),S=F(V),C&&C.l(V),V.forEach(v),D.forEach(v),this.h()},h(){k(s,"class","burger-menu mr-3"),k(d,"class","flex-grow"),k(n,"class","flex flex-row items-center"),k(i,"class","flex flex-row justify-between mb-2"),k(l,"class","p-4 max-h-screen flex flex-col"),k(e,"class","w-screen md:w-10/12 lg:w-2/3 xl:w-1/2 2xl:w-5/12 3xl:w-1/3 4xl:w-1/4 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen")},m(L,D){J(L,e,D),p(e,l),p(l,i),p(i,n),p(n,s),p(s,r),p(s,c),p(s,o),p(s,a),p(s,h),p(n,_),p(n,d),p(d,u),p(i,f),P&&P.m(i,null),p(l,m),z&&z.m(l,null),p(l,S),C&&C.m(l,null),y=!0,A||(O=M(s,"click",t[44]),A=!0)},p(L,D){(!y||D[0]&8192)&&g!==(g=L[13]?"Results":"Timeless Jewel")&&Re(u,g),L[17]?P?P.p(L,D):(P=il(L),P.c(),P.m(i,null)):P&&(P.d(1),P=null),L[13]?z&&(Oe(),Q(z,1,1,()=>{z=null}),De()):z?(z.p(L,D),D[0]&8192&&Y(z,1)):(z=rl(L),z.c(),Y(z,1),z.m(l,S)),L[17]&&L[13]?C?(C.p(L,D),D[0]&139264&&Y(C,1)):(C=pl(L),C.c(),Y(C,1),C.m(l,null)):C&&(Oe(),Q(C,1,1,()=>{C=null}),De())},i(L){y||(Y(z),Y(C),y=!0)},o(L){Q(z),Q(C),y=!1},d(L){L&&v(e),P&&P.d(),z&&z.d(),C&&C.d(),A=!1,O()}}}function il(t){let e,l,i,n=t[13]?"Config":"Results",s,r,c,o=t[13]&&nl(t);return{c(){e=E("div"),o&&o.c(),l=B(),i=E("button"),s=j(n),this.h()},l(a){e=T(a,"DIV",{class:!0});var h=R(e);o&&o.l(h),l=F(h),i=T(h,"BUTTON",{class:!0});var _=R(i);s=q(_,n),_.forEach(v),h.forEach(v),this.h()},h(){k(i,"class","bg-neutral-100/20 px-4 p-1 rounded"),k(e,"class","flex flex-row")},m(a,h){J(a,e,h),o&&o.m(e,null),p(e,l),p(e,i),p(i,s),r||(c=M(i,"click",t[47]),r=!0)},p(a,h){a[13]?o?o.p(a,h):(o=nl(a),o.c(),o.m(e,l)):o&&(o.d(1),o=null),h[0]&8192&&n!==(n=a[13]?"Config":"Results")&&Re(s,n)},d(a){a&&v(e),o&&o.d(),r=!1,c()}}}function nl(t){let e,l,i,n,s,r,c,o,a;return{c(){e=E("button"),l=j("Trade"),n=B(),s=E("button"),r=j("Grouped"),this.h()},l(h){e=T(h,"BUTTON",{class:!0});var _=R(e);l=q(_,"Trade"),_.forEach(v),n=F(h),s=T(h,"BUTTON",{class:!0});var d=R(s);r=q(d,"Grouped"),d.forEach(v),this.h()},h(){k(e,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2"),e.disabled=i=!t[17],k(s,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2 svelte-9h6fz6"),s.disabled=c=!t[17],be(s,"grouped",t[5])},m(h,_){J(h,e,_),p(e,l),J(h,n,_),J(h,s,_),p(s,r),o||(a=[M(e,"click",t[45]),M(s,"click",t[46])],o=!0)},p(h,_){_[0]&131072&&i!==(i=!h[17])&&(e.disabled=i),_[0]&131072&&c!==(c=!h[17])&&(s.disabled=c),_[0]&32&&be(s,"grouped",h[5])},d(h){h&&v(e),h&&v(n),h&&v(s),o=!1,We(a)}}}function rl(t){let e,l,i,n,s;function r(a){t[48](a)}let c={items:t[25]};t[0]!==void 0&&(c.value=t[0]),e=new kt({props:c}),et.push(()=>Rt(e,"value",r)),e.$on("change",t[31]);let o=t[0]&&ol(t);return{c(){Ve(e.$$.fragment),i=B(),o&&o.c(),n=ke()},l(a){Je(e.$$.fragment,a),i=F(a),o&&o.l(a),n=ke()},m(a,h){je(e,a,h),J(a,i,h),o&&o.m(a,h),J(a,n,h),s=!0},p(a,h){const _={};!l&&h[0]&1&&(l=!0,_.value=a[0],At(()=>l=!1)),e.$set(_),a[0]?o?(o.p(a,h),h[0]&1&&Y(o,1)):(o=ol(a),o.c(),Y(o,1),o.m(n.parentNode,n)):o&&(Oe(),Q(o,1,1,()=>{o=null}),De())},i(a){s||(Y(e.$$.fragment,a),Y(o),s=!0)},o(a){Q(e.$$.fragment,a),Q(o),s=!1},d(a){qe(e,a),a&&v(i),o&&o.d(a),a&&v(n)}}}function ol(t){let e,l,i,n,s,r,c,o=t[1]&&Object.keys(te.TimelessJewelConquerors[t[0].value]).indexOf(t[1].value)>=0,a,h;function _(u){t[49](u)}let d={items:t[24]};t[1]!==void 0&&(d.value=t[1]),s=new kt({props:d}),et.push(()=>Rt(s,"value",_)),s.$on("change",t[26]);let g=o&&al(t);return{c(){e=E("div"),l=E("h3"),i=j("Conqueror"),n=B(),Ve(s.$$.fragment),c=B(),g&&g.c(),a=ke(),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=R(e);l=T(f,"H3",{class:!0});var m=R(l);i=q(m,"Conqueror"),m.forEach(v),n=F(f),Je(s.$$.fragment,f),f.forEach(v),c=F(u),g&&g.l(u),a=ke(),this.h()},h(){k(l,"class","mb-2"),k(e,"class","mt-4")},m(u,f){J(u,e,f),p(e,l),p(l,i),p(e,n),je(s,e,null),J(u,c,f),g&&g.m(u,f),J(u,a,f),h=!0},p(u,f){const m={};f[0]&16777216&&(m.items=u[24]),!r&&f[0]&2&&(r=!0,m.value=u[1],At(()=>r=!1)),s.$set(m),f[0]&3&&(o=u[1]&&Object.keys(te.TimelessJewelConquerors[u[0].value]).indexOf(u[1].value)>=0),o?g?(g.p(u,f),f[0]&3&&Y(g,1)):(g=al(u),g.c(),Y(g,1),g.m(a.parentNode,a)):g&&(Oe(),Q(g,1,1,()=>{g=null}),De())},i(u){h||(Y(s.$$.fragment,u),Y(g),h=!0)},o(u){Q(s.$$.fragment,u),Q(g),h=!1},d(u){u&&v(e),qe(s),u&&v(c),g&&g.d(u),u&&v(a)}}}function al(t){let e,l,i,n,s,r,c,o,a,h,_,d,g,u;const f=[zs,Ps],m=[];function S(A,O){return A[10]==="seed"?0:A[10]==="stats"?1:-1}~(o=S(t))&&(a=m[o]=f[o](t));let y=!t[3]&&gl();return{c(){e=E("div"),l=E("button"),i=j("Enter Seed"),n=B(),s=E("button"),r=j("Select Stats"),c=B(),a&&a.c(),h=B(),y&&y.c(),_=ke(),this.h()},l(A){e=T(A,"DIV",{class:!0});var O=R(e);l=T(O,"BUTTON",{class:!0});var P=R(l);i=q(P,"Enter Seed"),P.forEach(v),n=F(O),s=T(O,"BUTTON",{class:!0});var z=R(s);r=q(z,"Select Stats"),z.forEach(v),O.forEach(v),c=F(A),a&&a.l(A),h=F(A),y&&y.l(A),_=ke(),this.h()},h(){k(l,"class","selection-button svelte-9h6fz6"),be(l,"selected",t[10]==="seed"),k(s,"class","selection-button svelte-9h6fz6"),be(s,"selected",t[10]==="stats"),k(e,"class","mt-4 w-full flex flex-row")},m(A,O){J(A,e,O),p(e,l),p(l,i),p(e,n),p(e,s),p(s,r),J(A,c,O),~o&&m[o].m(A,O),J(A,h,O),y&&y.m(A,O),J(A,_,O),d=!0,g||(u=[M(l,"click",t[50]),M(s,"click",t[51])],g=!0)},p(A,O){(!d||O[0]&1024)&&be(l,"selected",A[10]==="seed"),(!d||O[0]&1024)&&be(s,"selected",A[10]==="stats");let P=o;o=S(A),o===P?~o&&m[o].p(A,O):(a&&(Oe(),Q(m[P],1,1,()=>{m[P]=null}),De()),~o?(a=m[o],a?a.p(A,O):(a=m[o]=f[o](A),a.c()),Y(a,1),a.m(h.parentNode,h)):a=null),A[3]?y&&(y.d(1),y=null):y||(y=gl(),y.c(),y.m(_.parentNode,_))},i(A){d||(Y(a),d=!0)},o(A){Q(a),d=!1},d(A){A&&v(e),A&&v(c),~o&&m[o].d(A),A&&v(h),y&&y.d(A),A&&v(_),g=!1,We(u)}}}function Ps(t){let e,l,i,n,s,r,c=Object.keys(t[4]).length>0,o,a,h={items:t[22]};s=new kt({props:h}),t[59](s),s.$on("change",t[29]);let _=c&&ul(t);return{c(){e=E("div"),l=E("h3"),i=j("Add Stat"),n=B(),Ve(s.$$.fragment),r=B(),_&&_.c(),o=ke(),this.h()},l(d){e=T(d,"DIV",{class:!0});var g=R(e);l=T(g,"H3",{class:!0});var u=R(l);i=q(u,"Add Stat"),u.forEach(v),n=F(g),Je(s.$$.fragment,g),g.forEach(v),r=F(d),_&&_.l(d),o=ke(),this.h()},h(){k(l,"class","mb-2"),k(e,"class","mt-4")},m(d,g){J(d,e,g),p(e,l),p(l,i),p(e,n),je(s,e,null),J(d,r,g),_&&_.m(d,g),J(d,o,g),a=!0},p(d,g){const u={};g[0]&4194304&&(u.items=d[22]),s.$set(u),g[0]&16&&(c=Object.keys(d[4]).length>0),c?_?_.p(d,g):(_=ul(d),_.c(),_.m(o.parentNode,o)):_&&(_.d(1),_=null)},i(d){a||(Y(s.$$.fragment,d),a=!0)},o(d){Q(s.$$.fragment,d),a=!1},d(d){d&&v(e),t[59](null),qe(s),d&&v(r),_&&_.d(d),d&&v(o)}}}function zs(t){let e,l,i,n,s,r,c,o,a,h,_,d,g,u=(t[2]<te.TimelessJewelSeedRanges[t[0].value].Min||t[2]>te.TimelessJewelSeedRanges[t[0].value].Max)&&cl(t),f=t[2]>=te.TimelessJewelSeedRanges[t[0].value].Min&&t[2]<=te.TimelessJewelSeedRanges[t[0].value].Max&&hl(t);return{c(){e=E("div"),l=E("h3"),i=j("Seed"),n=B(),s=E("input"),o=B(),u&&u.c(),a=B(),f&&f.c(),h=ke(),this.h()},l(m){e=T(m,"DIV",{class:!0});var S=R(e);l=T(S,"H3",{class:!0});var y=R(l);i=q(y,"Seed"),y.forEach(v),n=F(S),s=T(S,"INPUT",{type:!0,min:!0,max:!0}),o=F(S),u&&u.l(S),S.forEach(v),a=F(m),f&&f.l(m),h=ke(),this.h()},h(){k(l,"class","mb-2"),k(s,"type","number"),k(s,"min",r=te.TimelessJewelSeedRanges[t[0].value].Min),k(s,"max",c=te.TimelessJewelSeedRanges[t[0].value].Max),k(e,"class","mt-4")},m(m,S){J(m,e,S),p(e,l),p(l,i),p(e,n),p(e,s),Ze(s,t[2]),p(e,o),u&&u.m(e,null),J(m,a,S),f&&f.m(m,S),J(m,h,S),_=!0,d||(g=[M(s,"input",t[52]),M(s,"blur",t[26])],d=!0)},p(m,S){(!_||S[0]&1&&r!==(r=te.TimelessJewelSeedRanges[m[0].value].Min))&&k(s,"min",r),(!_||S[0]&1&&c!==(c=te.TimelessJewelSeedRanges[m[0].value].Max))&&k(s,"max",c),S[0]&4&&Qe(s.value)!==m[2]&&Ze(s,m[2]),m[2]<te.TimelessJewelSeedRanges[m[0].value].Min||m[2]>te.TimelessJewelSeedRanges[m[0].value].Max?u?u.p(m,S):(u=cl(m),u.c(),u.m(e,null)):u&&(u.d(1),u=null),m[2]>=te.TimelessJewelSeedRanges[m[0].value].Min&&m[2]<=te.TimelessJewelSeedRanges[m[0].value].Max?f?(f.p(m,S),S[0]&5&&Y(f,1)):(f=hl(m),f.c(),Y(f,1),f.m(h.parentNode,h)):f&&(Oe(),Q(f,1,1,()=>{f=null}),De())},i(m){_||(Y(f),_=!0)},o(m){Q(f),_=!1},d(m){m&&v(e),u&&u.d(),m&&v(a),f&&f.d(m),m&&v(h),d=!1,We(g)}}}function ul(t){let e,l,i,n,s,r,c,o,a,h,_,d,g,u,f,m,S,y,A,O,P,z,C,L,D,V,H,X,G,ae,we,ue=Object.keys(t[4]),Z=[];for(let U=0;U<ue.length;U+=1)Z[U]=fl(el(t,ue,U));function Ae(U,ne){return U[15]?Ls:Cs}let Ie=Ae(t),de=Ie(t);return{c(){e=E("div");for(let U=0;U<Z.length;U+=1)Z[U].c();l=B(),i=E("div"),n=E("div"),s=E("div"),r=j("Min Total Weight:"),c=B(),o=E("input"),a=B(),h=E("div"),_=E("div"),d=E("button"),g=j("Select All"),f=B(),m=E("button"),S=j("Notables"),A=B(),O=E("button"),P=j("Passives"),C=B(),L=E("button"),D=j("Deselect"),H=B(),X=E("div"),G=E("button"),de.c(),this.h()},l(U){e=T(U,"DIV",{class:!0});var ne=R(e);for(let oe=0;oe<Z.length;oe+=1)Z[oe].l(ne);ne.forEach(v),l=F(U),i=T(U,"DIV",{class:!0});var re=R(i);n=T(re,"DIV",{class:!0});var N=R(n);s=T(N,"DIV",{class:!0});var b=R(s);r=q(b,"Min Total Weight:"),b.forEach(v),c=F(N),o=T(N,"INPUT",{type:!0,min:!0}),N.forEach(v),re.forEach(v),a=F(U),h=T(U,"DIV",{class:!0});var ie=R(h);_=T(ie,"DIV",{class:!0});var le=R(_);d=T(le,"BUTTON",{class:!0});var se=R(d);g=q(se,"Select All"),se.forEach(v),f=F(le),m=T(le,"BUTTON",{class:!0});var me=R(m);S=q(me,"Notables"),me.forEach(v),A=F(le),O=T(le,"BUTTON",{class:!0});var ee=R(O);P=q(ee,"Passives"),ee.forEach(v),C=F(le),L=T(le,"BUTTON",{class:!0});var pe=R(L);D=q(pe,"Deselect"),pe.forEach(v),le.forEach(v),H=F(ie),X=T(ie,"DIV",{class:!0});var _e=R(X);G=T(_e,"BUTTON",{class:!0});var Ce=R(G);de.l(Ce),Ce.forEach(v),_e.forEach(v),ie.forEach(v),this.h()},h(){k(e,"class","mt-4 flex flex-col overflow-auto min-h-[100px]"),k(s,"class","mr-2 min-w-fit"),k(o,"type","number"),k(o,"min","0"),k(n,"class","flex flex-row items-center"),k(i,"class","flex flex-col mt-2"),k(d,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),d.disabled=u=t[15]||t[11].size==0,k(m,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),m.disabled=y=t[15]||t[11].size==0,k(O,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),O.disabled=z=t[15]||t[11].size==0,k(L,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow"),L.disabled=V=t[15]||t[11].size>=t[9].length,k(_,"class","flex flex-row"),k(G,"class","p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"),G.disabled=t[15],k(X,"class","flex flex-row mt-2"),k(h,"class","flex flex-col mt-4")},m(U,ne){J(U,e,ne);for(let re=0;re<Z.length;re+=1)Z[re]&&Z[re].m(e,null);J(U,l,ne),J(U,i,ne),p(i,n),p(n,s),p(s,r),p(n,c),p(n,o),Ze(o,t[14]),J(U,a,ne),J(U,h,ne),p(h,_),p(_,d),p(d,g),p(_,f),p(_,m),p(m,S),p(_,A),p(_,O),p(O,P),p(_,C),p(_,L),p(L,D),p(h,H),p(h,X),p(X,G),de.m(G,null),ae||(we=[M(o,"input",t[63]),M(d,"click",t[34]),M(m,"click",t[35]),M(O,"click",t[36]),M(L,"click",t[37]),M(G,"click",t[64])],ae=!0)},p(U,ne){if(ne[0]&1073741840){ue=Object.keys(U[4]);let re;for(re=0;re<ue.length;re+=1){const N=el(U,ue,re);Z[re]?Z[re].p(N,ne):(Z[re]=fl(N),Z[re].c(),Z[re].m(e,null))}for(;re<Z.length;re+=1)Z[re].d(1);Z.length=ue.length}ne[0]&16384&&Qe(o.value)!==U[14]&&Ze(o,U[14]),ne[0]&34816&&u!==(u=U[15]||U[11].size==0)&&(d.disabled=u),ne[0]&34816&&y!==(y=U[15]||U[11].size==0)&&(m.disabled=y),ne[0]&34816&&z!==(z=U[15]||U[11].size==0)&&(O.disabled=z),ne[0]&35328&&V!==(V=U[15]||U[11].size>=U[9].length)&&(L.disabled=V),Ie===(Ie=Ae(U))&&de?de.p(U,ne):(de.d(1),de=Ie(U),de&&(de.c(),de.m(G,null))),ne[0]&32768&&(G.disabled=U[15])},d(U){U&&v(e),tt(Z,U),U&&v(l),U&&v(i),U&&v(a),U&&v(h),de.d(),ae=!1,We(we)}}}function fl(t){let e,l,i,n,s,r,c=at(t[4][t[77]].id)+"",o,a,h,_,d,g,u,f,m,S,y,A,O,P,z,C,L;function D(){return t[60](t[77])}function V(){t[61].call(f,t[77])}function H(){t[62].call(P,t[77])}return{c(){e=E("div"),l=E("div"),i=E("button"),n=j("-"),s=B(),r=E("span"),o=j(c),a=B(),h=E("div"),_=E("div"),d=E("div"),g=j("Min:"),u=B(),f=E("input"),m=B(),S=E("div"),y=E("div"),A=j("Weight:"),O=B(),P=E("input"),z=B(),this.h()},l(X){e=T(X,"DIV",{class:!0});var G=R(e);l=T(G,"DIV",{});var ae=R(l);i=T(ae,"BUTTON",{class:!0});var we=R(i);n=q(we,"-"),we.forEach(v),s=F(ae),r=T(ae,"SPAN",{});var ue=R(r);o=q(ue,c),ue.forEach(v),ae.forEach(v),a=F(G),h=T(G,"DIV",{class:!0});var Z=R(h);_=T(Z,"DIV",{class:!0});var Ae=R(_);d=T(Ae,"DIV",{class:!0});var Ie=R(d);g=q(Ie,"Min:"),Ie.forEach(v),u=F(Ae),f=T(Ae,"INPUT",{type:!0,min:!0}),Ae.forEach(v),m=F(Z),S=T(Z,"DIV",{class:!0});var de=R(S);y=T(de,"DIV",{class:!0});var U=R(y);A=q(U,"Weight:"),U.forEach(v),O=F(de),P=T(de,"INPUT",{type:!0,min:!0}),de.forEach(v),Z.forEach(v),z=F(G),G.forEach(v),this.h()},h(){k(i,"class","p-2 px-4 bg-red-500/40 rounded mr-2"),k(d,"class","mr-2"),k(f,"type","number"),k(f,"min","0"),k(_,"class","mr-4 flex flex-row items-center"),k(y,"class","mr-2"),k(P,"type","number"),k(P,"min","0"),k(S,"class","flex flex-row items-center"),k(h,"class","mt-2 flex flex-row"),k(e,"class","mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4")},m(X,G){J(X,e,G),p(e,l),p(l,i),p(i,n),p(l,s),p(l,r),p(r,o),p(e,a),p(e,h),p(h,_),p(_,d),p(d,g),p(_,u),p(_,f),Ze(f,t[4][t[77]].min),p(h,m),p(h,S),p(S,y),p(y,A),p(S,O),p(S,P),Ze(P,t[4][t[77]].weight),p(e,z),C||(L=[M(i,"click",D),M(f,"input",V),M(P,"input",H)],C=!0)},p(X,G){t=X,G[0]&16&&c!==(c=at(t[4][t[77]].id)+"")&&Re(o,c),G[0]&16&&Qe(f.value)!==t[4][t[77]].min&&Ze(f,t[4][t[77]].min),G[0]&16&&Qe(P.value)!==t[4][t[77]].weight&&Ze(P,t[4][t[77]].weight)},d(X){X&&v(e),C=!1,We(L)}}}function Cs(t){let e;return{c(){e=j("Search")},l(l){e=q(l,"Search")},m(l,i){J(l,e,i)},p:Ge,d(l){l&&v(e)}}}function Ls(t){let e,l,i=te.TimelessJewelSeedRanges[t[0].value].Max+"",n;return{c(){e=j(t[16]),l=j(" / "),n=j(i)},l(s){e=q(s,t[16]),l=q(s," / "),n=q(s,i)},m(s,r){J(s,e,r),J(s,l,r),J(s,n,r)},p(s,r){r[0]&65536&&Re(e,s[16]),r[0]&1&&i!==(i=te.TimelessJewelSeedRanges[s[0].value].Max+"")&&Re(n,i)},d(s){s&&v(e),s&&v(l),s&&v(n)}}}function cl(t){let e,l,i=te.TimelessJewelSeedRanges[t[0].value].Min+"",n,s,r=te.TimelessJewelSeedRanges[t[0].value].Max+"",c;return{c(){e=E("div"),l=j("Seed must be between "),n=j(i),s=j(`
                      and `),c=j(r),this.h()},l(o){e=T(o,"DIV",{class:!0});var a=R(e);l=q(a,"Seed must be between "),n=q(a,i),s=q(a,`
                      and `),c=q(a,r),a.forEach(v),this.h()},h(){k(e,"class","mt-2")},m(o,a){J(o,e,a),p(e,l),p(e,n),p(e,s),p(e,c)},p(o,a){a[0]&1&&i!==(i=te.TimelessJewelSeedRanges[o[0].value].Min+"")&&Re(n,i),a[0]&1&&r!==(r=te.TimelessJewelSeedRanges[o[0].value].Max+"")&&Re(c,r)},d(o){o&&v(e)}}}function hl(t){let e,l,i,n,s,r,c,o,a,h,_,d,g,u,f,m,S,y,A,O;function P(V){t[53](V)}let z={items:t[40]};t[6]!==void 0&&(z.value=t[6]),r=new kt({props:z}),et.push(()=>Rt(r,"value",P));function C(V,H){return V[8]?Ns:Os}let L=C(t),D=L(t);return{c(){e=E("div"),l=E("div"),i=E("h3"),n=j("Sort Order"),s=B(),Ve(r.$$.fragment),o=B(),a=E("div"),h=E("button"),_=j("Colors"),d=B(),g=E("div"),u=E("button"),f=j("Split"),m=B(),D.c(),S=ke(),this.h()},l(V){e=T(V,"DIV",{class:!0});var H=R(e);l=T(H,"DIV",{class:!0});var X=R(l);i=T(X,"H3",{class:!0});var G=R(i);n=q(G,"Sort Order"),G.forEach(v),s=F(X),Je(r.$$.fragment,X),X.forEach(v),o=F(H),a=T(H,"DIV",{class:!0});var ae=R(a);h=T(ae,"BUTTON",{class:!0});var we=R(h);_=q(we,"Colors"),we.forEach(v),ae.forEach(v),d=F(H),g=T(H,"DIV",{class:!0});var ue=R(g);u=T(ue,"BUTTON",{class:!0});var Z=R(u);f=q(Z,"Split"),Z.forEach(v),ue.forEach(v),H.forEach(v),m=F(V),D.l(V),S=ke(),this.h()},h(){k(i,"class","mb-2"),k(l,"class","flex-grow"),k(h,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-9h6fz6"),be(h,"selected",t[7]),k(a,"class","ml-2"),k(u,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-9h6fz6"),be(u,"selected",t[8]),k(g,"class","ml-2"),k(e,"class","flex flex-row mt-4 items-end")},m(V,H){J(V,e,H),p(e,l),p(l,i),p(i,n),p(l,s),je(r,l,null),p(e,o),p(e,a),p(a,h),p(h,_),p(e,d),p(e,g),p(g,u),p(u,f),J(V,m,H),D.m(V,H),J(V,S,H),y=!0,A||(O=[M(h,"click",t[54]),M(u,"click",t[55])],A=!0)},p(V,H){const X={};!c&&H[0]&64&&(c=!0,X.value=V[6],At(()=>c=!1)),r.$set(X),(!y||H[0]&128)&&be(h,"selected",V[7]),(!y||H[0]&256)&&be(u,"selected",V[8]),L===(L=C(V))&&D?D.p(V,H):(D.d(1),D=L(V),D&&(D.c(),D.m(S.parentNode,S)))},i(V){y||(Y(r.$$.fragment,V),y=!0)},o(V){Q(r.$$.fragment,V),y=!1},d(V){V&&v(e),qe(r),V&&v(m),D.d(V),V&&v(S),A=!1,We(O)}}}function Ns(t){let e,l,i,n,s,r,c,o,a,h,_=t[39](t[38](t[23],t[7],"notables"),t[6].value),d=[];for(let f=0;f<_.length;f+=1)d[f]=dl(ll(t,_,f));let g=t[39](t[38](t[23],t[7],"passives"),t[6].value),u=[];for(let f=0;f<g.length;f+=1)u[f]=ml(tl(t,g,f));return{c(){e=E("div"),l=E("h3"),i=j("Notables"),n=B(),s=E("ul");for(let f=0;f<d.length;f+=1)d[f].c();r=B(),c=E("h3"),o=j("Smalls"),a=B(),h=E("ul");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=T(f,"DIV",{class:!0});var m=R(e);l=T(m,"H3",{});var S=R(l);i=q(S,"Notables"),S.forEach(v),n=F(m),s=T(m,"UL",{class:!0});var y=R(s);for(let P=0;P<d.length;P+=1)d[P].l(y);y.forEach(v),r=F(m),c=T(m,"H3",{class:!0});var A=R(c);o=q(A,"Smalls"),A.forEach(v),a=F(m),h=T(m,"UL",{class:!0});var O=R(h);for(let P=0;P<u.length;P+=1)u[P].l(O);O.forEach(v),m.forEach(v),this.h()},h(){k(s,"class","mt-1 svelte-9h6fz6"),be(s,"rainbow",t[7]),k(c,"class","mt-2"),k(h,"class","mt-1 svelte-9h6fz6"),be(h,"rainbow",t[7]),k(e,"class","overflow-auto mt-4")},m(f,m){J(f,e,m),p(e,l),p(l,i),p(e,n),p(e,s);for(let S=0;S<d.length;S+=1)d[S]&&d[S].m(s,null);p(e,r),p(e,c),p(c,o),p(e,a),p(e,h);for(let S=0;S<u.length;S+=1)u[S]&&u[S].m(h,null)},p(f,m){if(m[0]&8388804|m[1]&388){_=f[39](f[38](f[23],f[7],"notables"),f[6].value);let S;for(S=0;S<_.length;S+=1){const y=ll(f,_,S);d[S]?d[S].p(y,m):(d[S]=dl(y),d[S].c(),d[S].m(s,null))}for(;S<d.length;S+=1)d[S].d(1);d.length=_.length}if(m[0]&128&&be(s,"rainbow",f[7]),m[0]&8388804|m[1]&388){g=f[39](f[38](f[23],f[7],"passives"),f[6].value);let S;for(S=0;S<g.length;S+=1){const y=tl(f,g,S);u[S]?u[S].p(y,m):(u[S]=ml(y),u[S].c(),u[S].m(h,null))}for(;S<u.length;S+=1)u[S].d(1);u.length=g.length}m[0]&128&&be(h,"rainbow",f[7])},d(f){f&&v(e),tt(d,f),tt(u,f)}}}function Os(t){let e,l=t[39](t[38](t[23],t[7],"all"),t[6].value),i=[];for(let n=0;n<l.length;n+=1)i[n]=_l(sl(t,l,n));return{c(){e=E("ul");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=T(n,"UL",{class:!0});var s=R(e);for(let r=0;r<i.length;r+=1)i[r].l(s);s.forEach(v),this.h()},h(){k(e,"class","mt-4 overflow-auto svelte-9h6fz6"),be(e,"rainbow",t[7])},m(n,s){J(n,e,s);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(n,s){if(s[0]&8388804|s[1]&388){l=n[39](n[38](n[23],n[7],"all"),n[6].value);let r;for(r=0;r<l.length;r+=1){const c=sl(n,l,r);i[r]?i[r].p(c,s):(i[r]=_l(c),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=l.length}s[0]&128&&be(e,"rainbow",n[7])},d(n){n&&v(e),tt(i,n)}}}function dl(t){let e,l,i,n=t[70].passives.length+"",s,r,c,o,a=t[70].stat+"",h,_,d;function g(){return t[57](t[70])}return{c(){e=E("li"),l=E("span"),i=j("("),s=j(n),r=j(")"),c=B(),o=E("span"),h=B(),this.h()},l(u){e=T(u,"LI",{class:!0});var f=R(e);l=T(f,"SPAN",{class:!0});var m=R(l);i=q(m,"("),s=q(m,n),r=q(m,")"),m.forEach(v),c=F(f),o=T(f,"SPAN",{class:!0});var S=R(o);S.forEach(v),h=F(f),f.forEach(v),this.h()},h(){k(l,"class","font-bold"),be(l,"text-white",(xe[t[70].id]||0)<3),k(o,"class","text-white"),k(e,"class","cursor-pointer")},m(u,f){J(u,e,f),p(e,l),p(l,i),p(l,s),p(l,r),p(e,c),p(e,o),o.innerHTML=a,p(e,h),_||(d=M(e,"click",g),_=!0)},p(u,f){t=u,f[0]&8388800&&n!==(n=t[70].passives.length+"")&&Re(s,n),f[0]&8388800|f[1]&384&&be(l,"text-white",(xe[t[70].id]||0)<3),f[0]&8388800&&a!==(a=t[70].stat+"")&&(o.innerHTML=a)},d(u){u&&v(e),_=!1,d()}}}function ml(t){let e,l,i,n=t[70].passives.length+"",s,r,c,o,a=t[70].stat+"",h,_,d;function g(){return t[58](t[70])}return{c(){e=E("li"),l=E("span"),i=j("("),s=j(n),r=j(")"),c=B(),o=E("span"),h=B(),this.h()},l(u){e=T(u,"LI",{class:!0});var f=R(e);l=T(f,"SPAN",{class:!0});var m=R(l);i=q(m,"("),s=q(m,n),r=q(m,")"),m.forEach(v),c=F(f),o=T(f,"SPAN",{class:!0});var S=R(o);S.forEach(v),h=F(f),f.forEach(v),this.h()},h(){k(l,"class","font-bold"),be(l,"text-white",(xe[t[70].id]||0)<3),k(o,"class","text-white"),k(e,"class","cursor-pointer")},m(u,f){J(u,e,f),p(e,l),p(l,i),p(l,s),p(l,r),p(e,c),p(e,o),o.innerHTML=a,p(e,h),_||(d=M(e,"click",g),_=!0)},p(u,f){t=u,f[0]&8388800&&n!==(n=t[70].passives.length+"")&&Re(s,n),f[0]&8388800|f[1]&384&&be(l,"text-white",(xe[t[70].id]||0)<3),f[0]&8388800&&a!==(a=t[70].stat+"")&&(o.innerHTML=a)},d(u){u&&v(e),_=!1,d()}}}function _l(t){let e,l,i,n=t[70].passives.length+"",s,r,c,o,a=t[70].stat+"",h,_,d;function g(){return t[56](t[70])}return{c(){e=E("li"),l=E("span"),i=j("("),s=j(n),r=j(")"),c=B(),o=E("span"),h=B(),this.h()},l(u){e=T(u,"LI",{class:!0});var f=R(e);l=T(f,"SPAN",{class:!0});var m=R(l);i=q(m,"("),s=q(m,n),r=q(m,")"),m.forEach(v),c=F(f),o=T(f,"SPAN",{class:!0});var S=R(o);S.forEach(v),h=F(f),f.forEach(v),this.h()},h(){k(l,"class","font-bold"),be(l,"text-white",(xe[t[70].id]||0)<3),k(o,"class","text-white"),k(e,"class","cursor-pointer")},m(u,f){J(u,e,f),p(e,l),p(l,i),p(l,s),p(l,r),p(e,c),p(e,o),o.innerHTML=a,p(e,h),_||(d=M(e,"click",g),_=!0)},p(u,f){t=u,f[0]&8388800&&n!==(n=t[70].passives.length+"")&&Re(s,n),f[0]&8388800|f[1]&384&&be(l,"text-white",(xe[t[70].id]||0)<3),f[0]&8388800&&a!==(a=t[70].stat+"")&&(o.innerHTML=a)},d(u){u&&v(e),_=!1,d()}}}function gl(t){let e,l;return{c(){e=E("h2"),l=j("Click on a jewel socket"),this.h()},l(i){e=T(i,"H2",{class:!0});var n=R(e);l=q(n,"Click on a jewel socket"),n.forEach(v),this.h()},h(){k(e,"class","mt-4")},m(i,n){J(i,e,n),p(e,l)},d(i){i&&v(e)}}}function pl(t){let e,l;return e=new Ts({props:{searchResults:t[17],groupResults:t[5],highlight:t[33],jewel:t[18],conqueror:t[19]}}),{c(){Ve(e.$$.fragment)},l(i){Je(e.$$.fragment,i)},m(i,n){je(e,i,n),l=!0},p(i,n){const s={};n[0]&131072&&(s.searchResults=i[17]),n[0]&32&&(s.groupResults=i[5]),n[0]&262144&&(s.jewel=i[18]),n[0]&524288&&(s.conqueror=i[19]),e.$set(s)},i(i){l||(Y(e.$$.fragment,i),l=!0)},o(i){Q(e.$$.fragment,i),l=!1},d(i){qe(e,i)}}}function Ds(t){let e,l,i,n,s,r,c;const o=[Ms,As],a=[];function h(_,d){return _[21]?1:0}return e=h(t),l=a[e]=o[e](t),{c(){l.c(),i=B(),n=E("div"),s=E("a"),r=j("Source (Github)"),this.h()},l(_){l.l(_),i=F(_),n=T(_,"DIV",{class:!0});var d=R(n);s=T(d,"A",{href:!0,target:!0,rel:!0});var g=R(s);r=q(g,"Source (Github)"),g.forEach(v),d.forEach(v),this.h()},h(){k(s,"href","https://github.com/Vilsol/timeless-jewels"),k(s,"target","_blank"),k(s,"rel","noopener"),k(n,"class","text-orange-500 absolute bottom-0 right-0 m-2")},m(_,d){a[e].m(_,d),J(_,i,d),J(_,n,d),p(n,s),p(s,r),c=!0},p(_,d){let g=e;e=h(_),e===g?a[e].p(_,d):(Oe(),Q(a[g],1,1,()=>{a[g]=null}),De(),l=a[e],l?l.p(_,d):(l=a[e]=o[e](_),l.c()),Y(l,1),l.m(i.parentNode,i))},i(_){c||(Y(l),c=!0)},o(_){Q(l),c=!1},d(_){a[e].d(_),_&&v(i),_&&v(n)}}}function Vs(t){var s,r;let e,l,i,n;return e=new us({props:{clickNode:t[28],circledNode:t[3],selectedJewel:(s=t[0])==null?void 0:s.value,selectedConqueror:(r=t[1])==null?void 0:r.value,highlighted:t[20],seed:t[2],highlightJewels:!t[3],disabled:[...t[11]],$$slots:{default:[Ds]},$$scope:{ctx:t}}}),{c(){Ve(e.$$.fragment)},l(c){Je(e.$$.fragment,c)},m(c,o){je(e,c,o),l=!0,i||(n=M(Rs,"paste",t[41]),i=!0)},p(c,o){var h,_;const a={};o[0]&8&&(a.circledNode=c[3]),o[0]&1&&(a.selectedJewel=(h=c[0])==null?void 0:h.value),o[0]&2&&(a.selectedConqueror=(_=c[1])==null?void 0:_.value),o[0]&1048576&&(a.highlighted=c[20]),o[0]&4&&(a.seed=c[2]),o[0]&8&&(a.highlightJewels=!c[3]),o[0]&2048&&(a.disabled=[...c[11]]),o[0]&32505855|o[2]&262144&&(a.$$scope={dirty:o,ctx:c}),e.$set(a)},i(c){l||(Y(e.$$.fragment,c),l=!0)},o(c){Q(e.$$.fragment,c),l=!1},d(c){qe(e,c),i=!1,n()}}}function Js(t,e,l){let i,n,s,r,c,o;wl(t,Fl,I=>l(66,o=I));const a=o.url.searchParams,h=Object.keys(te.TimelessJewels).map(I=>({value:parseInt(I),label:te.TimelessJewels[I]}));let _=a.has("jewel")?h.find(I=>I.value==a.get("jewel")):void 0,d=a.has("conqueror")?{value:a.get("conqueror"),label:a.get("conqueror")}:void 0,g=a.has("seed")?parseInt(a.get("seed")):0,u=a.has("location")?parseInt(a.get("location")):void 0,f={};a.has("stat")&&a.getAll("stat").forEach(I=>{const $=parseInt(I);l(4,f[$]={weight:1,min:0,id:$},f)});let m=a.has("mode")?a.get("mode"):"";const S=()=>{const I=new URL(window.location.origin+window.location.pathname);_&&I.searchParams.append("jewel",_.value.toString()),d&&I.searchParams.append("conqueror",d.value),g&&I.searchParams.append("seed",g.toString()),u&&I.searchParams.append("location",u.toString()),m&&I.searchParams.append("mode",m),Object.keys(f).forEach($=>{I.searchParams.append("stat",$.toString())}),Bl(I.toString())},y=I=>{l(10,m=I),S()};let A=new Set;const O=I=>{I.isJewelSocket?(l(3,u=I.skill),S()):I.isMastery||(A.has(I.skill)?A.delete(I.skill):A.add(I.skill),l(11,A))},P=JSON.parse(te.PossibleStats);let z;const C=I=>{l(4,f[I.detail.value]={weight:1,min:0,id:I.detail.value},f),l(4,f),z.handleClear(),S()},L=I=>{delete f[I],l(4,f),S()},D=()=>{l(4,f={}),S()};let V=!1,H=0,X=!1,G=0,ae,we=1,ue="";const Z=()=>{if(!u)return;l(18,we=_.value),l(19,ue=d.value),l(15,X=!0),l(17,ae=void 0);const I={jewel:_.value,conqueror:d.value,nodes:n.filter($=>!A.has($.skill)).map($=>te.TreeToPassive[$.skill]).filter($=>!!$).map($=>$.Index),stats:Object.keys(f).map($=>f[$]),minTotalWeight:H};ql.search(I,Ul($=>l(16,G=$))).then($=>{l(17,ae=$),l(15,X=!1),l(13,V=!0)})};let Ae=[];const Ie=(I,$)=>{l(2,g=I),l(20,Ae=$),S()},de=()=>{A.clear(),l(11,A)},U=()=>{n.forEach(I=>{I.isNotable&&A.delete(I.skill)}),l(11,A)},ne=()=>{n.forEach(I=>{I.isNotable||A.delete(I.skill)}),l(11,A)},re=()=>{n.filter(I=>!I.isJewelSocket&&!I.isMastery).forEach(I=>A.add(I.skill)),l(11,A)};let N=localStorage.getItem("groupResults")===null?!0:localStorage.getItem("groupResults")==="true";const b={physical:"#c79d93",cast:"#b3f8fe",fire:"#ff9a77",cold:"#93d8ff",lightning:"#f8cb76",attack:"#da814d",life:"#c96e6e",chaos:"#d8a7d3",unique:"#af6025",critical:"#b2a7d6"},ie=I=>(Object.keys(b).forEach($=>{const ve=b[$];I=I.replace(new RegExp(`(${$}(?:$|\\s))|((?:^|\\s)${$})`,"gi"),`<span style='color: ${ve}; font-weight: bold'>$1$2</span>`)}),I),le=(I,$,ve)=>{const Se={};return I.forEach(ge=>{He.nodes[ge.node].isKeystone||ve!=="all"&&(ve==="notables"&&!He.nodes[ge.node].isNotable||ve==="passives"&&He.nodes[ge.node].isNotable)||(ge.result.AlternatePassiveSkill&&ge.result.AlternatePassiveSkill.StatsKeys&&ge.result.AlternatePassiveSkill.StatsKeys.forEach(Me=>{Se[Me]=[...Se[Me]||[],ge.node]}),ge.result.AlternatePassiveAdditionInformations&&ge.result.AlternatePassiveAdditionInformations.forEach(Me=>{Me.AlternatePassiveAddition.StatsKeys&&Me.AlternatePassiveAddition.StatsKeys.forEach(Ke=>{Se[Ke]=[...Se[Ke]||[],ge.node]})}))}),Object.keys(Se).map(ge=>{const Me=at(parseInt(ge));return{stat:$?ie(Me):Me,rawStat:Me,id:ge,passives:Se[ge]}})},se=(I,$)=>{switch($){case"alphabet":return I.sort((ve,Se)=>ve.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase().localeCompare(Se.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase()));case"count":return I.sort((ve,Se)=>Se.passives.length-ve.passives.length);case"rarity":return I.sort((ve,Se)=>P[_.value][ve.id]-P[_.value][Se.id]);case"value":return I.sort((ve,Se)=>{const ge=xe[ve.id]||0,Me=xe[Se.id]||0;return ge!=Me?Me-ge:P[_.value][ve.id]-P[_.value][Se.id]})}return I},me=[{label:"Count",value:"count"},{label:"Alphabetical",value:"alphabet"},{label:"Rarity",value:"rarity"},{label:"Value",value:"value"}];let ee=me.find(I=>I.value===(localStorage.getItem("sortOrder")||"count")),pe=localStorage.getItem("colored")===null?!0:localStorage.getItem("colored")==="true",_e=localStorage.getItem("split")===null?!0:localStorage.getItem("split")==="true";const Ce=I=>{if(I.type!=="paste")return;const ve=(I.clipboardData||window.clipboardData).getData("text").split(`
`);if(ve.length<14)return;const Se=h.find(Ke=>Ke.label===ve[2]);if(!Se)return;let ge,Me;for(let Ke=10;Ke<ve.length;Ke++)if(Me=Object.keys(te.TimelessJewelConquerors[Se.value]).find(vt=>ve[Ke].indexOf(vt)>=0),Me){const vt=/(\d+)/.exec(ve[Ke]);if(vt.length===0)continue;ge=parseInt(vt[1]);break}!Me||!ge||(l(13,V=!1),l(10,m="seed"),l(2,g=ge),l(0,_=Se),l(1,d={label:Me,value:Me}),S())};let oe=!1;const W=()=>l(21,oe=!0),x=()=>kl(we,ue,ae.raw),fe=()=>l(5,N=!N),ce=()=>l(13,V=!V);function Ue(I){_=I,l(0,_)}function Le(I){d=I,l(1,d)}const Ye=()=>y("seed"),he=()=>y("stats");function ye(){g=Qe(this.value),l(2,g)}function Be(I){ee=I,l(6,ee)}const Ne=()=>l(7,pe=!pe),Pe=()=>l(8,_e=!_e),ze=I=>Ie(g,I.passives),nt=I=>Ie(g,I.passives),ut=I=>Ie(g,I.passives);function ft(I){et[I?"unshift":"push"](()=>{z=I,l(12,z)})}const rt=I=>L(f[I].id);function ot(I){f[I].min=Qe(this.value),l(4,f)}function It(I){f[I].weight=Qe(this.value),l(4,f)}function w(){H=Qe(this.value),l(14,H)}const ct=()=>Z(),ht=()=>l(21,oe=!1);return t.$$.update=()=>{t.$$.dirty[0]&1&&l(24,i=_?Object.keys(te.TimelessJewelConquerors[_.value]).map(I=>({value:I,label:I})):[]),t.$$.dirty[0]&8&&l(9,n=u?jl(He.nodes[u]).filter(I=>!I.isJewelSocket&&!I.isMastery):[]),t.$$.dirty[0]&519&&l(23,s=!g||!_||!d||Object.keys(te.TimelessJewelConquerors[_.value]).indexOf(d.value)<0?[]:n.filter(I=>!!te.TreeToPassive[I.skill]).map(I=>({node:I.skill,result:Il.Calculate(te.TreeToPassive[I.skill].Index,g,_.value,d.value)}))),t.$$.dirty[0]&1&&l(43,r=_?Object.keys(P[_.value]):[]),t.$$.dirty[0]&16|t.$$.dirty[1]&4096&&l(22,c=r.map(I=>{const $=parseInt(I);return{label:at($),value:$}}).filter(I=>!(I.value in f))),t.$$.dirty[0]&32&&localStorage.setItem("groupResults",N?"true":"false"),t.$$.dirty[0]&64&&localStorage.setItem("sortOrder",ee.value),t.$$.dirty[0]&128&&localStorage.setItem("colored",pe?"true":"false"),t.$$.dirty[0]&256&&localStorage.setItem("split",_e?"true":"false")},[_,d,g,u,f,N,ee,pe,_e,n,m,A,z,V,H,X,G,ae,we,ue,Ae,oe,c,s,i,h,S,y,O,C,L,D,Z,Ie,de,U,ne,re,le,se,me,Ce,b,r,W,x,fe,ce,Ue,Le,Ye,he,ye,Be,Ne,Pe,ze,nt,ut,ft,rt,ot,It,w,ct,ht]}class Ks extends lt{constructor(e){super(),st(this,e,Js,Vs,it,{colorKeys:42},null,[-1,-1,-1])}get colorKeys(){return this.$$.ctx[42]}}export{Ks as default};
